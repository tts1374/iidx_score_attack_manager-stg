var kr=Object.defineProperty;var fn=Re=>{throw TypeError(Re)};var Or=(Re,xe,Ae)=>xe in Re?kr(Re,xe,{enumerable:!0,configurable:!0,writable:!0,value:Ae}):Re[xe]=Ae;var Xe=(Re,xe,Ae)=>Or(Re,typeof xe!="symbol"?xe+"":xe,Ae),Mt=(Re,xe,Ae)=>xe.has(Re)||fn("Cannot "+Ae);var ae=(Re,xe,Ae)=>(Mt(Re,xe,"read from private field"),Ae?Ae.call(Re):xe.get(Re)),Ue=(Re,xe,Ae)=>xe.has(Re)?fn("Cannot add the same private member more than once"):xe instanceof WeakSet?xe.add(Re):xe.set(Re,Ae),We=(Re,xe,Ae,_)=>(Mt(Re,xe,"write to private field"),_?_.call(Re,Ae):xe.set(Re,Ae),Ae),ht=(Re,xe,Ae)=>(Mt(Re,xe,"access private method"),Ae);(function(){"use strict";/* @preserve
**
** LICENSE for the sqlite3 WebAssembly/JavaScript APIs.
**
** This bundle (typically released as sqlite3.js or sqlite3.mjs)
** is an amalgamation of JavaScript source code from two projects:
**
** 1) https://emscripten.org: the Emscripten "glue code" is covered by
**    the terms of the MIT license and University of Illinois/NCSA
**    Open Source License, as described at:
**
**    https://emscripten.org/docs/introducing_emscripten/emscripten_license.html
**
** 2) https://sqlite.org: all code and documentation labeled as being
**    from this source are released under the same terms as the sqlite3
**    C library:
**
** 2022-10-16
**
** The author disclaims copyright to this source code.  In place of a
** legal notice, here is a blessing:
**
** *   May you do good and not evil.
** *   May you find forgiveness for yourself and forgive others.
** *   May you share freely, never taking more than you give.
*//* @preserve
** This code was built from sqlite3 version...
**
** SQLITE_VERSION "3.52.0"
** SQLITE_VERSION_NUMBER 3052000
** SQLITE_SOURCE_ID "2026-01-30 06:37:34 407724c4e80efdf93d885e95b5209a100a3f470fe0298138be57201f65f9817e"
**
** Emscripten SDK: 5.0.0
*/async function Re(xe={}){var an,cn,un;var Ae,_=xe,Et=!!globalThis.window,ut=!!globalThis.WorkerGlobalScope;(cn=(an=globalThis.process)==null?void 0:an.versions)!=null&&cn.node&&((un=globalThis.process)==null||un.type),function(e){const t=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:function(){console.warn("globalThis.sqlite3InitModuleState is missing",arguments)}});delete globalThis.sqlite3InitModuleState,t.debugModule("pre-js.js sqlite3InitModuleState =",t),e.locateFile=(function(o,s){return this.emscriptenLocateFile instanceof Function?this.emscriptenLocateFile(o,s):new URL(o,self.location.href).href}).bind(t),e.instantiateWasm=(function(s,n){if(this.emscriptenInstantiateWasm instanceof Function)return this.emscriptenInstantiateWasm(s,n);const i=this,r=e.locateFile(i.wasmFilename,typeof nt>"u"?"":nt);i.debugModule("instantiateWasm() uri =",r,"sIMS =",this);const u=()=>fetch(r,{credentials:"same-origin"}),x=S=>{S.imports=s,i.instantiateWasm=S,n(S.instance,S.module)};return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(u(),s).then(x):async()=>u().then(S=>S.arrayBuffer()).then(S=>WebAssembly.instantiate(S,s)).then(x))()}).bind(t)}(_);var $e="./this.program",mt=self.location.href,nt="";function At(e){return _.locateFile?_.locateFile(e,nt):nt+e}var Ye,st;if(Et||ut){try{nt=new URL(".",mt).href}catch{}ut&&(st=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ye=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}var It=console.log.bind(console),rt=console.error.bind(console),gt,Bt=!1,Tt,kt,Je,ot,bt,Le,De,He,Qt=!1;function Ut(){var e=et.buffer;Je=new Int8Array(e),bt=new Int16Array(e),ot=new Uint8Array(e),Le=new Int32Array(e),De=new Uint32Array(e),He=new BigInt64Array(e),new BigUint64Array(e)}function dn(){if(_.wasmMemory)et=_.wasmMemory;else{var e=_.INITIAL_MEMORY||8388608;et=new WebAssembly.Memory({initial:e/65536,maximum:32768})}Ut()}function pn(){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)An(_.preRun.shift());Wt(Vt)}function hn(){Qt=!0,!_.noFSInit&&!a.initialized&&a.init(),dt.__wasm_call_ctors(),a.ignorePermissions=!1}function mn(){if(_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;)En(_.postRun.shift());Wt(Ht)}function Ze(e){var o;(o=_.onAbort)==null||o.call(_,e),e="Aborted("+e+")",rt(e),Bt=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw kt==null||kt(t),t}var Lt;function gn(){return _.locateFile?At("sqlite3.wasm"):new URL("/iidx_score_attack_manager-stg/assets/sqlite3-DGXXSD5r.wasm",self.location.href).href}function bn(e){if(e==Lt&&gt)return new Uint8Array(gt);if(st)return st(e);throw"both async and sync fetching of the wasm failed"}async function yn(e){if(!gt)try{var t=await Ye(e);return new Uint8Array(t)}catch{}return bn(e)}async function qn(e,t){try{var o=await yn(e);return await WebAssembly.instantiate(o,t)}catch(s){rt(`failed to asynchronously prepare wasm: ${s}`),Ze(s)}}async function vn(e,t,o){if(!e)try{var s=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(s,o)}catch(n){rt(`wasm streaming compile failed: ${n}`),rt("falling back to ArrayBuffer instantiation")}return qn(t,o)}function Sn(){return{env:ln,wasi_snapshot_preview1:ln}}async function wn(){function e(s,n){return dt=s.exports,Tr(dt),dt}function t(s){return e(s.instance)}var o=Sn();return _.instantiateWasm?new Promise((s,n)=>{_.instantiateWasm(o,(i,r)=>{s(e(i))})}):(Lt??(Lt=gn()),t(await vn(gt,Lt,o)))}var Wt=e=>{for(;e.length>0;)e.shift()(_)},Ht=[],En=e=>Ht.push(e),Vt=[],An=e=>Vt.push(e),et,Ce={isAbs:e=>e.charAt(0)==="/",splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var o=0,s=e.length-1;s>=0;s--){var n=e[s];n==="."?e.splice(s,1):n===".."?(e.splice(s,1),o++):o&&(e.splice(s,1),o--)}if(t)for(;o;o--)e.unshift("..");return e},normalize:e=>{var t=Ce.isAbs(e),o=e.slice(-1)==="/";return e=Ce.normalizeArray(e.split("/").filter(s=>!!s),!t).join("/"),!e&&!t&&(e="."),e&&o&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Ce.splitPath(e),o=t[0],s=t[1];return!o&&!s?".":(s&&(s=s.slice(0,-1)),o+s)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>Ce.normalize(e.join("/")),join2:(e,t)=>Ce.normalize(e+"/"+t)},In=()=>e=>crypto.getRandomValues(e),Gt=e=>{(Gt=In())(e)},_t={resolve:(...e)=>{for(var t="",o=!1,s=e.length-1;s>=-1&&!o;s--){var n=s>=0?e[s]:a.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,o=Ce.isAbs(n)}return t=Ce.normalizeArray(t.split("/").filter(i=>!!i),!o).join("/"),(o?"/":"")+t||"."},relative:(e,t)=>{e=_t.resolve(e).slice(1),t=_t.resolve(t).slice(1);function o(S){for(var J=0;J<S.length&&S[J]==="";J++);for(var R=S.length-1;R>=0&&S[R]==="";R--);return J>R?[]:S.slice(J,R-J+1)}for(var s=o(e.split("/")),n=o(t.split("/")),i=Math.min(s.length,n.length),r=i,u=0;u<i;u++)if(s[u]!==n[u]){r=u;break}for(var x=[],u=r;u<s.length;u++)x.push("..");return x=x.concat(n.slice(r)),x.join("/")}},$t=new TextDecoder,Jt=(e,t,o,s)=>{for(var n=t+o;e[t]&&!(t>=n);)++t;return t},yt=(e,t=0,o,s)=>{var n=Jt(e,t,o);return $t.decode(e.buffer?e.subarray(t,n):new Uint8Array(e.slice(t,n)))},Ct=[],Ot=e=>{for(var t=0,o=0;o<e.length;++o){var s=e.charCodeAt(o);s<=127?t++:s<=2047?t+=2:s>=55296&&s<=57343?(t+=4,++o):t+=3}return t},Kt=(e,t,o,s)=>{if(!(s>0))return 0;for(var n=o,i=o+s-1,r=0;r<e.length;++r){var u=e.codePointAt(r);if(u<=127){if(o>=i)break;t[o++]=u}else if(u<=2047){if(o+1>=i)break;t[o++]=192|u>>6,t[o++]=128|u&63}else if(u<=65535){if(o+2>=i)break;t[o++]=224|u>>12,t[o++]=128|u>>6&63,t[o++]=128|u&63}else{if(o+3>=i)break;t[o++]=240|u>>18,t[o++]=128|u>>12&63,t[o++]=128|u>>6&63,t[o++]=128|u&63,r++}}return t[o]=0,o-n},Nt=(e,t,o)=>{var s=Ot(e)+1,n=new Array(s),i=Kt(e,n,0,n.length);return n.length=i,n},Tn=()=>{var t;if(!Ct.length){var e=null;if((t=globalThis.window)!=null&&t.prompt&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;Ct=Nt(e)}return Ct.shift()},lt={ttys:[],init(){},shutdown(){},register(e,t){lt.ttys[e]={input:[],output:[],ops:t},a.registerDevice(e,lt.stream_ops)},stream_ops:{open(e){var t=lt.ttys[e.node.rdev];if(!t)throw new a.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,o,s,n){if(!e.tty||!e.tty.ops.get_char)throw new a.ErrnoError(60);for(var i=0,r=0;r<s;r++){var u;try{u=e.tty.ops.get_char(e.tty)}catch{throw new a.ErrnoError(29)}if(u===void 0&&i===0)throw new a.ErrnoError(6);if(u==null)break;i++,t[o+r]=u}return i&&(e.node.atime=Date.now()),i},write(e,t,o,s,n){if(!e.tty||!e.tty.ops.put_char)throw new a.ErrnoError(60);try{for(var i=0;i<s;i++)e.tty.ops.put_char(e.tty,t[o+i])}catch{throw new a.ErrnoError(29)}return s&&(e.node.mtime=e.node.ctime=Date.now()),i}},default_tty_ops:{get_char(e){return Tn()},put_char(e,t){t===null||t===10?(It(yt(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;((t=e.output)==null?void 0:t.length)>0&&(It(yt(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,o){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(rt(yt(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;((t=e.output)==null?void 0:t.length)>0&&(rt(yt(e.output)),e.output=[])}}},kn=(e,t)=>ot.fill(0,e,e+t),Xt=(e,t)=>Math.ceil(e/t)*t,Yt=e=>{e=Xt(e,65536);var t=on(65536,e);return t&&kn(t,e),t},we={ops_table:null,mount(e){return we.createNode(null,"/",16895,0)},createNode(e,t,o,s){if(a.isBlkdev(o)||a.isFIFO(o))throw new a.ErrnoError(63);we.ops_table||(we.ops_table={dir:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr,lookup:we.node_ops.lookup,mknod:we.node_ops.mknod,rename:we.node_ops.rename,unlink:we.node_ops.unlink,rmdir:we.node_ops.rmdir,readdir:we.node_ops.readdir,symlink:we.node_ops.symlink},stream:{llseek:we.stream_ops.llseek}},file:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr},stream:{llseek:we.stream_ops.llseek,read:we.stream_ops.read,write:we.stream_ops.write,mmap:we.stream_ops.mmap,msync:we.stream_ops.msync}},link:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr,readlink:we.node_ops.readlink},stream:{}},chrdev:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr},stream:a.chrdev_stream_ops}});var n=a.createNode(e,t,o,s);return a.isDir(n.mode)?(n.node_ops=we.ops_table.dir.node,n.stream_ops=we.ops_table.dir.stream,n.contents={}):a.isFile(n.mode)?(n.node_ops=we.ops_table.file.node,n.stream_ops=we.ops_table.file.stream,n.usedBytes=0,n.contents=null):a.isLink(n.mode)?(n.node_ops=we.ops_table.link.node,n.stream_ops=we.ops_table.link.stream):a.isChrdev(n.mode)&&(n.node_ops=we.ops_table.chrdev.node,n.stream_ops=we.ops_table.chrdev.stream),n.atime=n.mtime=n.ctime=Date.now(),e&&(e.contents[t]=n,e.atime=e.mtime=e.ctime=n.atime),n},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var o=e.contents?e.contents.length:0;if(!(o>=t)){t=Math.max(t,o*(o<1024*1024?2:1.125)>>>0),o!=0&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var o=e.contents;e.contents=new Uint8Array(t),o&&e.contents.set(o.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=a.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,a.isDir(e.mode)?t.size=4096:a.isFile(e.mode)?t.size=e.usedBytes:a.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){for(const o of["mode","atime","mtime","ctime"])t[o]!=null&&(e[o]=t[o]);t.size!==void 0&&we.resizeFileStorage(e,t.size)},lookup(e,t){throw we.doesNotExistError||(we.doesNotExistError=new a.ErrnoError(44),we.doesNotExistError.stack="<generic error, no stack>"),we.doesNotExistError},mknod(e,t,o,s){return we.createNode(e,t,o,s)},rename(e,t,o){var s;try{s=a.lookupNode(t,o)}catch{}if(s){if(a.isDir(e.mode))for(var n in s.contents)throw new a.ErrnoError(55);a.hashRemoveNode(s)}delete e.parent.contents[e.name],t.contents[o]=e,e.name=o,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){for(var o in a.lookupNode(e,t).contents)throw new a.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,t,o){var s=we.createNode(e,t,41471,0);return s.link=o,s},readlink(e){if(!a.isLink(e.mode))throw new a.ErrnoError(28);return e.link}},stream_ops:{read(e,t,o,s,n){var i=e.node.contents;if(n>=e.node.usedBytes)return 0;var r=Math.min(e.node.usedBytes-n,s);if(r>8&&i.subarray)t.set(i.subarray(n,n+r),o);else for(var u=0;u<r;u++)t[o+u]=i[n+u];return r},write(e,t,o,s,n,i){if(t.buffer===Je.buffer&&(i=!1),!s)return 0;var r=e.node;if(r.mtime=r.ctime=Date.now(),t.subarray&&(!r.contents||r.contents.subarray)){if(i)return r.contents=t.subarray(o,o+s),r.usedBytes=s,s;if(r.usedBytes===0&&n===0)return r.contents=t.slice(o,o+s),r.usedBytes=s,s;if(n+s<=r.usedBytes)return r.contents.set(t.subarray(o,o+s),n),s}if(we.expandFileStorage(r,n+s),r.contents.subarray&&t.subarray)r.contents.set(t.subarray(o,o+s),n);else for(var u=0;u<s;u++)r.contents[n+u]=t[o+u];return r.usedBytes=Math.max(r.usedBytes,n+s),s},llseek(e,t,o){var s=t;if(o===1?s+=e.position:o===2&&a.isFile(e.node.mode)&&(s+=e.node.usedBytes),s<0)throw new a.ErrnoError(28);return s},mmap(e,t,o,s,n){if(!a.isFile(e.node.mode))throw new a.ErrnoError(43);var i,r,u=e.node.contents;if(!(n&2)&&u&&u.buffer===Je.buffer)r=!1,i=u.byteOffset;else{if(r=!0,i=Yt(t),!i)throw new a.ErrnoError(48);u&&((o>0||o+t<u.length)&&(u.subarray?u=u.subarray(o,o+t):u=Array.prototype.slice.call(u,o,o+t)),Je.set(u,i))}return{ptr:i,allocated:r}},msync(e,t,o,s,n){return we.stream_ops.write(e,t,0,s,o,!1),0}}},On=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof t>"u")throw new Error(`Unknown file open mode: ${e}`);return t},Rt=(e,t)=>{var o=0;return e&&(o|=365),t&&(o|=146),o},xn=async e=>{var t=await Ye(e);return new Uint8Array(t)},Pn=(...e)=>a.createDataFile(...e),at=0,qt=null,Fn=e=>{var o;if(at--,(o=_.monitorRunDependencies)==null||o.call(_,at),at==0&&qt){var t=qt;qt=null,t()}},Ln=e=>{var t;at++,(t=_.monitorRunDependencies)==null||t.call(_,at)},Zt=[],Cn=async(e,t)=>{typeof Browser<"u"&&Browser.init();for(var o of Zt)if(o.canHandle(t))return o.handle(e,t);return e},en=async(e,t,o,s,n,i,r,u)=>{var x=t?_t.resolve(Ce.join2(e,t)):e;Ln();try{var S=o;typeof o=="string"&&(S=await xn(o)),S=await Cn(S,x),u==null||u(),i||Pn(e,t,S,s,n,r)}finally{Fn()}},Nn=(e,t,o,s,n,i,r,u,x,S)=>{en(e,t,o,s,n,u,x,S).then(i).catch(r)},a={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{constructor(e){Xe(this,"name","ErrnoError");this.errno=e}},FSStream:class{constructor(){Xe(this,"shared",{})}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,o,s){Xe(this,"node_ops",{});Xe(this,"stream_ops",{});Xe(this,"readMode",365);Xe(this,"writeMode",146);Xe(this,"mounted",null);e||(e=this),this.parent=e,this.mount=e.mount,this.id=a.nextInode++,this.name=t,this.mode=o,this.rdev=s,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return a.isDir(this.mode)}get isDevice(){return a.isChrdev(this.mode)}},lookupPath(e,t={}){if(!e)throw new a.ErrnoError(44);t.follow_mount??(t.follow_mount=!0),Ce.isAbs(e)||(e=a.cwd()+"/"+e);e:for(var o=0;o<40;o++){for(var s=e.split("/").filter(S=>!!S),n=a.root,i="/",r=0;r<s.length;r++){var u=r===s.length-1;if(u&&t.parent)break;if(s[r]!=="."){if(s[r]===".."){if(i=Ce.dirname(i),a.isRoot(n)){e=i+"/"+s.slice(r+1).join("/"),o--;continue e}else n=n.parent;continue}i=Ce.join2(i,s[r]);try{n=a.lookupNode(n,s[r])}catch(S){if((S==null?void 0:S.errno)===44&&u&&t.noent_okay)return{path:i};throw S}if(a.isMountpoint(n)&&(!u||t.follow_mount)&&(n=n.mounted.root),a.isLink(n.mode)&&(!u||t.follow)){if(!n.node_ops.readlink)throw new a.ErrnoError(52);var x=n.node_ops.readlink(n);Ce.isAbs(x)||(x=Ce.dirname(i)+"/"+x),e=x+"/"+s.slice(r+1).join("/");continue e}}}return{path:i,node:n}}throw new a.ErrnoError(32)},getPath(e){for(var t;;){if(a.isRoot(e)){var o=e.mount.mountpoint;return t?o[o.length-1]!=="/"?`${o}/${t}`:o+t:o}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var o=0,s=0;s<t.length;s++)o=(o<<5)-o+t.charCodeAt(s)|0;return(e+o>>>0)%a.nameTable.length},hashAddNode(e){var t=a.hashName(e.parent.id,e.name);e.name_next=a.nameTable[t],a.nameTable[t]=e},hashRemoveNode(e){var t=a.hashName(e.parent.id,e.name);if(a.nameTable[t]===e)a.nameTable[t]=e.name_next;else for(var o=a.nameTable[t];o;){if(o.name_next===e){o.name_next=e.name_next;break}o=o.name_next}},lookupNode(e,t){var o=a.mayLookup(e);if(o)throw new a.ErrnoError(o);for(var s=a.hashName(e.id,t),n=a.nameTable[s];n;n=n.name_next){var i=n.name;if(n.parent.id===e.id&&i===t)return n}return a.lookup(e,t)},createNode(e,t,o,s){var n=new a.FSNode(e,t,o,s);return a.hashAddNode(n),n},destroyNode(e){a.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return a.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!a.isDir(e.mode))return 54;var t=a.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){if(!a.isDir(e.mode))return 54;try{return a.lookupNode(e,t),20}catch{}return a.nodePermissions(e,"wx")},mayDelete(e,t,o){var s;try{s=a.lookupNode(e,t)}catch(i){return i.errno}var n=a.nodePermissions(e,"wx");if(n)return n;if(o){if(!a.isDir(s.mode))return 54;if(a.isRoot(s)||a.getPath(s)===a.cwd())return 10}else if(a.isDir(s.mode))return 31;return 0},mayOpen(e,t){return e?a.isLink(e.mode)?32:a.isDir(e.mode)&&(a.flagsToPermissionString(t)!=="r"||t&576)?31:a.nodePermissions(e,a.flagsToPermissionString(t)):44},checkOpExists(e,t){if(!e)throw new a.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=a.MAX_OPEN_FDS;e++)if(!a.streams[e])return e;throw new a.ErrnoError(33)},getStreamChecked(e){var t=a.getStream(e);if(!t)throw new a.ErrnoError(8);return t},getStream:e=>a.streams[e],createStream(e,t=-1){return e=Object.assign(new a.FSStream,e),t==-1&&(t=a.nextfd()),e.fd=t,a.streams[t]=e,e},closeStream(e){a.streams[e]=null},dupStream(e,t=-1){var s,n;var o=a.createStream(e,t);return(n=(s=o.stream_ops)==null?void 0:s.dup)==null||n.call(s,o),o},doSetAttr(e,t,o){var s=e==null?void 0:e.stream_ops.setattr,n=s?e:t;s??(s=t.node_ops.setattr),a.checkOpExists(s,63),s(n,o)},chrdev_stream_ops:{open(e){var t,o;e.stream_ops=a.getDevice(e.node.rdev).stream_ops,(o=(t=e.stream_ops).open)==null||o.call(t,e)},llseek(){throw new a.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){a.devices[e]={stream_ops:t}},getDevice:e=>a.devices[e],getMounts(e){for(var t=[],o=[e];o.length;){var s=o.pop();t.push(s),o.push(...s.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),a.syncFSRequests++,a.syncFSRequests>1&&rt(`warning: ${a.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var o=a.getMounts(a.root.mount),s=0;function n(u){return a.syncFSRequests--,t(u)}function i(u){if(u)return i.errored?void 0:(i.errored=!0,n(u));++s>=o.length&&n(null)}for(var r of o)r.type.syncfs?r.type.syncfs(r,e,i):i(null)},mount(e,t,o){var s=o==="/",n=!o,i;if(s&&a.root)throw new a.ErrnoError(10);if(!s&&!n){var r=a.lookupPath(o,{follow_mount:!1});if(o=r.path,i=r.node,a.isMountpoint(i))throw new a.ErrnoError(10);if(!a.isDir(i.mode))throw new a.ErrnoError(54)}var u={type:e,opts:t,mountpoint:o,mounts:[]},x=e.mount(u);return x.mount=u,u.root=x,s?a.root=x:i&&(i.mounted=u,i.mount&&i.mount.mounts.push(u)),x},unmount(e){var t=a.lookupPath(e,{follow_mount:!1});if(!a.isMountpoint(t.node))throw new a.ErrnoError(28);var o=t.node,s=o.mounted,n=a.getMounts(s);for(var[i,r]of Object.entries(a.nameTable))for(;r;){var u=r.name_next;n.includes(r.mount)&&a.destroyNode(r),r=u}o.mounted=null;var x=o.mount.mounts.indexOf(s);o.mount.mounts.splice(x,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,o){var s=a.lookupPath(e,{parent:!0}).node,n=Ce.basename(e);if(!n)throw new a.ErrnoError(28);if(n==="."||n==="..")throw new a.ErrnoError(20);var i=a.mayCreate(s,n);if(i)throw new a.ErrnoError(i);if(!s.node_ops.mknod)throw new a.ErrnoError(63);return s.node_ops.mknod(s,n,t,o)},statfs(e){return a.statfsNode(a.lookupPath(e,{follow:!0}).node)},statfsStream(e){return a.statfsNode(e.node)},statfsNode(e){var t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:a.nextInode,ffree:a.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create(e,t=438){return t&=4095,t|=32768,a.mknod(e,t,0)},mkdir(e,t=511){return t&=1023,t|=16384,a.mknod(e,t,0)},mkdirTree(e,t){var o=e.split("/"),s="";for(var n of o)if(n){(s||Ce.isAbs(e))&&(s+="/"),s+=n;try{a.mkdir(s,t)}catch(i){if(i.errno!=20)throw i}}},mkdev(e,t,o){return typeof o>"u"&&(o=t,t=438),t|=8192,a.mknod(e,t,o)},symlink(e,t){if(!_t.resolve(e))throw new a.ErrnoError(44);var o=a.lookupPath(t,{parent:!0}).node;if(!o)throw new a.ErrnoError(44);var s=Ce.basename(t),n=a.mayCreate(o,s);if(n)throw new a.ErrnoError(n);if(!o.node_ops.symlink)throw new a.ErrnoError(63);return o.node_ops.symlink(o,s,e)},rename(e,t){var o=Ce.dirname(e),s=Ce.dirname(t),n=Ce.basename(e),i=Ce.basename(t),r=a.lookupPath(e,{parent:!0}),u=r.node,x;if(r=a.lookupPath(t,{parent:!0}),x=r.node,!u||!x)throw new a.ErrnoError(44);if(u.mount!==x.mount)throw new a.ErrnoError(75);var S=a.lookupNode(u,n),J=_t.relative(e,s);if(J.charAt(0)!==".")throw new a.ErrnoError(28);if(J=_t.relative(t,o),J.charAt(0)!==".")throw new a.ErrnoError(55);var R;try{R=a.lookupNode(x,i)}catch{}if(S!==R){var V=a.isDir(S.mode),h=a.mayDelete(u,n,V);if(h)throw new a.ErrnoError(h);if(h=R?a.mayDelete(x,i,V):a.mayCreate(x,i),h)throw new a.ErrnoError(h);if(!u.node_ops.rename)throw new a.ErrnoError(63);if(a.isMountpoint(S)||R&&a.isMountpoint(R))throw new a.ErrnoError(10);if(x!==u&&(h=a.nodePermissions(u,"w"),h))throw new a.ErrnoError(h);a.hashRemoveNode(S);try{u.node_ops.rename(S,x,i),S.parent=x}catch(j){throw j}finally{a.hashAddNode(S)}}},rmdir(e){var t=a.lookupPath(e,{parent:!0}).node,o=Ce.basename(e),s=a.lookupNode(t,o),n=a.mayDelete(t,o,!0);if(n)throw new a.ErrnoError(n);if(!t.node_ops.rmdir)throw new a.ErrnoError(63);if(a.isMountpoint(s))throw new a.ErrnoError(10);t.node_ops.rmdir(t,o),a.destroyNode(s)},readdir(e){var t=a.lookupPath(e,{follow:!0}).node;return a.checkOpExists(t.node_ops.readdir,54)(t)},unlink(e){var t=a.lookupPath(e,{parent:!0}).node;if(!t)throw new a.ErrnoError(44);var o=Ce.basename(e),s=a.lookupNode(t,o),n=a.mayDelete(t,o,!1);if(n)throw new a.ErrnoError(n);if(!t.node_ops.unlink)throw new a.ErrnoError(63);if(a.isMountpoint(s))throw new a.ErrnoError(10);t.node_ops.unlink(t,o),a.destroyNode(s)},readlink(e){var t=a.lookupPath(e).node;if(!t)throw new a.ErrnoError(44);if(!t.node_ops.readlink)throw new a.ErrnoError(28);return t.node_ops.readlink(t)},stat(e,t){var o=a.lookupPath(e,{follow:!t}).node;return a.checkOpExists(o.node_ops.getattr,63)(o)},fstat(e){var t=a.getStreamChecked(e),o=t.node,s=t.stream_ops.getattr,n=s?t:o;return s??(s=o.node_ops.getattr),a.checkOpExists(s,63),s(n)},lstat(e){return a.stat(e,!0)},doChmod(e,t,o,s){a.doSetAttr(e,t,{mode:o&4095|t.mode&-4096,ctime:Date.now(),dontFollow:s})},chmod(e,t,o){var s;typeof e=="string"?s=a.lookupPath(e,{follow:!o}).node:s=e,a.doChmod(null,s,t,o)},lchmod(e,t){a.chmod(e,t,!0)},fchmod(e,t){var o=a.getStreamChecked(e);a.doChmod(o,o.node,t,!1)},doChown(e,t,o){a.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:o})},chown(e,t,o,s){var n;typeof e=="string"?n=a.lookupPath(e,{follow:!s}).node:n=e,a.doChown(null,n,s)},lchown(e,t,o){a.chown(e,t,o,!0)},fchown(e,t,o){var s=a.getStreamChecked(e);a.doChown(s,s.node,!1)},doTruncate(e,t,o){if(a.isDir(t.mode))throw new a.ErrnoError(31);if(!a.isFile(t.mode))throw new a.ErrnoError(28);var s=a.nodePermissions(t,"w");if(s)throw new a.ErrnoError(s);a.doSetAttr(e,t,{size:o,timestamp:Date.now()})},truncate(e,t){if(t<0)throw new a.ErrnoError(28);var o;typeof e=="string"?o=a.lookupPath(e,{follow:!0}).node:o=e,a.doTruncate(null,o,t)},ftruncate(e,t){var o=a.getStreamChecked(e);if(t<0||!(o.flags&2097155))throw new a.ErrnoError(28);a.doTruncate(o,o.node,t)},utime(e,t,o){var s=a.lookupPath(e,{follow:!0}).node;a.checkOpExists(s.node_ops.setattr,63)(s,{atime:t,mtime:o})},open(e,t,o=438){if(e==="")throw new a.ErrnoError(44);t=typeof t=="string"?On(t):t,t&64?o=o&4095|32768:o=0;var s,n;if(typeof e=="object")s=e;else{n=e.endsWith("/");var i=a.lookupPath(e,{follow:!(t&131072),noent_okay:!0});s=i.node,e=i.path}var r=!1;if(t&64)if(s){if(t&128)throw new a.ErrnoError(20)}else{if(n)throw new a.ErrnoError(31);s=a.mknod(e,o|511,0),r=!0}if(!s)throw new a.ErrnoError(44);if(a.isChrdev(s.mode)&&(t&=-513),t&65536&&!a.isDir(s.mode))throw new a.ErrnoError(54);if(!r){var u=a.mayOpen(s,t);if(u)throw new a.ErrnoError(u)}t&512&&!r&&a.truncate(s,0),t&=-131713;var x=a.createStream({node:s,path:a.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1});return x.stream_ops.open&&x.stream_ops.open(x),r&&a.chmod(s,o&511),_.logReadFiles&&!(t&1)&&(e in a.readFiles||(a.readFiles[e]=1)),x},close(e){if(a.isClosed(e))throw new a.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{a.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,o){if(a.isClosed(e))throw new a.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new a.ErrnoError(70);if(o!=0&&o!=1&&o!=2)throw new a.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,o),e.ungotten=[],e.position},read(e,t,o,s,n){if(s<0||n<0)throw new a.ErrnoError(28);if(a.isClosed(e))throw new a.ErrnoError(8);if((e.flags&2097155)===1)throw new a.ErrnoError(8);if(a.isDir(e.node.mode))throw new a.ErrnoError(31);if(!e.stream_ops.read)throw new a.ErrnoError(28);var i=typeof n<"u";if(!i)n=e.position;else if(!e.seekable)throw new a.ErrnoError(70);var r=e.stream_ops.read(e,t,o,s,n);return i||(e.position+=r),r},write(e,t,o,s,n,i){if(s<0||n<0)throw new a.ErrnoError(28);if(a.isClosed(e))throw new a.ErrnoError(8);if(!(e.flags&2097155))throw new a.ErrnoError(8);if(a.isDir(e.node.mode))throw new a.ErrnoError(31);if(!e.stream_ops.write)throw new a.ErrnoError(28);e.seekable&&e.flags&1024&&a.llseek(e,0,2);var r=typeof n<"u";if(!r)n=e.position;else if(!e.seekable)throw new a.ErrnoError(70);var u=e.stream_ops.write(e,t,o,s,n,i);return r||(e.position+=u),u},mmap(e,t,o,s,n){if(s&2&&!(n&2)&&(e.flags&2097155)!==2)throw new a.ErrnoError(2);if((e.flags&2097155)===1)throw new a.ErrnoError(2);if(!e.stream_ops.mmap)throw new a.ErrnoError(43);if(!t)throw new a.ErrnoError(28);return e.stream_ops.mmap(e,t,o,s,n)},msync(e,t,o,s,n){return e.stream_ops.msync?e.stream_ops.msync(e,t,o,s,n):0},ioctl(e,t,o){if(!e.stream_ops.ioctl)throw new a.ErrnoError(59);return e.stream_ops.ioctl(e,t,o)},readFile(e,t={}){t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary"&&Ze(`Invalid encoding type "${t.encoding}"`);var o=a.open(e,t.flags),s=a.stat(e).size,n=new Uint8Array(s);return a.read(o,n,0,s,0),t.encoding==="utf8"&&(n=yt(n)),a.close(o),n},writeFile(e,t,o={}){o.flags=o.flags||577;var s=a.open(e,o.flags,o.mode);typeof t=="string"&&(t=new Uint8Array(Nt(t))),ArrayBuffer.isView(t)?a.write(s,t,0,t.byteLength,void 0,o.canOwn):Ze("Unsupported data type"),a.close(s)},cwd:()=>a.currentPath,chdir(e){var t=a.lookupPath(e,{follow:!0});if(t.node===null)throw new a.ErrnoError(44);if(!a.isDir(t.node.mode))throw new a.ErrnoError(54);var o=a.nodePermissions(t.node,"x");if(o)throw new a.ErrnoError(o);a.currentPath=t.path},createDefaultDirectories(){a.mkdir("/tmp"),a.mkdir("/home"),a.mkdir("/home/web_user")},createDefaultDevices(){a.mkdir("/dev"),a.registerDevice(a.makedev(1,3),{read:()=>0,write:(s,n,i,r,u)=>r,llseek:()=>0}),a.mkdev("/dev/null",a.makedev(1,3)),lt.register(a.makedev(5,0),lt.default_tty_ops),lt.register(a.makedev(6,0),lt.default_tty1_ops),a.mkdev("/dev/tty",a.makedev(5,0)),a.mkdev("/dev/tty1",a.makedev(6,0));var e=new Uint8Array(1024),t=0,o=()=>(t===0&&(Gt(e),t=e.byteLength),e[--t]);a.createDevice("/dev","random",o),a.createDevice("/dev","urandom",o),a.mkdir("/dev/shm"),a.mkdir("/dev/shm/tmp")},createSpecialDirectories(){a.mkdir("/proc");var e=a.mkdir("/proc/self");a.mkdir("/proc/self/fd"),a.mount({mount(){var t=a.createNode(e,"fd",16895,73);return t.stream_ops={llseek:we.stream_ops.llseek},t.node_ops={lookup(o,s){var n=+s,i=a.getStreamChecked(n),r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path},id:n+1};return r.parent=r,r},readdir(){return Array.from(a.streams.entries()).filter(([o,s])=>s).map(([o,s])=>o.toString())}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,o){e?a.createDevice("/dev","stdin",e):a.symlink("/dev/tty","/dev/stdin"),t?a.createDevice("/dev","stdout",null,t):a.symlink("/dev/tty","/dev/stdout"),o?a.createDevice("/dev","stderr",null,o):a.symlink("/dev/tty1","/dev/stderr"),a.open("/dev/stdin",0),a.open("/dev/stdout",1),a.open("/dev/stderr",1)},staticInit(){a.nameTable=new Array(4096),a.mount(we,{},"/"),a.createDefaultDirectories(),a.createDefaultDevices(),a.createSpecialDirectories(),a.filesystems={MEMFS:we}},init(e,t,o){a.initialized=!0,e??(e=_.stdin),t??(t=_.stdout),o??(o=_.stderr),a.createStandardStreams(e,t,o)},quit(){a.initialized=!1;for(var e of a.streams)e&&a.close(e)},findObject(e,t){var o=a.analyzePath(e,t);return o.exists?o.object:null},analyzePath(e,t){try{var o=a.lookupPath(e,{follow:!t});e=o.path}catch{}var s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var o=a.lookupPath(e,{parent:!0});s.parentExists=!0,s.parentPath=o.path,s.parentObject=o.node,s.name=Ce.basename(e),o=a.lookupPath(e,{follow:!t}),s.exists=!0,s.path=o.path,s.object=o.node,s.name=o.node.name,s.isRoot=o.path==="/"}catch(n){s.error=n.errno}return s},createPath(e,t,o,s){e=typeof e=="string"?e:a.getPath(e);for(var n=t.split("/").reverse();n.length;){var i=n.pop();if(i){var r=Ce.join2(e,i);try{a.mkdir(r)}catch(u){if(u.errno!=20)throw u}e=r}}return r},createFile(e,t,o,s,n){var i=Ce.join2(typeof e=="string"?e:a.getPath(e),t),r=Rt(s,n);return a.create(i,r)},createDataFile(e,t,o,s,n,i){var r=t;e&&(e=typeof e=="string"?e:a.getPath(e),r=t?Ce.join2(e,t):e);var u=Rt(s,n),x=a.create(r,u);if(o){if(typeof o=="string"){for(var S=new Array(o.length),J=0,R=o.length;J<R;++J)S[J]=o.charCodeAt(J);o=S}a.chmod(x,u|146);var V=a.open(x,577);a.write(V,o,0,o.length,0,i),a.close(V),a.chmod(x,u)}},createDevice(e,t,o,s){var u;var n=Ce.join2(typeof e=="string"?e:a.getPath(e),t),i=Rt(!!o,!!s);(u=a.createDevice).major??(u.major=64);var r=a.makedev(a.createDevice.major++,0);return a.registerDevice(r,{open(x){x.seekable=!1},close(x){var S;(S=s==null?void 0:s.buffer)!=null&&S.length&&s(10)},read(x,S,J,R,V){for(var h=0,j=0;j<R;j++){var C;try{C=o()}catch{throw new a.ErrnoError(29)}if(C===void 0&&h===0)throw new a.ErrnoError(6);if(C==null)break;h++,S[J+j]=C}return h&&(x.node.atime=Date.now()),h},write(x,S,J,R,V){for(var h=0;h<R;h++)try{s(S[J+h])}catch{throw new a.ErrnoError(29)}return R&&(x.node.mtime=x.node.ctime=Date.now()),h}}),a.mkdev(n,i,r)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(globalThis.XMLHttpRequest)Ze("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else try{e.contents=st(e.url)}catch{throw new a.ErrnoError(29)}},createLazyFile(e,t,o,s,n){class i{constructor(){Xe(this,"lengthKnown",!1);Xe(this,"chunks",[])}get(R){if(!(R>this.length-1||R<0)){var V=R%this.chunkSize,h=R/this.chunkSize|0;return this.getter(h)[V]}}setDataGetter(R){this.getter=R}cacheLength(){var R=new XMLHttpRequest;R.open("HEAD",o,!1),R.send(null),R.status>=200&&R.status<300||R.status===304||Ze("Couldn't load "+o+". Status: "+R.status);var V=Number(R.getResponseHeader("Content-length")),h,j=(h=R.getResponseHeader("Accept-Ranges"))&&h==="bytes",C=(h=R.getResponseHeader("Content-Encoding"))&&h==="gzip",Y=1024*1024;j||(Y=V);var b=(O,z)=>{O>z&&Ze("invalid range ("+O+", "+z+") or no bytes requested!"),z>V-1&&Ze("only "+V+" bytes available! programmer error!");var w=new XMLHttpRequest;return w.open("GET",o,!1),V!==Y&&w.setRequestHeader("Range","bytes="+O+"-"+z),w.responseType="arraybuffer",w.overrideMimeType&&w.overrideMimeType("text/plain; charset=x-user-defined"),w.send(null),w.status>=200&&w.status<300||w.status===304||Ze("Couldn't load "+o+". Status: "+w.status),w.response!==void 0?new Uint8Array(w.response||[]):Nt(w.responseText||"")},A=this;A.setDataGetter(O=>{var z=O*Y,w=(O+1)*Y-1;return w=Math.min(w,V-1),typeof A.chunks[O]>"u"&&(A.chunks[O]=b(z,w)),typeof A.chunks[O]>"u"&&Ze("doXHR failed!"),A.chunks[O]}),(C||!V)&&(Y=V=1,V=this.getter(0).length,Y=V,It("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=V,this._chunkSize=Y,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(globalThis.XMLHttpRequest){ut||Ze("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var r={isDevice:!1,contents:new i}}else var r={isDevice:!1,url:o};var u=a.createFile(e,t,r,s,n);r.contents?u.contents=r.contents:r.url&&(u.contents=null,u.url=r.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var x={};for(const[J,R]of Object.entries(u.stream_ops))x[J]=(...V)=>(a.forceLoadFile(u),R(...V));function S(J,R,V,h,j){var C=J.node.contents;if(j>=C.length)return 0;var Y=Math.min(C.length-j,h);if(C.slice)for(var b=0;b<Y;b++)R[V+b]=C[j+b];else for(var b=0;b<Y;b++)R[V+b]=C.get(j+b);return Y}return x.read=(J,R,V,h,j)=>(a.forceLoadFile(u),S(J,R,V,h,j)),x.mmap=(J,R,V,h,j)=>{a.forceLoadFile(u);var C=Yt(R);if(!C)throw new a.ErrnoError(48);return S(J,Je,C,R,V),{ptr:C,allocated:!0}},u.stream_ops=x,u}},Rn=(e,t,o)=>{if(!e)return"";var s=Jt(ot,e,t);return $t.decode(ot.subarray(e,s))},Te={calculateAt(e,t,o){if(Ce.isAbs(t))return t;var s;if(e===-100?s=a.cwd():s=Te.getStreamFromFD(e).path,t.length==0){if(!o)throw new a.ErrnoError(44);return s}return s+"/"+t},writeStat(e,t){De[e>>2]=t.dev,De[e+4>>2]=t.mode,De[e+8>>2]=t.nlink,De[e+12>>2]=t.uid,De[e+16>>2]=t.gid,De[e+20>>2]=t.rdev,He[e+24>>3]=BigInt(t.size),Le[e+32>>2]=4096,Le[e+36>>2]=t.blocks;var o=t.atime.getTime(),s=t.mtime.getTime(),n=t.ctime.getTime();return He[e+40>>3]=BigInt(Math.floor(o/1e3)),De[e+48>>2]=o%1e3*1e3*1e3,He[e+56>>3]=BigInt(Math.floor(s/1e3)),De[e+64>>2]=s%1e3*1e3*1e3,He[e+72>>3]=BigInt(Math.floor(n/1e3)),De[e+80>>2]=n%1e3*1e3*1e3,He[e+88>>3]=BigInt(t.ino),0},writeStatFs(e,t){De[e+4>>2]=t.bsize,De[e+60>>2]=t.bsize,He[e+8>>3]=BigInt(t.blocks),He[e+16>>3]=BigInt(t.bfree),He[e+24>>3]=BigInt(t.bavail),He[e+32>>3]=BigInt(t.files),He[e+40>>3]=BigInt(t.ffree),De[e+48>>2]=t.fsid,De[e+64>>2]=t.flags,De[e+56>>2]=t.namelen},doMsync(e,t,o,s,n){if(!a.isFile(t.node.mode))throw new a.ErrnoError(43);if(s&2)return 0;var i=ot.slice(e,e+o);a.msync(t,i,n,o,s)},getStreamFromFD(e){return a.getStreamChecked(e)},varargs:void 0,getStr(e){return Rn(e)}};function Dn(e,t){try{return e=Te.getStr(e),a.chmod(e,t),0}catch(o){if(typeof a>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function jn(e,t,o,s){try{if(t=Te.getStr(t),t=Te.calculateAt(e,t),o&-8)return-28;var n=a.lookupPath(t,{follow:!0}).node;if(!n)return-44;var i="";return o&4&&(i+="r"),o&2&&(i+="w"),o&1&&(i+="x"),i&&a.nodePermissions(n,i)?-2:0}catch(r){if(typeof a>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Mn(e,t){try{return a.fchmod(e,t),0}catch(o){if(typeof a>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function zn(e,t,o){try{return a.fchown(e,t,o),0}catch(s){if(typeof a>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}var xt=()=>{var e=Le[+Te.varargs>>2];return Te.varargs+=4,e},ft=xt;function Bn(e,t,o){Te.varargs=o;try{var s=Te.getStreamFromFD(e);switch(t){case 0:var n=xt();if(n<0)return-28;for(;a.streams[n];)n++;return a.dupStream(s,n).fd;case 1:case 2:return 0;case 3:return s.flags;case 4:var n=xt();return s.flags|=n,0;case 12:var n=ft(),i=0;return bt[n+i>>1]=2,0;case 13:case 14:return 0}return-28}catch(r){if(typeof a>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Qn(e,t){try{return Te.writeStat(t,a.fstat(e))}catch(o){if(typeof a>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var Un=9007199254740992,Wn=-9007199254740992,vt=e=>e<Wn||e>Un?NaN:Number(e);function Hn(e,t){t=vt(t);try{return isNaN(t)?-61:(a.ftruncate(e,t),0)}catch(o){if(typeof a>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var ct=(e,t,o)=>Kt(e,ot,t,o);function Vn(e,t){try{if(t===0)return-28;var o=a.cwd(),s=Ot(o)+1;return t<s?-68:(ct(o,e,t),s)}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Gn(e,t,o){Te.varargs=o;try{var s=Te.getStreamFromFD(e);switch(t){case 21509:return s.tty?0:-59;case 21505:if(!s.tty)return-59;if(s.tty.ops.ioctl_tcgets){var n=s.tty.ops.ioctl_tcgets(s),R=ft();Le[R>>2]=n.c_iflag||0,Le[R+4>>2]=n.c_oflag||0,Le[R+8>>2]=n.c_cflag||0,Le[R+12>>2]=n.c_lflag||0;for(var i=0;i<32;i++)Je[R+i+17]=n.c_cc[i]||0;return 0}return 0;case 21510:case 21511:case 21512:return s.tty?0:-59;case 21506:case 21507:case 21508:if(!s.tty)return-59;if(s.tty.ops.ioctl_tcsets){for(var R=ft(),r=Le[R>>2],u=Le[R+4>>2],x=Le[R+8>>2],S=Le[R+12>>2],J=[],i=0;i<32;i++)J.push(Je[R+i+17]);return s.tty.ops.ioctl_tcsets(s.tty,t,{c_iflag:r,c_oflag:u,c_cflag:x,c_lflag:S,c_cc:J})}return 0;case 21519:if(!s.tty)return-59;var R=ft();return Le[R>>2]=0,0;case 21520:return s.tty?-28:-59;case 21537:case 21531:var R=ft();return a.ioctl(s,t,R);case 21523:if(!s.tty)return-59;if(s.tty.ops.ioctl_tiocgwinsz){var V=s.tty.ops.ioctl_tiocgwinsz(s.tty),R=ft();bt[R>>1]=V[0],bt[R+2>>1]=V[1]}return 0;case 21524:return s.tty?0:-59;case 21515:return s.tty?0:-59;default:return-28}}catch(h){if(typeof a>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function $n(e,t){try{return e=Te.getStr(e),Te.writeStat(t,a.lstat(e))}catch(o){if(typeof a>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Jn(e,t,o){try{return t=Te.getStr(t),t=Te.calculateAt(e,t),a.mkdir(t,o,0),0}catch(s){if(typeof a>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Kn(e,t,o,s){try{t=Te.getStr(t);var n=s&256,i=s&4096;return s=s&-6401,t=Te.calculateAt(e,t,i),Te.writeStat(o,n?a.lstat(t):a.stat(t))}catch(r){if(typeof a>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Xn(e,t,o,s){Te.varargs=s;try{t=Te.getStr(t),t=Te.calculateAt(e,t);var n=s?xt():0;return a.open(t,o,n).fd}catch(i){if(typeof a>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Yn(e,t,o,s){try{if(t=Te.getStr(t),t=Te.calculateAt(e,t),s<=0)return-28;var n=a.readlink(t),i=Math.min(s,Ot(n)),r=Je[o+i];return ct(n,o,s+1),Je[o+i]=r,i}catch(u){if(typeof a>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function Zn(e){try{return e=Te.getStr(e),a.rmdir(e),0}catch(t){if(typeof a>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function er(e,t){try{return e=Te.getStr(e),Te.writeStat(t,a.stat(e))}catch(o){if(typeof a>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function tr(e,t,o){try{if(t=Te.getStr(t),t=Te.calculateAt(e,t),!o)a.unlink(t);else if(o===512)a.rmdir(t);else return-28;return 0}catch(s){if(typeof a>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}var tn=e=>De[e>>2]+Le[e+4>>2]*4294967296;function nr(e,t,o,s){try{t=Te.getStr(t),t=Te.calculateAt(e,t,!0);var n=Date.now(),i,r;if(!o)i=n,r=n;else{var u=tn(o),x=Le[o+8>>2];x==1073741823?i=n:x==1073741822?i=null:i=u*1e3+x/(1e3*1e3),o+=16,u=tn(o),x=Le[o+8>>2],x==1073741823?r=n:x==1073741822?r=null:r=u*1e3+x/(1e3*1e3)}return(r??i)!==null&&a.utime(t,i,r),0}catch(S){if(typeof a>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var rr=e=>e%4===0&&(e%100!==0||e%400===0),ir=[0,31,60,91,121,152,182,213,244,274,305,335],sr=[0,31,59,90,120,151,181,212,243,273,304,334],or=e=>(rr(e.getFullYear())?ir:sr)[e.getMonth()]+e.getDate()-1;function lr(e,t){e=vt(e);var o=new Date(e*1e3);Le[t>>2]=o.getSeconds(),Le[t+4>>2]=o.getMinutes(),Le[t+8>>2]=o.getHours(),Le[t+12>>2]=o.getDate(),Le[t+16>>2]=o.getMonth(),Le[t+20>>2]=o.getFullYear()-1900,Le[t+24>>2]=o.getDay();var s=or(o)|0;Le[t+28>>2]=s,Le[t+36>>2]=-(o.getTimezoneOffset()*60);var n=new Date(o.getFullYear(),0,1),i=new Date(o.getFullYear(),6,1).getTimezoneOffset(),r=n.getTimezoneOffset(),u=(i!=r&&o.getTimezoneOffset()==Math.min(r,i))|0;Le[t+32>>2]=u}function ar(e,t,o,s,n,i,r){n=vt(n);try{var u=Te.getStreamFromFD(s),x=a.mmap(u,e,n,t,o),S=x.ptr;return Le[i>>2]=x.allocated,De[r>>2]=S,0}catch(J){if(typeof a>"u"||J.name!=="ErrnoError")throw J;return-J.errno}}function cr(e,t,o,s,n,i){i=vt(i);try{var r=Te.getStreamFromFD(n);o&2&&Te.doMsync(e,r,t,s,i)}catch(u){if(typeof a>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}var ur=(e,t,o,s)=>{var n=new Date().getFullYear(),i=new Date(n,0,1),r=new Date(n,6,1),u=i.getTimezoneOffset(),x=r.getTimezoneOffset(),S=Math.max(u,x);De[e>>2]=S*60,Le[t>>2]=+(u!=x);var J=h=>{var j=h>=0?"-":"+",C=Math.abs(h);return`UTC${j}${String(Math.floor(C/60)).padStart(2,"0")}${String(C%60).padStart(2,"0")}`},R=J(u),V=J(x);x<u?(ct(R,o,17),ct(V,s,17)):(ct(R,s,17),ct(V,o,17))},nn=()=>performance.now(),rn=()=>Date.now(),_r=e=>e>=0&&e<=3;function fr(e,t,o){if(!_r(e))return 28;var s;e===0?s=rn():s=nn();var n=Math.round(s*1e3*1e3);return He[o>>3]=BigInt(n),0}var sn=()=>2147483648,dr=()=>sn(),pr=e=>{var t=(e-et.buffer.byteLength+65535)/65536|0;try{return et.grow(t),Ut(),1}catch{}},hr=e=>{var t=ot.length;e>>>=0;var o=sn();if(e>o)return!1;for(var s=1;s<=4;s*=2){var n=t*(1+.2/s);if(n=Math.min(n,e+100663296),pr(Math.min(o,Xt(Math.max(e,n),65536))))return!0}return!1},Dt={},mr=()=>$e||"./this.program",St=()=>{var n;if(!St.strings){var e=(((n=globalThis.navigator)==null?void 0:n.language)??"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:mr()};for(var o in Dt)Dt[o]===void 0?delete t[o]:t[o]=Dt[o];var s=[];for(var o in t)s.push(`${o}=${t[o]}`);St.strings=s}return St.strings},gr=(e,t)=>{var o=0,s=0;for(var n of St()){var i=t+o;De[e+s>>2]=i,o+=ct(n,i,1/0)+1,s+=4}return 0},br=(e,t)=>{var o=St();De[e>>2]=o.length;var s=0;for(var n of o)s+=Ot(n)+1;return De[t>>2]=s,0};function yr(e){try{var t=Te.getStreamFromFD(e);return a.close(t),0}catch(o){if(typeof a>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function qr(e,t){try{var o=0,s=0,n=0,i=Te.getStreamFromFD(e),r=i.tty?2:a.isDir(i.mode)?3:a.isLink(i.mode)?7:4;return Je[t]=r,bt[t+2>>1]=n,He[t+8>>3]=BigInt(o),He[t+16>>3]=BigInt(s),0}catch(u){if(typeof a>"u"||u.name!=="ErrnoError")throw u;return u.errno}}var vr=(e,t,o,s)=>{for(var n=0,i=0;i<o;i++){var r=De[t>>2],u=De[t+4>>2];t+=8;var x=a.read(e,Je,r,u,s);if(x<0)return-1;if(n+=x,x<u)break}return n};function Sr(e,t,o,s){try{var n=vr(Te.getStreamFromFD(e),t,o);return De[s>>2]=n,0}catch(i){if(typeof a>"u"||i.name!=="ErrnoError")throw i;return i.errno}}function wr(e,t,o,s){t=vt(t);try{if(isNaN(t))return 61;var n=Te.getStreamFromFD(e);return a.llseek(n,t,o),He[s>>3]=BigInt(n.position),n.getdents&&t===0&&o===0&&(n.getdents=null),0}catch(i){if(typeof a>"u"||i.name!=="ErrnoError")throw i;return i.errno}}function Er(e){var o,s;try{var t=Te.getStreamFromFD(e);return(s=(o=t.stream_ops)==null?void 0:o.fsync)==null?void 0:s.call(o,t)}catch(n){if(typeof a>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var Ar=(e,t,o,s)=>{for(var n=0,i=0;i<o;i++){var r=De[t>>2],u=De[t+4>>2];t+=8;var x=a.write(e,Je,r,u,s);if(x<0)return-1;if(n+=x,x<u)break}return n};function Ir(e,t,o,s){try{var n=Ar(Te.getStreamFromFD(e),t,o);return De[s>>2]=n,0}catch(i){if(typeof a>"u"||i.name!=="ErrnoError")throw i;return i.errno}}if(a.createPreloadedFile=Nn,a.preloadFile=en,a.staticInit(),dn(),_.noExitRuntime&&_.noExitRuntime,_.preloadPlugins&&(Zt=_.preloadPlugins),_.print&&(It=_.print),_.printErr&&(rt=_.printErr),_.wasmBinary&&(gt=_.wasmBinary),_.arguments&&_.arguments,_.thisProgram&&($e=_.thisProgram),_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.shift()();_.wasmMemory=et;var on;function Tr(e){_._sqlite3_status64=e.sqlite3_status64,_._sqlite3_status=e.sqlite3_status,_._sqlite3_db_status64=e.sqlite3_db_status64,_._sqlite3_msize=e.sqlite3_msize,_._sqlite3_db_status=e.sqlite3_db_status,_._sqlite3_vfs_find=e.sqlite3_vfs_find,_._sqlite3_initialize=e.sqlite3_initialize,_._sqlite3_malloc=e.sqlite3_malloc,_._sqlite3_free=e.sqlite3_free,_._sqlite3_vfs_register=e.sqlite3_vfs_register,_._sqlite3_vfs_unregister=e.sqlite3_vfs_unregister,_._sqlite3_malloc64=e.sqlite3_malloc64,_._sqlite3_realloc=e.sqlite3_realloc,_._sqlite3_realloc64=e.sqlite3_realloc64,_._sqlite3_value_text=e.sqlite3_value_text,_._sqlite3_randomness=e.sqlite3_randomness,_._sqlite3_stricmp=e.sqlite3_stricmp,_._sqlite3_strnicmp=e.sqlite3_strnicmp,_._sqlite3_uri_parameter=e.sqlite3_uri_parameter,_._sqlite3_uri_boolean=e.sqlite3_uri_boolean,_._sqlite3_serialize=e.sqlite3_serialize,_._sqlite3_prepare_v2=e.sqlite3_prepare_v2,_._sqlite3_step=e.sqlite3_step,_._sqlite3_column_int64=e.sqlite3_column_int64,_._sqlite3_reset=e.sqlite3_reset,_._sqlite3_exec=e.sqlite3_exec,_._sqlite3_column_int=e.sqlite3_column_int,_._sqlite3_finalize=e.sqlite3_finalize,_._sqlite3_file_control=e.sqlite3_file_control,_._sqlite3_column_name=e.sqlite3_column_name,_._sqlite3_column_text=e.sqlite3_column_text,_._sqlite3_column_type=e.sqlite3_column_type,_._sqlite3_errmsg=e.sqlite3_errmsg,_._sqlite3_deserialize=e.sqlite3_deserialize,_._sqlite3_clear_bindings=e.sqlite3_clear_bindings,_._sqlite3_value_blob=e.sqlite3_value_blob,_._sqlite3_value_bytes=e.sqlite3_value_bytes,_._sqlite3_value_double=e.sqlite3_value_double,_._sqlite3_value_int=e.sqlite3_value_int,_._sqlite3_value_int64=e.sqlite3_value_int64,_._sqlite3_value_subtype=e.sqlite3_value_subtype,_._sqlite3_value_pointer=e.sqlite3_value_pointer,_._sqlite3_value_type=e.sqlite3_value_type,_._sqlite3_value_nochange=e.sqlite3_value_nochange,_._sqlite3_value_frombind=e.sqlite3_value_frombind,_._sqlite3_value_dup=e.sqlite3_value_dup,_._sqlite3_value_free=e.sqlite3_value_free,_._sqlite3_result_blob=e.sqlite3_result_blob,_._sqlite3_result_error_toobig=e.sqlite3_result_error_toobig,_._sqlite3_result_error_nomem=e.sqlite3_result_error_nomem,_._sqlite3_result_double=e.sqlite3_result_double,_._sqlite3_result_error=e.sqlite3_result_error,_._sqlite3_result_int=e.sqlite3_result_int,_._sqlite3_result_int64=e.sqlite3_result_int64,_._sqlite3_result_null=e.sqlite3_result_null,_._sqlite3_result_pointer=e.sqlite3_result_pointer,_._sqlite3_result_subtype=e.sqlite3_result_subtype,_._sqlite3_result_text=e.sqlite3_result_text,_._sqlite3_result_zeroblob=e.sqlite3_result_zeroblob,_._sqlite3_result_zeroblob64=e.sqlite3_result_zeroblob64,_._sqlite3_result_error_code=e.sqlite3_result_error_code,_._sqlite3_user_data=e.sqlite3_user_data,_._sqlite3_context_db_handle=e.sqlite3_context_db_handle,_._sqlite3_vtab_nochange=e.sqlite3_vtab_nochange,_._sqlite3_vtab_in_first=e.sqlite3_vtab_in_first,_._sqlite3_vtab_in_next=e.sqlite3_vtab_in_next,_._sqlite3_aggregate_context=e.sqlite3_aggregate_context,_._sqlite3_get_auxdata=e.sqlite3_get_auxdata,_._sqlite3_set_auxdata=e.sqlite3_set_auxdata,_._sqlite3_column_count=e.sqlite3_column_count,_._sqlite3_data_count=e.sqlite3_data_count,_._sqlite3_column_blob=e.sqlite3_column_blob,_._sqlite3_column_bytes=e.sqlite3_column_bytes,_._sqlite3_column_double=e.sqlite3_column_double,_._sqlite3_column_value=e.sqlite3_column_value,_._sqlite3_column_decltype=e.sqlite3_column_decltype,_._sqlite3_column_database_name=e.sqlite3_column_database_name,_._sqlite3_column_table_name=e.sqlite3_column_table_name,_._sqlite3_column_origin_name=e.sqlite3_column_origin_name,_._sqlite3_bind_blob=e.sqlite3_bind_blob,_._sqlite3_bind_double=e.sqlite3_bind_double,_._sqlite3_bind_int=e.sqlite3_bind_int,_._sqlite3_bind_int64=e.sqlite3_bind_int64,_._sqlite3_bind_null=e.sqlite3_bind_null,_._sqlite3_bind_pointer=e.sqlite3_bind_pointer,_._sqlite3_bind_text=e.sqlite3_bind_text,_._sqlite3_bind_parameter_count=e.sqlite3_bind_parameter_count,_._sqlite3_bind_parameter_name=e.sqlite3_bind_parameter_name,_._sqlite3_bind_parameter_index=e.sqlite3_bind_parameter_index,_._sqlite3_db_handle=e.sqlite3_db_handle,_._sqlite3_stmt_readonly=e.sqlite3_stmt_readonly,_._sqlite3_stmt_isexplain=e.sqlite3_stmt_isexplain,_._sqlite3_stmt_explain=e.sqlite3_stmt_explain,_._sqlite3_stmt_busy=e.sqlite3_stmt_busy,_._sqlite3_next_stmt=e.sqlite3_next_stmt,_._sqlite3_stmt_status=e.sqlite3_stmt_status,_._sqlite3_sql=e.sqlite3_sql,_._sqlite3_expanded_sql=e.sqlite3_expanded_sql,_._sqlite3_preupdate_old=e.sqlite3_preupdate_old,_._sqlite3_preupdate_count=e.sqlite3_preupdate_count,_._sqlite3_preupdate_depth=e.sqlite3_preupdate_depth,_._sqlite3_preupdate_blobwrite=e.sqlite3_preupdate_blobwrite,_._sqlite3_preupdate_new=e.sqlite3_preupdate_new,_._sqlite3_value_numeric_type=e.sqlite3_value_numeric_type,_._sqlite3_set_authorizer=e.sqlite3_set_authorizer,_._sqlite3_strglob=e.sqlite3_strglob,_._sqlite3_strlike=e.sqlite3_strlike,_._sqlite3_auto_extension=e.sqlite3_auto_extension,_._sqlite3_cancel_auto_extension=e.sqlite3_cancel_auto_extension,_._sqlite3_reset_auto_extension=e.sqlite3_reset_auto_extension,_._sqlite3_prepare_v3=e.sqlite3_prepare_v3,_._sqlite3_create_module=e.sqlite3_create_module,_._sqlite3_create_module_v2=e.sqlite3_create_module_v2,_._sqlite3_drop_modules=e.sqlite3_drop_modules,_._sqlite3_declare_vtab=e.sqlite3_declare_vtab,_._sqlite3_vtab_on_conflict=e.sqlite3_vtab_on_conflict,_._sqlite3_vtab_collation=e.sqlite3_vtab_collation,_._sqlite3_vtab_in=e.sqlite3_vtab_in,_._sqlite3_vtab_rhs_value=e.sqlite3_vtab_rhs_value,_._sqlite3_vtab_distinct=e.sqlite3_vtab_distinct,_._sqlite3_keyword_name=e.sqlite3_keyword_name,_._sqlite3_keyword_count=e.sqlite3_keyword_count,_._sqlite3_keyword_check=e.sqlite3_keyword_check,_._sqlite3_complete=e.sqlite3_complete,_._sqlite3_libversion=e.sqlite3_libversion,_._sqlite3_libversion_number=e.sqlite3_libversion_number,_._sqlite3_shutdown=e.sqlite3_shutdown,_._sqlite3_last_insert_rowid=e.sqlite3_last_insert_rowid,_._sqlite3_set_last_insert_rowid=e.sqlite3_set_last_insert_rowid,_._sqlite3_changes64=e.sqlite3_changes64,_._sqlite3_changes=e.sqlite3_changes,_._sqlite3_total_changes64=e.sqlite3_total_changes64,_._sqlite3_total_changes=e.sqlite3_total_changes,_._sqlite3_txn_state=e.sqlite3_txn_state,_._sqlite3_close_v2=e.sqlite3_close_v2,_._sqlite3_busy_handler=e.sqlite3_busy_handler,_._sqlite3_progress_handler=e.sqlite3_progress_handler,_._sqlite3_busy_timeout=e.sqlite3_busy_timeout,_._sqlite3_interrupt=e.sqlite3_interrupt,_._sqlite3_is_interrupted=e.sqlite3_is_interrupted,_._sqlite3_create_function=e.sqlite3_create_function,_._sqlite3_create_function_v2=e.sqlite3_create_function_v2,_._sqlite3_create_window_function=e.sqlite3_create_window_function,_._sqlite3_overload_function=e.sqlite3_overload_function,_._sqlite3_trace_v2=e.sqlite3_trace_v2,_._sqlite3_commit_hook=e.sqlite3_commit_hook,_._sqlite3_update_hook=e.sqlite3_update_hook,_._sqlite3_rollback_hook=e.sqlite3_rollback_hook,_._sqlite3_preupdate_hook=e.sqlite3_preupdate_hook,_._sqlite3_set_errmsg=e.sqlite3_set_errmsg,_._sqlite3_error_offset=e.sqlite3_error_offset,_._sqlite3_errcode=e.sqlite3_errcode,_._sqlite3_extended_errcode=e.sqlite3_extended_errcode,_._sqlite3_errstr=e.sqlite3_errstr,_._sqlite3_limit=e.sqlite3_limit,_._sqlite3_open=e.sqlite3_open,_._sqlite3_open_v2=e.sqlite3_open_v2,_._sqlite3_create_collation=e.sqlite3_create_collation,_._sqlite3_create_collation_v2=e.sqlite3_create_collation_v2,_._sqlite3_collation_needed=e.sqlite3_collation_needed,_._sqlite3_get_autocommit=e.sqlite3_get_autocommit,_._sqlite3_table_column_metadata=e.sqlite3_table_column_metadata,_._sqlite3_extended_result_codes=e.sqlite3_extended_result_codes,_._sqlite3_uri_key=e.sqlite3_uri_key,_._sqlite3_uri_int64=e.sqlite3_uri_int64,_._sqlite3_db_name=e.sqlite3_db_name,_._sqlite3_db_filename=e.sqlite3_db_filename,_._sqlite3_db_readonly=e.sqlite3_db_readonly,_._sqlite3_compileoption_used=e.sqlite3_compileoption_used,_._sqlite3_compileoption_get=e.sqlite3_compileoption_get,_._sqlite3session_diff=e.sqlite3session_diff,_._sqlite3session_attach=e.sqlite3session_attach,_._sqlite3session_create=e.sqlite3session_create,_._sqlite3session_delete=e.sqlite3session_delete,_._sqlite3session_table_filter=e.sqlite3session_table_filter,_._sqlite3session_changeset=e.sqlite3session_changeset,_._sqlite3session_changeset_strm=e.sqlite3session_changeset_strm,_._sqlite3session_patchset_strm=e.sqlite3session_patchset_strm,_._sqlite3session_patchset=e.sqlite3session_patchset,_._sqlite3session_enable=e.sqlite3session_enable,_._sqlite3session_indirect=e.sqlite3session_indirect,_._sqlite3session_isempty=e.sqlite3session_isempty,_._sqlite3session_memory_used=e.sqlite3session_memory_used,_._sqlite3session_object_config=e.sqlite3session_object_config,_._sqlite3session_changeset_size=e.sqlite3session_changeset_size,_._sqlite3changeset_start=e.sqlite3changeset_start,_._sqlite3changeset_start_v2=e.sqlite3changeset_start_v2,_._sqlite3changeset_start_strm=e.sqlite3changeset_start_strm,_._sqlite3changeset_start_v2_strm=e.sqlite3changeset_start_v2_strm,_._sqlite3changeset_next=e.sqlite3changeset_next,_._sqlite3changeset_op=e.sqlite3changeset_op,_._sqlite3changeset_pk=e.sqlite3changeset_pk,_._sqlite3changeset_old=e.sqlite3changeset_old,_._sqlite3changeset_new=e.sqlite3changeset_new,_._sqlite3changeset_conflict=e.sqlite3changeset_conflict,_._sqlite3changeset_fk_conflicts=e.sqlite3changeset_fk_conflicts,_._sqlite3changeset_finalize=e.sqlite3changeset_finalize,_._sqlite3changeset_invert=e.sqlite3changeset_invert,_._sqlite3changeset_invert_strm=e.sqlite3changeset_invert_strm,_._sqlite3changeset_apply_v2=e.sqlite3changeset_apply_v2,_._sqlite3changeset_apply_v3=e.sqlite3changeset_apply_v3,_._sqlite3changeset_apply=e.sqlite3changeset_apply,_._sqlite3changeset_apply_v3_strm=e.sqlite3changeset_apply_v3_strm,_._sqlite3changeset_apply_v2_strm=e.sqlite3changeset_apply_v2_strm,_._sqlite3changeset_apply_strm=e.sqlite3changeset_apply_strm,_._sqlite3changegroup_new=e.sqlite3changegroup_new,_._sqlite3changegroup_add=e.sqlite3changegroup_add,_._sqlite3changegroup_output=e.sqlite3changegroup_output,_._sqlite3changegroup_add_strm=e.sqlite3changegroup_add_strm,_._sqlite3changegroup_output_strm=e.sqlite3changegroup_output_strm,_._sqlite3changegroup_delete=e.sqlite3changegroup_delete,_._sqlite3changeset_concat=e.sqlite3changeset_concat,_._sqlite3changeset_concat_strm=e.sqlite3changeset_concat_strm,_._sqlite3session_config=e.sqlite3session_config,_._sqlite3_sourceid=e.sqlite3_sourceid,_._sqlite3__wasm_pstack_ptr=e.sqlite3__wasm_pstack_ptr,_._sqlite3__wasm_pstack_restore=e.sqlite3__wasm_pstack_restore,_._sqlite3__wasm_pstack_alloc=e.sqlite3__wasm_pstack_alloc,_._sqlite3__wasm_pstack_remaining=e.sqlite3__wasm_pstack_remaining,_._sqlite3__wasm_pstack_quota=e.sqlite3__wasm_pstack_quota,_._sqlite3__wasm_test_struct=e.sqlite3__wasm_test_struct,_._sqlite3__wasm_enum_json=e.sqlite3__wasm_enum_json,_._sqlite3__wasm_vfs_unlink=e.sqlite3__wasm_vfs_unlink,_._sqlite3__wasm_db_vfs=e.sqlite3__wasm_db_vfs,_._sqlite3__wasm_db_reset=e.sqlite3__wasm_db_reset,_._sqlite3__wasm_db_export_chunked=e.sqlite3__wasm_db_export_chunked,_._sqlite3__wasm_db_serialize=e.sqlite3__wasm_db_serialize,_._sqlite3__wasm_vfs_create_file=e.sqlite3__wasm_vfs_create_file,_._sqlite3__wasm_posix_create_file=e.sqlite3__wasm_posix_create_file,_._sqlite3__wasm_kvvfsMakeKey=e.sqlite3__wasm_kvvfsMakeKey,_._sqlite3__wasm_kvvfs_methods=e.sqlite3__wasm_kvvfs_methods,_._sqlite3__wasm_vtab_config=e.sqlite3__wasm_vtab_config,_._sqlite3__wasm_db_config_ip=e.sqlite3__wasm_db_config_ip,_._sqlite3__wasm_db_config_pii=e.sqlite3__wasm_db_config_pii,_._sqlite3__wasm_db_config_s=e.sqlite3__wasm_db_config_s,_._sqlite3__wasm_config_i=e.sqlite3__wasm_config_i,_._sqlite3__wasm_config_ii=e.sqlite3__wasm_config_ii,_._sqlite3__wasm_config_j=e.sqlite3__wasm_config_j,_._sqlite3__wasm_qfmt_token=e.sqlite3__wasm_qfmt_token,_._sqlite3__wasm_kvvfs_decode=e.sqlite3__wasm_kvvfs_decode,_._sqlite3__wasm_kvvfs_encode=e.sqlite3__wasm_kvvfs_encode,_._sqlite3__wasm_init_wasmfs=e.sqlite3__wasm_init_wasmfs,_._sqlite3__wasm_test_intptr=e.sqlite3__wasm_test_intptr,_._sqlite3__wasm_test_voidptr=e.sqlite3__wasm_test_voidptr,_._sqlite3__wasm_test_int64_max=e.sqlite3__wasm_test_int64_max,_._sqlite3__wasm_test_int64_min=e.sqlite3__wasm_test_int64_min,_._sqlite3__wasm_test_int64_times2=e.sqlite3__wasm_test_int64_times2,_._sqlite3__wasm_test_int64_minmax=e.sqlite3__wasm_test_int64_minmax,_._sqlite3__wasm_test_int64ptr=e.sqlite3__wasm_test_int64ptr,_._sqlite3__wasm_test_stack_overflow=e.sqlite3__wasm_test_stack_overflow,_._sqlite3__wasm_test_str_hello=e.sqlite3__wasm_test_str_hello,_._sqlite3__wasm_SQLTester_strglob=e.sqlite3__wasm_SQLTester_strglob,_._malloc=e.malloc,_._free=e.free,_._realloc=e.realloc,on=e.emscripten_builtin_memalign,e._emscripten_stack_restore,e._emscripten_stack_alloc,e.emscripten_stack_get_current,e.__indirect_function_table}var ln={__syscall_chmod:Dn,__syscall_faccessat:jn,__syscall_fchmod:Mn,__syscall_fchown32:zn,__syscall_fcntl64:Bn,__syscall_fstat64:Qn,__syscall_ftruncate64:Hn,__syscall_getcwd:Vn,__syscall_ioctl:Gn,__syscall_lstat64:$n,__syscall_mkdirat:Jn,__syscall_newfstatat:Kn,__syscall_openat:Xn,__syscall_readlinkat:Yn,__syscall_rmdir:Zn,__syscall_stat64:er,__syscall_unlinkat:tr,__syscall_utimensat:nr,_localtime_js:lr,_mmap_js:ar,_munmap_js:cr,_tzset_js:ur,clock_time_get:fr,emscripten_date_now:rn,emscripten_get_heap_max:dr,emscripten_get_now:nn,emscripten_resize_heap:hr,environ_get:gr,environ_sizes_get:br,fd_close:yr,fd_fdstat_get:qr,fd_read:Sr,fd_seek:wr,fd_sync:Er,fd_write:Ir,memory:et};function jt(){if(at>0){qt=jt;return}if(pn(),at>0){qt=jt;return}function e(){var t;_.calledRun=!0,!Bt&&(hn(),Tt==null||Tt(_),(t=_.onRuntimeInitialized)==null||t.call(_),mn())}_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),e()},1)):e()}var dt=await wn();return jt(),_.runSQLite3PostLoadInit=async function(e,t,o){delete t.runSQLite3PostLoadInit,globalThis.sqlite3ApiBootstrap=async function s(n=globalThis.sqlite3ApiConfig||s.defaultConfig){var N;if(s.sqlite3)return(s.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),s.sqlite3;const i=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(i,{allocExportName:i.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:i.useStdAlloc?"free":"sqlite3_free",reallocExportName:i.useStdAlloc?"realloc":"sqlite3_realloc"}),["exports","memory","functionTable","wasmfsOpfsDir"].forEach(p=>{typeof i[p]=="function"&&(i[p]=i[p]())});const r=Object.create(null),u=Object.create(null),x=p=>r.sqlite3_js_rc_str&&r.sqlite3_js_rc_str(p)||"Unknown result code #"+p,S=p=>typeof p=="number"&&p===(p|0)&&p<=2147483647&&p>=-2147483648;class J extends Error{constructor(...g){let T;if(g.length)if(S(g[0]))if(T=g[0],g.length===1)super(x(g[0]));else{const Q=x(T);typeof g[1]=="object"?super(Q,g[1]):(g[0]=Q+":",super(g.join(" ")))}else g.length===2&&typeof g[1]=="object"?super(...g):super(g.join(" "));this.resultCode=T||r.SQLITE_ERROR,this.name="SQLite3Error"}}J.toss=(...p)=>{throw new J(...p)};const R=J.toss;i.wasmfsOpfsDir&&!/^\/[^/]+$/.test(i.wasmfsOpfsDir)&&R("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const V=function p(g){return p._max||(p._max=BigInt("0x7fffffffffffffff"),p._min=~p._max),g>=p._min&&g<=p._max},h=p=>p>=-2147483647n-1n&&p<=2147483647n,j=function p(g){return p._min||(p._min=Number.MIN_SAFE_INTEGER,p._max=Number.MAX_SAFE_INTEGER),g>=p._min&&g<=p._max},C=p=>p&&p.constructor&&S(p.constructor.BYTES_PER_ELEMENT)?p:!1,Y=p=>p&&(p instanceof Uint8Array||p instanceof Int8Array||p instanceof ArrayBuffer),b=p=>p&&(p instanceof Uint8Array||p instanceof Int8Array||p instanceof ArrayBuffer),A=p=>Y(p)||R("Value is not of a supported TypedArray type."),O=function(p){return b(p)?u.typedArrayToString(p instanceof ArrayBuffer?new Uint8Array(p):p,0,p.length):Array.isArray(p)?p.join(""):(u.isPtr(p)&&(p=u.cstrToJs(p)),p)};class z extends Error{constructor(...g){g.length===2&&typeof g[1]=="object"?super(...g):g.length?super(g.join(" ")):super("Allocation failed."),this.resultCode=r.SQLITE_NOMEM,this.name="WasmAllocError"}}z.toss=(...p)=>{throw new z(...p)},Object.assign(r,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(p,g,T,Q,te,de,ve,ge,me)=>{},sqlite3_create_function:(p,g,T,Q,te,de,ve,ge)=>{},sqlite3_create_window_function:(p,g,T,Q,te,de,ve,ge,me,d)=>{},sqlite3_prepare_v3:(p,g,T,Q,te,de)=>{},sqlite3_prepare_v2:(p,g,T,Q,te)=>{},sqlite3_exec:(p,g,T,Q,te)=>{},sqlite3_randomness:(p,g)=>{}});const w={affirmBindableTypedArray:A,flexibleString:O,bigIntFits32:h,bigIntFits64:V,bigIntFitsDouble:j,isBindableTypedArray:Y,isInt32:S,isSQLableTypedArray:b,isTypedArray:C,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,toss:function(...p){throw new Error(p.join(" "))},toss3:R,typedArrayPart:u.typedArrayPart,assert:function(p,g){p||w.toss("Assertion failed:",g)},affirmDbHeader:function(p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));const g="SQLite format 3";15>p.byteLength&&R("Input does not contain an SQLite3 database header.");for(let T=0;T<15;++T)g.charCodeAt(T)!==p[T]&&R("Input does not contain an SQLite3 database header.")},affirmIsDb:function(p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));const g=p.byteLength;(g<512||g%512!==0)&&R("Byte array size",g,"is invalid for an SQLite3 db."),w.affirmDbHeader(p)}};Object.assign(u,{exports:i.exports||R("Missing API config.exports (WASM module exports)."),memory:i.memory||i.exports.memory||R("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),pointerSize:typeof i.exports.sqlite3_libversion()=="number"?4:8,bigIntEnabled:!!i.bigIntEnabled,functionTable:i.functionTable,alloc:void 0,realloc:void 0,dealloc:void 0}),u.allocFromTypedArray=function(p){p instanceof ArrayBuffer&&(p=new Uint8Array(p)),A(p);const g=u.alloc(p.byteLength||1);return u.heapForSize(p.constructor).set(p.byteLength?p:[0],Number(g)),g};{const p=i.allocExportName,g=i.deallocExportName,T=i.reallocExportName;for(const Q of[p,g,T])u.exports[Q]instanceof Function||R("Missing required exports[",Q,"] function.");u.alloc=function Q(te){return Q.impl(te)||z.toss("Failed to allocate",te," bytes.")},u.alloc.impl=u.exports[p],u.realloc=function Q(te,de){const ve=Q.impl(u.ptr.coerce(te),de);return de?ve||z.toss("Failed to reallocate",de," bytes."):u.ptr.null},u.realloc.impl=u.exports[T],u.dealloc=function Q(te){Q.impl(u.ptr.coerce(te))},u.dealloc.impl=u.exports[g]}u.compileOptionUsed=function p(g){if(arguments.length){if(Array.isArray(g)){const T=Object.create(null);return g.forEach(Q=>{T[Q]=r.sqlite3_compileoption_used(Q)}),T}else if(typeof g=="object")return Object.keys(g).forEach(T=>{g[T]=r.sqlite3_compileoption_used(T)}),g}else{if(p._result)return p._result;p._opt||(p._rx=/^([^=]+)=(.+)/,p._rxInt=/^-?\d+$/,p._opt=function(ve,ge){const me=p._rx.exec(ve);ge[0]=me?me[1]:ve,ge[1]=me?p._rxInt.test(me[2])?+me[2]:me[2]:!0});const T=Object.create(null),Q=[0,0];let te=0,de;for(;de=r.sqlite3_compileoption_get(te++);)p._opt(de,Q),T[Q[0]]=Q[1];return p._result=T}return typeof g=="string"?!!r.sqlite3_compileoption_used(g):!1},u.pstack=Object.assign(Object.create(null),{restore:u.exports.sqlite3__wasm_pstack_restore,alloc:function(p){return typeof p=="string"&&!(p=u.sizeofIR(p))&&z.toss("Invalid value for pstack.alloc(",arguments[0],")"),u.exports.sqlite3__wasm_pstack_alloc(p)||z.toss("Could not allocate",p,"bytes from the pstack.")},allocChunks:function(p,g){typeof g=="string"&&!(g=u.sizeofIR(g))&&z.toss("Invalid size value for allocChunks(",arguments[1],")");const T=u.pstack.alloc(p*g),Q=[T];let te=1,de=g;for(;te<p;++te,de+=g)Q.push(u.ptr.add(T,de));return Q},allocPtr:(p=1,g=!0)=>p===1?u.pstack.alloc(g?8:u.ptr.size):u.pstack.allocChunks(p,g?8:u.ptr.size),call:function(p){const g=u.pstack.pointer;try{return p(L)}finally{u.pstack.restore(g)}}}),Object.defineProperties(u.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_remaining}}),r.sqlite3_randomness=(...p)=>{if(p.length===1&&w.isTypedArray(p[0])&&p[0].BYTES_PER_ELEMENT===1){const g=p[0];if(g.byteLength===0)return u.exports.sqlite3_randomness(0,u.ptr.null),g;const T=u.pstack.pointer;try{let Q=g.byteLength,te=0;const de=u.exports.sqlite3_randomness,ve=u.heap8u(),ge=Q<512?Q:512,me=u.pstack.alloc(ge);do{const d=Q>ge?ge:Q;de(d,me),g.set(u.typedArrayPart(ve,me,u.ptr.add(me,d)),te),Q-=d,te+=d}while(Q>0)}catch(Q){i.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Q)}finally{u.pstack.restore(T)}return g}u.exports.sqlite3_randomness(...p)},r.sqlite3_wasmfs_opfs_dir=(function(){if(this.dir!==void 0)return this.dir;const p=i.wasmfsOpfsDir;if(!p||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!u.exports.sqlite3__wasm_init_wasmfs)return this.dir="";try{return p&&u.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],p)===0?this.dir=p:this.dir=""}catch{return this.dir=""}}).bind(Object.create(null)),r.sqlite3_wasmfs_filename_is_persistent=function(p){const g=r.sqlite3_wasmfs_opfs_dir();return g&&p?p.startsWith(g+"/"):!1},r.sqlite3_js_db_uses_vfs=function(p,g,T=0){try{const Q=r.sqlite3_vfs_find(g);return Q?p?Q===r.sqlite3_js_db_vfs(p,T)?Q:!1:Q===r.sqlite3_vfs_find(0)?Q:!1:!1}catch{return!1}},r.sqlite3_js_vfs_list=function(){const p=[];let g=r.sqlite3_vfs_find(u.ptr.null);for(;g;){const T=new r.sqlite3_vfs(g);p.push(u.cstrToJs(T.$zName)),g=T.$pNext,T.dispose()}return p},r.sqlite3_js_db_export=function(p,g=0){p=u.xWrap.testConvertArg("sqlite3*",p),p||R("Invalid sqlite3* argument."),u.bigIntEnabled||R("BigInt support is not enabled.");const T=u.scopedAllocPush();let Q;try{const te=u.scopedAlloc(8+u.ptr.size),de=u.ptr.add(te,8),ve=g?u.isPtr(g)?g:u.scopedAllocCString(""+g):u.ptr.null;let ge=u.exports.sqlite3__wasm_db_serialize(p,ve,de,te,0);ge&&R("Database serialization failed with code",L.capi.sqlite3_js_rc_str(ge)),Q=u.peekPtr(de);const me=u.peek(te,"i64");return ge=me?u.heap8u().slice(Number(Q),Number(Q)+Number(me)):new Uint8Array,ge}finally{Q&&u.exports.sqlite3_free(Q),u.scopedAllocPop(T)}},r.sqlite3_js_db_vfs=(p,g=u.ptr.null)=>w.sqlite3__wasm_db_vfs(p,g),r.sqlite3_js_aggregate_context=(p,g)=>r.sqlite3_aggregate_context(p,g)||(g?z.toss("Cannot allocate",g,"bytes for sqlite3_aggregate_context()"):0),r.sqlite3_js_posix_create_file=function(p,g,T){let Q;g&&u.isPtr(g)?Q=g:g instanceof ArrayBuffer||g instanceof Uint8Array?(Q=u.allocFromTypedArray(g),(arguments.length<3||!w.isInt32(T)||T<0)&&(T=g.byteLength)):J.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!w.isInt32(T)||T<0)&&J.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const te=w.sqlite3__wasm_posix_create_file(p,Q,T);te&&J.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(te))}finally{Q&&Q!==g&&u.dealloc(Q)}},r.sqlite3_js_vfs_create_file=function(p,g,T,Q){i.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternatives.");let te;T?u.isPtr(T)?te=T:(T instanceof ArrayBuffer&&(T=new Uint8Array(T)),T instanceof Uint8Array?(te=u.allocFromTypedArray(T),(arguments.length<4||!w.isInt32(Q)||Q<0)&&(Q=T.byteLength)):J.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):te=0,(!w.isInt32(Q)||Q<0)&&(te&&te!==T&&u.dealloc(te),J.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const de=w.sqlite3__wasm_vfs_create_file(p,g,te,Q);de&&J.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(de))}finally{te&&te!==T&&u.dealloc(te)}},r.sqlite3_js_sql_to_string=p=>{if(typeof p=="string")return p;const g=O(v);return g===v?void 0:g},r.sqlite3_db_config=(function(p,g,...T){switch(g){case r.SQLITE_DBCONFIG_ENABLE_FKEY:case r.SQLITE_DBCONFIG_ENABLE_TRIGGER:case r.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case r.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case r.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case r.SQLITE_DBCONFIG_ENABLE_QPSG:case r.SQLITE_DBCONFIG_TRIGGER_EQP:case r.SQLITE_DBCONFIG_RESET_DATABASE:case r.SQLITE_DBCONFIG_DEFENSIVE:case r.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case r.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case r.SQLITE_DBCONFIG_DQS_DML:case r.SQLITE_DBCONFIG_DQS_DDL:case r.SQLITE_DBCONFIG_ENABLE_VIEW:case r.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case r.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case r.SQLITE_DBCONFIG_STMT_SCANSTATUS:case r.SQLITE_DBCONFIG_REVERSE_SCANORDER:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case r.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=u.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(p,g,T[0],T[1]||0);case r.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=u.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(p,g,T[0],T[1],T[2]);case r.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=u.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(p,g,T[0]);default:return r.SQLITE_MISUSE}}).bind(Object.create(null)),r.sqlite3_value_to_js=function(p,g=!0){let T;const Q=r.sqlite3_value_type(p);switch(Q){case r.SQLITE_INTEGER:u.bigIntEnabled?(T=r.sqlite3_value_int64(p),w.bigIntFitsDouble(T)&&(T=Number(T))):T=r.sqlite3_value_double(p);break;case r.SQLITE_FLOAT:T=r.sqlite3_value_double(p);break;case r.SQLITE_TEXT:T=r.sqlite3_value_text(p);break;case r.SQLITE_BLOB:{const te=r.sqlite3_value_bytes(p),de=r.sqlite3_value_blob(p);te&&!de&&L.WasmAllocError.toss("Cannot allocate memory for blob argument of",te,"byte(s)"),T=te?u.heap8u().slice(Number(de),Number(de)+Number(te)):null;break}case r.SQLITE_NULL:T=null;break;default:g&&R(r.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Q),T=void 0}return T},r.sqlite3_values_to_js=function(p,g,T=!0){let Q;const te=[];for(Q=0;Q<p;++Q)te.push(r.sqlite3_value_to_js(u.peekPtr(u.ptr.add(g,u.ptr.size*Q)),T));return te},r.sqlite3_result_error_js=function(p,g){g instanceof z?r.sqlite3_result_error_nomem(p):r.sqlite3_result_error(p,""+g,-1)},r.sqlite3_result_js=function(p,g){if(g instanceof Error){r.sqlite3_result_error_js(p,g);return}try{switch(typeof g){case"undefined":break;case"boolean":r.sqlite3_result_int(p,g?1:0);break;case"bigint":w.bigIntFits32(g)?r.sqlite3_result_int(p,Number(g)):w.bigIntFitsDouble(g)?r.sqlite3_result_double(p,Number(g)):u.bigIntEnabled?w.bigIntFits64(g)?r.sqlite3_result_int64(p,g):R("BigInt value",g.toString(),"is too BigInt for int64."):R("BigInt value",g.toString(),"is too BigInt.");break;case"number":{let T;w.isInt32(g)?T=r.sqlite3_result_int:u.bigIntEnabled&&Number.isInteger(g)&&w.bigIntFits64(BigInt(g))?T=r.sqlite3_result_int64:T=r.sqlite3_result_double,T(p,g);break}case"string":{const[T,Q]=u.allocCString(g,!0);r.sqlite3_result_text(p,T,Q,r.SQLITE_WASM_DEALLOC);break}case"object":if(g===null){r.sqlite3_result_null(p);break}else if(w.isBindableTypedArray(g)){const T=u.allocFromTypedArray(g);r.sqlite3_result_blob(p,T,g.byteLength,r.SQLITE_WASM_DEALLOC);break}default:R("Don't not how to handle this UDF result value:",typeof g,g)}}catch(T){r.sqlite3_result_error_js(p,T)}},r.sqlite3_column_js=function(p,g,T=!0){const Q=r.sqlite3_column_value(p,g);return Q===0?void 0:r.sqlite3_value_to_js(Q,T)};{const p=(function(g,T,Q){Q=r[Q],this.ptr?u.pokePtr(this.ptr,0):this.ptr=u.allocPtr();const te=Q(g,T,this.ptr);if(te)return J.toss(te,arguments[2]+"() failed with code "+te);const de=u.peekPtr(this.ptr);return de?r.sqlite3_value_to_js(de,!0):void 0}).bind(Object.create(null));r.sqlite3_preupdate_new_js=(g,T)=>p(g,T,"sqlite3_preupdate_new"),r.sqlite3_preupdate_old_js=(g,T)=>p(g,T,"sqlite3_preupdate_old"),r.sqlite3changeset_new_js=(g,T)=>p(g,T,"sqlite3changeset_new"),r.sqlite3changeset_old_js=(g,T)=>p(g,T,"sqlite3changeset_old")}const L={WasmAllocError:z,SQLite3Error:J,capi:r,util:w,wasm:u,config:i,version:Object.create(null),client:void 0,asyncPostInit:(async function p(){if(p.isReady instanceof Promise)return p.isReady;let g=this.initializersAsync;delete this.initializersAsync;const T=async()=>(L.__isUnderTest||(delete L.util,delete L.StructBinder),L),Q=de=>{throw i.error("an async sqlite3 initializer failed:",de),de};if(!g||!g.length)return p.isReady=T().catch(Q);g=g.map(de=>de instanceof Function?async ve=>de(L):de),g.push(T);let te=Promise.resolve(L);for(;g.length;)te=te.then(g.shift());return p.isReady=te.catch(Q)}).bind(s),scriptInfo:void 0};typeof o<"u"&&(L.__isUnderTest=!!o);try{s.initializers.forEach(p=>{p(L)})}catch(p){throw console.error("sqlite3 bootstrap initializer threw:",p),p}if(delete s.initializers,s.sqlite3=L,typeof e<"u"&&(e.debugModule("sqlite3ApiBootstrap() complete",L),L.scriptInfo=e),L.__isUnderTest){typeof t<"u"&&(L.config.emscripten=t);const p=(N=L.scriptInfo)==null?void 0:N.instantiateWasm;p&&(L.wasm.module=p.module,L.wasm.instance=p.instance,L.wasm.imports=p.imports)}return delete globalThis.sqlite3ApiConfig,delete globalThis.sqlite3ApiBootstrap,delete s.defaultConfig,L.asyncPostInit().then(p=>(typeof e<"u"&&e.debugModule("sqlite3.asyncPostInit() complete",p),delete p.asyncPostInit,delete p.scriptInfo,delete p.emscripten,p))},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.sqlite3ApiBootstrap.initializers.push(function(s){s.version={libVersion:"3.52.0",libVersionNumber:3052e3,sourceId:"2026-01-30 06:37:34 407724c4e80efdf93d885e95b5209a100a3f470fe0298138be57201f65f9817e",downloadVersion:352e4,scm:{"sha3-256":"407724c4e80efdf93d885e95b5209a100a3f470fe0298138be57201f65f9817e",branch:"trunk",tags:"",datetime:"2026-01-30T06:37:34.096Z"}}}),globalThis.WhWasmUtilInstaller=function(n){n.bigIntEnabled===void 0&&(n.bigIntEnabled=!!globalThis.BigInt64Array);const i=(...l)=>{throw new Error(l.join(" "))};if(!n.pointerSize&&!n.pointerIR&&n.alloc&&n.dealloc){const l=n.alloc(1);n.pointerSize=typeof l=="bigint"?8:4,n.dealloc(l)}n.pointerSize&&!n.pointerIR&&(n.pointerIR=n.pointerSize===4?"i32":"i64");const r=n.pointerIR??(n.pointerIR="i32"),u=n.pointerSize??(n.pointerSize=r==="i32"?4:r==="i64"?8:0);delete n.pointerSize,delete n.pointerIR,r!=="i32"&&r!=="i64"?i("Invalid pointerIR:",r):u!==8&&u!==4&&i("Invalid pointerSize:",u);const x=n.bigIntEnabled?l=>BigInt(l||0):l=>i("BigInt support is disabled in this build."),J=u===4?l=>Number(l||0):x,R=J(0),V=function(...l){let c=J(0);for(const m of l)c+=J(m);return c};{const l=Object.create(null);Object.defineProperty(n,"ptr",{enumerable:!0,get:()=>l,set:()=>i("The ptr property is read-only.")}),function c(m,E){return Object.defineProperty(l,m,{enumerable:!0,get:()=>E,set:()=>i("ptr["+m+"] is read-only.")}),c}("null",R)("size",u)("ir",r)("coerce",J)("add",V)("addn",r===4?V:(...c)=>Number(V(...c)))}n.exports||Object.defineProperty(n,"exports",{enumerable:!0,configurable:!0,get:()=>{var l;return(l=n.instance)==null?void 0:l.exports}});const h=Object.create(null);h.heapSize=0,h.memory=null,h.freeFuncIndexes=[],h.scopedAlloc=[],h.scopedAlloc.pushPtr=l=>(h.scopedAlloc[h.scopedAlloc.length-1].push(l),l),h.utf8Decoder=new TextDecoder,h.utf8Encoder=new TextEncoder("utf-8"),n.sizeofIR=l=>{switch(l){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return u;default:return(""+l).endsWith("*")?u:void 0}};const j=function(){if(!h.memory)h.memory=n.memory instanceof WebAssembly.Memory?n.memory:n.exports.memory;else if(h.heapSize===h.memory.buffer.byteLength)return h;const l=h.memory.buffer;return h.HEAP8=new Int8Array(l),h.HEAP8U=new Uint8Array(l),h.HEAP16=new Int16Array(l),h.HEAP16U=new Uint16Array(l),h.HEAP32=new Int32Array(l),h.HEAP32U=new Uint32Array(l),h.HEAP32F=new Float32Array(l),h.HEAP64F=new Float64Array(l),n.bigIntEnabled&&(typeof BigInt64Array<"u"?(h.HEAP64=new BigInt64Array(l),h.HEAP64U=new BigUint64Array(l)):i("BigInt support is enabled, but the BigInt64Array type is missing.")),h.heapSize=l.byteLength,h};n.heap8=()=>j().HEAP8,n.heap8u=()=>j().HEAP8U,n.heap16=()=>j().HEAP16,n.heap16u=()=>j().HEAP16U,n.heap32=()=>j().HEAP32,n.heap32u=()=>j().HEAP32U,n.heapForSize=function(l,c=!0){const m=h.memory&&h.heapSize===h.memory.buffer.byteLength?h:j();switch(l){case Int8Array:return m.HEAP8;case Uint8Array:return m.HEAP8U;case Int16Array:return m.HEAP16;case Uint16Array:return m.HEAP16U;case Int32Array:return m.HEAP32;case Uint32Array:return m.HEAP32U;case 8:return c?m.HEAP8U:m.HEAP8;case 16:return c?m.HEAP16U:m.HEAP16;case 32:return c?m.HEAP32U:m.HEAP32;case 64:if(m.HEAP64)return c?m.HEAP64U:m.HEAP64;break;default:if(n.bigIntEnabled){if(l===globalThis.BigUint64Array)return m.HEAP64U;if(l===globalThis.BigInt64Array)return m.HEAP64;break}}i("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")};const C=n.functionTable;delete n.functionTable,n.functionTable=C?()=>C:()=>n.exports.__indirect_function_table,n.functionEntry=function(l){const c=n.functionTable();return l<c.length?c.get(J(l)):void 0},n.jsFuncToWasm=function l(c,m){if(l._||(l._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:r,P:r,s:r,j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:(se,le,Se)=>{Se<128?se[le](Se):se[le](Se%128|128,Se>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:se=>{const le=l._.rxJSig.exec(se);return le?le[2]:se.substr(1)},letterType:se=>l._.sigTypes[se]||i("Invalid signature letter:",se),pushSigType:(se,le)=>se.push(l._.typeCodes[l._.letterType(le)])}),typeof c=="string"){const se=m;m=c,c=se}const E=l._,B=E.sigParams(m),G=[1,96];E.uleb128Encode(G,"push",B.length);for(const se of B)E.pushSigType(G,se);return m[0]==="v"?G.push(0):(G.push(1),E.pushSigType(G,m[0])),E.uleb128Encode(G,"unshift",G.length),G.unshift(0,97,115,109,1,0,0,0,1),G.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(G)),{e:{f:c}}).exports.f};const Y=function(c,m,E){if(E&&!h.scopedAlloc.length&&i("No scopedAllocPush() scope is active."),typeof c=="string"){const le=m;m=c,c=le}(typeof m!="string"||!(c instanceof Function))&&i("Invalid arguments: expecting (function,signature) or (signature,function).");const B=n.functionTable(),G=J(B.length);let se;for(;(se=h.freeFuncIndexes.pop())&&B.get(se);){se=null;continue}se||(se=J(G),B.grow(J(1)));try{return B.set(se,c),E&&h.scopedAlloc.pushPtr(se),se}catch(le){if(!(le instanceof TypeError))throw se===G&&h.freeFuncIndexes.push(G),le}try{const le=n.jsFuncToWasm(c,m);B.set(se,le),E&&h.scopedAlloc.pushPtr(se)}catch(le){throw se===G&&h.freeFuncIndexes.push(G),le}return se};n.installFunction=(l,c)=>Y(l,c,!1),n.scopedInstallFunction=(l,c)=>Y(l,c,!0),n.uninstallFunction=function(l){if(!l&&R!==l)return;const c=n.functionTable();h.freeFuncIndexes.push(l);const m=c.get(l);return c.set(l,null),m},n.peek=function(c,m="i8"){m.endsWith("*")&&(m=r);const E=h.memory&&h.heapSize===h.memory.buffer.byteLength?h:j(),B=Array.isArray(c)?[]:void 0;let G;do{switch(B&&(c=arguments[0].shift()),m){case"i1":case"i8":G=E.HEAP8[Number(c)>>0];break;case"i16":G=E.HEAP16[Number(c)>>1];break;case"i32":G=E.HEAP32[Number(c)>>2];break;case"float":case"f32":G=E.HEAP32F[Number(c)>>2];break;case"double":case"f64":G=Number(E.HEAP64F[Number(c)>>3]);break;case"i64":if(E.HEAP64){G=x(E.HEAP64[Number(c)>>3]);break}default:i("Invalid type for peek():",m)}B&&B.push(G)}while(B&&arguments[0].length);return B||G},n.poke=function(l,c,m="i8"){m.endsWith("*")&&(m=r);const E=h.memory&&h.heapSize===h.memory.buffer.byteLength?h:j();for(const B of Array.isArray(l)?l:[l])switch(m){case"i1":case"i8":E.HEAP8[Number(B)>>0]=c;continue;case"i16":E.HEAP16[Number(B)>>1]=c;continue;case"i32":E.HEAP32[Number(B)>>2]=c;continue;case"float":case"f32":E.HEAP32F[Number(B)>>2]=c;continue;case"double":case"f64":E.HEAP64F[Number(B)>>3]=c;continue;case"i64":if(E.HEAP64){E.HEAP64[Number(B)>>3]=x(c);continue}default:i("Invalid type for poke(): "+m)}return this},n.peekPtr=(...l)=>n.peek(l.length===1?l[0]:l,r),n.pokePtr=(l,c=0)=>n.poke(l,c,r),n.peek8=(...l)=>n.peek(l.length===1?l[0]:l,"i8"),n.poke8=(l,c)=>n.poke(l,c,"i8"),n.peek16=(...l)=>n.peek(l.length===1?l[0]:l,"i16"),n.poke16=(l,c)=>n.poke(l,c,"i16"),n.peek32=(...l)=>n.peek(l.length===1?l[0]:l,"i32"),n.poke32=(l,c)=>n.poke(l,c,"i32"),n.peek64=(...l)=>n.peek(l.length===1?l[0]:l,"i64"),n.poke64=(l,c)=>n.poke(l,c,"i64"),n.peek32f=(...l)=>n.peek(l.length===1?l[0]:l,"f32"),n.poke32f=(l,c)=>n.poke(l,c,"f32"),n.peek64f=(...l)=>n.peek(l.length===1?l[0]:l,"f64"),n.poke64f=(l,c)=>n.poke(l,c,"f64"),n.getMemValue=n.peek,n.getPtrValue=n.peekPtr,n.setMemValue=n.poke,n.setPtrValue=n.pokePtr,n.isPtr32=l=>typeof l=="number"&&l>=0&&l===(l|0),n.isPtr64=l=>typeof l=="bigint"?l>=0:n.isPtr32(l),n.isPtr=u===4?n.isPtr32:n.isPtr64,n.cstrlen=function(l){if(!l||!n.isPtr(l))return null;l=Number(l);const c=j().HEAP8U;let m=l;for(;c[m]!==0;++m);return m-l};const b=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,A=l=>l.buffer instanceof b;n.isSharedTypedArray=A;const O=(l,c,m)=>(u===8&&(typeof c=="bigint"&&(c=Number(c)),typeof m=="bigint"&&(m=Number(m))),A(l)?l.slice(c,m):l.subarray(c,m));n.typedArrayPart=O;const z=(l,c,m)=>h.utf8Decoder.decode(O(l,c,m));n.typedArrayToString=z,n.cstrToJs=function(l){const c=n.cstrlen(l);return c?z(j().HEAP8U,Number(l),Number(l)+c):c===null?c:""},n.jstrlen=function(l){if(typeof l!="string")return null;const c=l.length;let m=0;for(let E=0;E<c;++E){let B=l.charCodeAt(E);B>=55296&&B<=57343&&(B=65536+((B&1023)<<10)|l.charCodeAt(++E)&1023),B<=127?++m:B<=2047?m+=2:B<=65535?m+=3:m+=4}return m},n.jstrcpy=function(l,c,m=0,E=-1,B=!0){if((!c||!(c instanceof Int8Array)&&!(c instanceof Uint8Array))&&i("jstrcpy() target must be an Int8Array or Uint8Array."),E=Number(E),m=Number(m),E<0&&(E=c.length-m),!(E>0)||!(m>=0))return 0;let G=0,se=l.length;const le=m,Se=m+E-(B?1:0);for(;G<se&&m<Se;++G){let ue=l.charCodeAt(G);if(ue>=55296&&ue<=57343&&(ue=65536+((ue&1023)<<10)|l.charCodeAt(++G)&1023),ue<=127){if(m>=Se)break;c[m++]=ue}else if(ue<=2047){if(m+1>=Se)break;c[m++]=192|ue>>6,c[m++]=128|ue&63}else if(ue<=65535){if(m+2>=Se)break;c[m++]=224|ue>>12,c[m++]=128|ue>>6&63,c[m++]=128|ue&63}else{if(m+3>=Se)break;c[m++]=240|ue>>18,c[m++]=128|ue>>12&63,c[m++]=128|ue>>6&63,c[m++]=128|ue&63}}return B&&(c[m++]=0),m-le},n.cstrncpy=function(l,c,m){if((!l||!c)&&i("cstrncpy() does not accept NULL strings."),m<0)m=n.cstrlen(strPtr)+1;else if(!(m>0))return 0;const E=n.heap8u();let B=0,G;const se=Number(l),le=Number(c);for(;B<m&&(G=E[le+B]);++B)E[se+B]=G;return B<m&&(E[se+B++]=0),B},n.jstrToUintArray=(l,c=!1)=>h.utf8Encoder.encode(c?l+"\0":l);const w=(l,c)=>{(!(l.alloc instanceof Function)||!(l.dealloc instanceof Function))&&i("Object is missing alloc() and/or dealloc() function(s)","required by",c+"().")},L=function(l,c,m,E){if(w(n,E),typeof l!="string")return null;const B=h.utf8Encoder.encode(l),G=m(B.length+1);let se=G;try{const le=j().HEAP8U;return le.set(B,Number(G)),le[V(G,B.length)]=0,se=R,c?[G,B.length]:G}finally{se&&n.dealloc(se)}};n.allocCString=(l,c=!1)=>L(l,c,n.alloc,"allocCString()"),n.scopedAllocPush=function(){w(n,"scopedAllocPush");const l=[];return h.scopedAlloc.push(l),l},n.scopedAllocPop=function(l){w(n,"scopedAllocPop");const c=arguments.length?h.scopedAlloc.indexOf(l):h.scopedAlloc.length-1;c<0&&i("Invalid state object for scopedAllocPop()."),arguments.length===0&&(l=h.scopedAlloc[c]),h.scopedAlloc.splice(c,1);for(let m;m=l.pop();)n.functionEntry(m)?n.uninstallFunction(m):n.dealloc(m)},n.scopedAlloc=function(l){h.scopedAlloc.length||i("No scopedAllocPush() scope is active.");const c=J(n.alloc(l));return h.scopedAlloc.pushPtr(c)},Object.defineProperty(n.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>h.scopedAlloc.length,set:()=>i("The 'active' property is read-only.")}),n.scopedAllocCString=(l,c=!1)=>L(l,c,n.scopedAlloc,"scopedAllocCString()");const N=function(l,c){const m=n[l?"scopedAlloc":"alloc"]((c.length+1)*n.ptr.size);let E=0;return c.forEach(B=>{n.pokePtr(V(m,n.ptr.size*E++),n[l?"scopedAllocCString":"allocCString"](""+B))}),n.pokePtr(V(m,n.ptr.size*E),0),m};n.scopedAllocMainArgv=l=>N(!0,l),n.allocMainArgv=l=>N(!1,l),n.cArgvToJs=(l,c)=>{const m=[];for(let E=0;E<l;++E){const B=n.peekPtr(V(c,n.ptr.size*E));m.push(B?n.cstrToJs(B):null)}return m},n.scopedAllocCall=function(l){n.scopedAllocPush();try{return l()}finally{n.scopedAllocPop()}};const p=function(l,c,m){w(n,m);const E=c?"i64":r;let B=n[m](l*(c?8:u));if(n.poke(B,0,E),l===1)return B;const G=[B];for(let se=1;se<l;++se)B=V(B,c?8:u),G[se]=B,n.poke(B,0,E);return G};n.allocPtr=(l=1,c=!0)=>p(l,c,"alloc"),n.scopedAllocPtr=(l=1,c=!0)=>p(l,c,"scopedAlloc"),n.xGet=function(l){return n.exports[l]||i("Cannot find exported symbol:",l)};const g=(l,c)=>i(l+"() requires",c,"argument(s).");n.xCall=function(l,...c){const m=l instanceof Function?l:n.xGet(l);return m instanceof Function||i("Exported symbol",l,"is not a function."),m.length!==c.length&&g(m===l?m.name:l,m.length),arguments.length===2&&Array.isArray(arguments[1])?m.apply(null,arguments[1]):m.apply(null,c)},h.xWrap=Object.create(null),h.xWrap.convert=Object.create(null),h.xWrap.convert.arg=new Map,h.xWrap.convert.result=new Map;const T=h.xWrap.convert.arg,Q=h.xWrap.convert.result,te=J;T.set("i64",x).set("i32",l=>l|0).set("i16",l=>(l|0)&65535).set("i8",l=>(l|0)&255).set("f32",l=>Number(l).valueOf()).set("float",T.get("f32")).set("f64",T.get("f32")).set("double",T.get("f64")).set("int",T.get("i32")).set("null",l=>l).set(null,T.get("null")).set("**",te).set("*",te),Q.set("*",te).set("pointer",te).set("number",l=>Number(l)).set("void",l=>{}).set(void 0,Q.get("void")).set("null",l=>l).set(null,Q.get("null"));for(const l of["i8","i16","i32","i64","int","f32","float","f64","double"])T.set(l+"*",te),Q.set(l+"*",te),Q.set(l,T.get(l)||i("Maintenance required: missing arg converter for",l));const de=l=>typeof l=="string"?n.scopedAllocCString(l):J(l);T.set("string",de).set("utf8",de),Q.set("string",l=>n.cstrToJs(l)).set("utf8",Q.get("string")).set("string:dealloc",l=>{try{return l?n.cstrToJs(l):null}finally{n.dealloc(l)}}).set("utf8:dealloc",Q.get("string:dealloc")).set("json",l=>JSON.parse(n.cstrToJs(l))).set("json:dealloc",l=>{try{return l?JSON.parse(n.cstrToJs(l)):null}finally{n.dealloc(l)}});const ve=class{constructor(l){this.name=l.name||"unnamed adapter"}convertArg(l,c,m){i("AbstractArgAdapter must be subclassed.")}};T.FuncPtrAdapter=class tt extends ve{constructor(c){super(c),T.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",c),this.name=c.name||"unnamed",this.signature=c.signature,c.contextKey instanceof Function&&(this.contextKey=c.contextKey,c.bindScope||(c.bindScope="context")),this.bindScope=c.bindScope||i("FuncPtrAdapter options requires a bindScope (explicit or implied)."),tt.bindScopes.indexOf(c.bindScope)<0&&i("Invalid options.bindScope ("+c.bindMod+") for FuncPtrAdapter. Expecting one of: ("+tt.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=c.callProxy instanceof Function?c.callProxy:void 0}contextKey(c,m){return this}contextMap(c){const m=this.__cmap||(this.__cmap=new Map);let E=m.get(c);return E===void 0&&m.set(c,E=[]),E}convertArg(c,m,E){let B=this.singleton;if(!B&&this.isContext&&(B=this.contextMap(this.contextKey(m,E))),B&&B.length===2&&B[0]===c)return B[1];if(c instanceof Function){this.callProxy&&(c=this.callProxy(c));const G=Y(c,this.signature,this.isTransient);if(tt.debugFuncInstall&&tt.debugOut("FuncPtrAdapter installed",this,this.contextKey(m,E),"@"+G,c),B){if(B[1]){tt.debugFuncInstall&&tt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(m,E),"@"+B[1],c);try{h.scopedAlloc.pushPtr(B[1])}catch{}}B[0]=arguments[0]||R,B[1]=G}return G}else if(n.isPtr(c)||c===null||c===void 0){if(B&&B[1]&&B[1]!==c){tt.debugFuncInstall&&tt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(m,E),"@"+B[1],c);try{h.scopedAlloc.pushPtr(B[1])}catch{}B[0]=B[1]=c||R}return c||R}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},T.FuncPtrAdapter.warnOnUse=!1,T.FuncPtrAdapter.debugFuncInstall=!1,T.FuncPtrAdapter.debugOut=console.debug.bind(console),T.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const ge=l=>T.get(l)||i("Argument adapter not found:",l),me=l=>Q.get(l)||i("Result adapter not found:",l);h.xWrap.convertArg=(l,...c)=>ge(l)(...c),h.xWrap.convertArgNoCheck=(l,...c)=>T.get(l)(...c),h.xWrap.convertResult=(l,c)=>l===null?c:l?me(l)(c):void 0,h.xWrap.convertResultNoCheck=(l,c)=>l===null?c:l?Q.get(l)(c):void 0,n.xWrap=function l(c,m,...E){arguments.length===3&&Array.isArray(arguments[2])&&(E=arguments[2]),n.isPtr(c)&&(c=n.functionEntry(c)||i("Function pointer not found in WASM function table."));const B=c instanceof Function,G=B?c:n.xGet(c);if(B&&(c=G.name||"unnamed function"),E.length!==G.length&&g(c,G.length),G.length===0&&(m===null||m==="null"))return G;me(m);for(const le of E)le instanceof ve?T.set(le,(...Se)=>le.convertArg(...Se)):ge(le);const se=h.xWrap;return G.length===0?(...le)=>le.length?g(c,G.length):se.convertResult(m,G.call(null)):function(...le){le.length!==G.length&&g(c,G.length);const Se=n.scopedAllocPush();try{let ue=0;for(l.debug&&console.debug("xWrap() preparing: resultType ",m,"xf",G,"argTypes",E,"args",le);ue<le.length;++ue)le[ue]=se.convertArgNoCheck(E[ue],le[ue],le,ue);return l.debug&&console.debug("xWrap() calling: resultType ",m,"xf",G,"argTypes",E,"args",le),se.convertResultNoCheck(m,G.apply(null,le))}finally{n.scopedAllocPop(Se)}}};const d=function(l,c,m,E,B,G){if(typeof m=="string"){if(c===1)return G.get(m);if(c===2){if(E)E instanceof Function||i(B,"requires a function argument.");else return G.delete(m),l;return G.set(m,E),l}}i("Invalid arguments to",B)};return n.xWrap.resultAdapter=function l(c,m){return d(l,arguments.length,c,m,"resultAdapter()",Q)},n.xWrap.argAdapter=function l(c,m){return d(l,arguments.length,c,m,"argAdapter()",T)},n.xWrap.FuncPtrAdapter=T.FuncPtrAdapter,n.xCallWrapped=function(l,c,m,...E){return Array.isArray(arguments[3])&&(E=arguments[3]),n.xWrap(l,c,m||[]).apply(null,E||[])},n.xWrap.testConvertArg=h.xWrap.convertArg,n.xWrap.testConvertResult=h.xWrap.convertResult,n},globalThis.WhWasmUtilInstaller.yawl=(function(n){const i=()=>fetch(n.uri,{credentials:"same-origin"}),r=this,u=function(x){var S,J;if(n.wasmUtilTarget){const R=(...h)=>{throw new Error(h.join(" "))},V=n.wasmUtilTarget;if(V.module=x.module,V.instance=x.instance,V.instance.exports.memory||(V.memory=((J=(S=n==null?void 0:n.imports)==null?void 0:S.env)==null?void 0:J.memory)||R("Missing 'memory' object!")),!V.alloc&&x.instance.exports.malloc){const h=x.instance.exports;V.alloc=function(j){return h.malloc(j)||R("Allocation of",j,"bytes failed.")},V.dealloc=function(j){j&&h.free(j)}}r(V)}return x.config=n,n.onload&&n.onload(x),x};return WebAssembly.instantiateStreaming?()=>WebAssembly.instantiateStreaming(i(),n.imports||{}).then(u):()=>i().then(x=>x.arrayBuffer()).then(x=>WebAssembly.instantiate(x,n.imports||{})).then(u)}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function s(n){const i=(...q)=>{throw new Error(q.join(" "))};{let q=n.heap;q instanceof WebAssembly.Memory?q=(function(){return new Uint8Array(this.buffer)}).bind(q):q instanceof Function||i("config.heap must be WebAssembly.Memory instance or","a function which returns one."),n.heap=q}["alloc","dealloc"].forEach(function(q){n[q]instanceof Function||i("Config option '"+q+"' must be a function.")});const r=s,u=n.heap,x=n.alloc,S=n.dealloc;n.realloc;const J=n.log||console.debug.bind(console),R=n.memberPrefix||"",V=n.memberSuffix||"",h=globalThis.BigInt,j=globalThis.BigInt64Array,C=n.bigIntEnabled??!!j;let Y;const b=n.pointerSize||n.ptrSize||(typeof(Y=x(1))=="bigint"?8:4),A=n.pointerIR||n.ptrIR||(b===4?"i32":"i64");Y&&(S(Y),Y=void 0),b!==4&&b!==8&&i("Invalid pointer size:",b),A!=="i32"&&A!=="i64"&&i("Invalid pointer representation:",A);const O=C&&h?q=>h(q||0):q=>i("BigInt support is disabled in this build."),z=A=="i32"?Number:O,w=z(0),L=function(...q){let U=w;for(let H=0;H<q.length;++H)U+=z(q[H]);return U},N=function(...q){return L(this.pointer,...q)};r.debugFlags||(r.__makeDebugFlags=function(q=null){q&&q.__flags&&(q=q.__flags);const U=function H(ie){return arguments.length===0?H.__flags:(ie<0?(delete H.__flags.getter,delete H.__flags.setter,delete H.__flags.alloc,delete H.__flags.dealloc):(H.__flags.getter=(1&ie)!==0,H.__flags.setter=(2&ie)!==0,H.__flags.alloc=(4&ie)!==0,H.__flags.dealloc=(8&ie)!==0),H._flags)};return Object.defineProperty(U,"__flags",{iterable:!1,writable:!1,value:Object.create(q)}),q||U(0),U},r.debugFlags=r.__makeDebugFlags());const p=!0,g=q=>q[1]==="(",T=q=>q==="p"||q==="P"||q==="s",Q=q=>q==="P",te=q=>q?g(q)?"p":q[0]:void 0,de=function(q){switch(te(q)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return A;case"j":return"i64";case"f":return"float";case"d":return"double"}i("Unhandled signature IR:",q)},ve=function(q){switch(te(q)){case"c":case"C":return 1;case"i":return 4;case"p":case"P":case"s":return b;case"j":return 8;case"f":return 4;case"d":return 8}i("Unhandled signature sizeof:",q)},ge=j?()=>!0:()=>i("BigInt64Array is not available."),me=function(q){switch(te(q)){case"p":case"P":case"s":switch(b){case 4:return"getInt32";case 8:return ge()&&"getBigInt64"}break;case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return ge()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}i("Unhandled DataView getter for signature:",q)},d=function(q){switch(te(q)){case"p":case"P":case"s":switch(b){case 4:return"setInt32";case 8:return ge()&&"setBigInt64"}break;case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return ge()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}i("Unhandled DataView setter for signature:",q)},l=function(q){switch(te(q)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return O;case"p":case"P":case"s":switch(b){case 4:return Number;case 8:return O}break}i("Unhandled DataView set wrapper for signature:",q)},c=(q,U)=>q+"::"+U,m=function(q,U){return()=>i(c(q,U),"is read-only.")},E=function q(U,H=!0){let ie=q.map.get(U);return!ie&&H&&q.map.set(U,ie=q.create(U)),ie};E.map=new WeakMap,E.create=q=>Object.assign(Object.create(null),{o:q,p:void 0,ownsPointer:!1,zod:!1,xb:0});const B=q=>E.map.delete(q),G=q=>typeof q=="number"&&q===(q|0)&&q>=0,le=b===4?G:q=>typeof q=="bigint"&&q>=0||G(q),Se=q=>le(q)&&q>0,ue=function(q,U,H){const ie=E(U,!1);if(ie){if(B(U),!H&&!(H=ie.p)){console.warn("Cannot(?) happen: __freeStruct() found no instanceInfo");return}if(Array.isArray(U.ondispose)){let ce;for(;ce=U.ondispose.pop();)try{ce instanceof Function?ce.call(U):ce instanceof Ee?ce.dispose():le(ce)&&S(ce)}catch(Fe){console.warn("ondispose() for",q.structName,"@",H,"threw. NOT propagating it.",Fe)}}else if(U.ondispose instanceof Function)try{U.ondispose()}catch(ce){console.warn("ondispose() for",q.structName,"@",H,"threw. NOT propagating it.",ce)}delete U.ondispose,q.debugFlags.__flags.dealloc&&J("debug.dealloc:",ie.ownsPointer?"":"EXTERNAL",q.structName,"instance:",q.structInfo.sizeof,"bytes @"+H),ie.ownsPointer&&((ie.zod||q.structInfo.zeroOnDispose)&&u().fill(0,Number(H),Number(H)+q.structInfo.sizeof+ie.xb),S(H))}},ke=()=>({configurable:!1,writable:!1,iterable:!1}),ye=q=>({...ke(),value:q}),F=function(U,H,ie){let ce;const Fe=Pe=>{Se(Pe)||i("Invalid pointer value",arguments[0],"for",U.structName,"constructor.")};arguments.length>=3?ie&&typeof ie=="object"?(ce=ie,ie=ce==null?void 0:ce.wrap):(Fe(ie),ce={wrap:ie}):ce={};const ze=!ie;let Ve=0,Ge=!1;if(ie)Fe(ie),Ge=!!(ce!=null&&ce.takeOwnership);else{const Pe=(ce==null?void 0:ce.extraBytes)??0;(Pe<0||Pe!==(Pe|0))&&i("Invalid extraBytes value:",ce==null?void 0:ce.extraBytes),Ve=U.structInfo.sizeof+Pe,ie=x(Ve)||i("Allocation of",U.structName,"structure failed."),Ge=!0}try{ce!=null&&ce.debugFlags&&H.debugFlags(ce.debugFlags),U.debugFlags.__flags.alloc&&J("debug.alloc:",ze?"":"EXTERNAL",U.structName,"instance:",U.structInfo.sizeof,"bytes @"+ie),ze&&u().fill(0,Number(ie),Number(ie)+Ve);const Pe=E(H);Pe.p=ie,Pe.ownsPointer=Ge,Pe.xb=Ve?Ve-U.structInfo.sizeof:0,Pe.zod=!!(ce!=null&&ce.zeroOnDispose),ce!=null&&ce.ondispose&&ce.ondispose!==ie&&H.addOnDispose(ce.ondispose)}catch(Pe){throw ue(U,H,ie),Pe}},W=function q(U){return q.rxSig1??(q.rxSig1=/^[ipPsjfdcC]$/),q.rxSig2??(q.rxSig2=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/),q.rxSig1.test(U)||q.rxSig2.test(U)},$=(function(q){let U=this.get(q);return U||(U=[Object.create(null),Object.create(null),Object.create(null)],this.set(q,U)),U}).bind(new WeakMap),ee=function(q,U,H,ie){const ce=$(q)[U];return arguments.length===3?ce[H]:ie?ce[H]=ie:delete ce[H]},X=function(q,...U){return ee(this,0,q,...U)},fe=function(q,U){W(U)&&i(q,"(",U,") collides with a data type signature.")},Ie=function(q,...U){return fe("Setter adaptor",q),ee(this,1,q,...U)},ne=function(q,...U){return fe("Struct adaptor",q),ee(this,2,q,...U)},re=function(q,U){const H=typeof U=="string"?ee(q,2,U):U;return typeof H!="object"&&i("Invalid struct mapping object. Arg =",U,JSON.stringify(H)),H},M=ye(q=>R+q+V),K=function(q,U,H=!0){let ie=q.members[U];if(!ie&&(R||V)){for(const ce of Object.values(q.members))if(ce.key===U){ie=ce;break}!ie&&H&&i(c(q.name||q.structName,U),"is not a mapped struct member.")}return ie},f=function q(U,H,ie=!1){q._||(q._=Fe=>Fe.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const ce=K(U.structInfo,H,!0);return ie?q._(ce.signature):ce.signature},y=ye(function(){const q=[];for(const U of Object.keys(this.structInfo.members))q.push(this.memberKey(U));return q}),P=new TextDecoder("utf-8"),D=new TextEncoder,Z=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,oe=function(q,U,H){return b===8&&(U=Number(U),H=Number(H)),P.decode(q.buffer instanceof Z?q.slice(U,H):q.subarray(U,H))},he=function(q,U,H=!1){const ie=K(q.structInfo,U,H);return ie&&ie.signature.length===1&&ie.signature[0]==="s"?ie:!1},_e=function(q){q.signature!=="s"&&i("Invalid member type signature for C-string value:",JSON.stringify(q))},pe=function(U,H){const ie=K(U.structInfo,H,!0);_e(ie);const ce=U[ie.key];if(!ce)return null;let Fe=ce;const ze=u();for(;ze[Fe]!==0;++Fe);return ce===Fe?"":oe(ze,ce,Fe)},qe=function(q,...U){q.ondispose?Array.isArray(q.ondispose)||(q.ondispose=[q.ondispose]):q.ondispose=[],q.ondispose.push(...U)},Oe=function(q){const U=D.encode(q),H=x(U.length+1);H||i("Allocation error while duplicating string:",q);const ie=u();return ie.set(U,Number(H)),ie[L(H,U.length)]=0,H},Ne=function(q,U,H){const ie=K(q.structInfo,U,!0);_e(ie);const ce=Oe(H);return q[ie.key]=ce,qe(q,ce),q},Ee=function(U,H){arguments[2]!==ye&&i("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:ye(U),structInfo:ye(H)})};Ee.prototype=Object.create(null,{dispose:ye(function(){ue(this.constructor,this)}),lookupMember:ye(function(q,U=!0){return K(this.structInfo,q,U)}),memberToJsString:ye(function(q){return pe(this,q)}),memberIsString:ye(function(q,U=!0){return he(this,q,U)}),memberKey:M,memberKeys:y,memberSignature:ye(function(q,U=!1){return f(this,q,U)}),memoryDump:ye(function(){const q=this.pointer;return q?new Uint8Array(u().slice(Number(q),Number(q)+this.structInfo.sizeof)):null}),extraBytes:{configurable:!1,enumerable:!1,get:function(){var q;return((q=E(this,!1))==null?void 0:q.xb)??0}},zeroOnDispose:{configurable:!1,enumerable:!1,get:function(){var q;return((q=E(this,!1))==null?void 0:q.zod)??!!this.structInfo.zeroOnDispose}},pointer:{configurable:!1,enumerable:!1,get:function(){var q;return(q=E(this,!1))==null?void 0:q.p},set:()=>i("Cannot assign the 'pointer' property of a struct.")},setMemberCString:ye(function(q,U){return Ne(this,q,U)})}),Object.assign(Ee.prototype,{addOnDispose:function(...q){return qe(this,...q),this}}),Object.defineProperties(Ee,{allocCString:ye(Oe),isA:ye(q=>q instanceof Ee),hasExternalPointer:ye(q=>{const U=E(q,!1);return!!(U!=null&&U.p&&!(U!=null&&U.ownsPointer))}),memberKey:M});const je=function(q){return q.get||(q.adaptGet?Qe.adaptGet(q.adaptGet):void 0)},Ke=function(q){return q.set||(q.adaptSet?Qe.adaptSet(q.adaptSet):void 0)},it=function q(U,H,ie){const ce=q.innerStructs??(q.innerStructs=new Map),Fe=U.memberKey(H);ie.signature!==void 0&&i("'signature' cannot be used on an embedded struct (",U.structName,".",Fe,")."),Ke(ie)&&i("'set' and 'adaptSet' are not permitted for nested struct members."),ie.structName??(ie.structName=U.structName+"::"+H),ie.key=Fe,ie.name=H,ie.constructor=this.call(this,ie.structName,ie);const ze=je(ie),Ve=Object.assign(Object.create(null),{configurable:!1,enumerable:!1,set:m(U.structName,Fe),get:function(){const Ge=this.debugFlags.__flags,Pe=this.pointer,Be=Pe+"."+Fe;let be=ce.get(Be);return Ge.getter&&J("debug.getter: k =",Be),be||(be=new ie.constructor(L(Pe,ie.offset)),ce.set(Be,be),this.addOnDispose(()=>be.dispose()),be.addOnDispose(()=>ce.delete(Be))),ze&&(be=ze.apply(this,[be,Fe])),Ge.getter&&J("debug.getter: result =",be),be}});Object.defineProperty(U.prototype,Fe,Ve)},wt=function q(U,H,ie){if(ie=re(this,ie),ie.members)return it.call(this,U,H,ie);if(!q.cache){q.cache={getters:{},setters:{},sw:{}};const Be=["i","c","C","p","P","s","f","d","v()"];C&&Be.push("j"),Be.forEach(function(be){q.cache.getters[be]=me(be),q.cache.setters[be]=d(be),q.cache.sw[be]=l(be)}),q.sigCheck=function(be,Me,Pt,_n){Object.prototype.hasOwnProperty.call(be,Pt)&&i(be.structName,"already has a property named",Pt+"."),W(_n)||i("Malformed signature for",c(be.structName,Me)+":",_n)}}const ce=U.memberKey(H);q.sigCheck(U.prototype,H,ce,ie.signature),ie.key=ce,ie.name=H;const Fe=te(ie.signature),ze=c(U.structName,ce),Ve=U.debugFlags.__flags,Ge=je(ie),Pe=Object.create(null);if(Pe.configurable=!1,Pe.enumerable=!1,Pe.get=function(){Ve.getter&&J("debug.getter:",q.cache.getters[Fe],"for",de(Fe),ze,"@",this.pointer,"+",ie.offset,"sz",ie.sizeof);let Be=new DataView(u().buffer,Number(this.pointer)+ie.offset,ie.sizeof)[q.cache.getters[Fe]](0,p);return Ge&&(Be=Ge.apply(this,[ce,Be])),Ve.getter&&J("debug.getter:",ze,"result =",Be),Be},ie.readOnly)Pe.set=m(U.prototype.structName,ce);else{const Be=Ke(ie);Pe.set=function(be){Ve.setter&&J("debug.setter:",q.cache.setters[Fe],"for",de(Fe),ze,"@",this.pointer,"+",ie.offset,"sz",ie.sizeof,be),this.pointer||i("Cannot set native property on a disposed",this.structName,"instance."),Be&&(be=Be.apply(this,[ce,be])),be==null?be=w:T(ie.signature)&&!le(be)&&(Q(ie.signature)&&be instanceof Ee?(be=be.pointer||w,Ve.setter&&J("debug.setter:",ze,"resolved to",be)):i("Invalid value for pointer-type",ze+".")),new DataView(u().buffer,Number(this.pointer)+ie.offset,ie.sizeof)[q.cache.setters[Fe]](0,q.cache.sw[Fe](be),p)}}Object.defineProperty(U.prototype,ce,Pe)},pt=function q(U,H,ie=Object.create(null)){const ce=function be(Me){this instanceof be||i("The",U,"constructor may only be called via 'new'."),F(be,this,...arguments)},Fe=this,ze=be=>typeof be=="string"&&W(be)?{signature:be}:re(Fe,be);arguments.length===1?(H=ze(U),U=H.structName||H.name):arguments.length===2?(H=ze(H),H.name??(H.name=U)):H=ze(H),U??(U=H.structName),U??(U=ie.structName),U||i("One of 'name' or 'structName' are required."),H.adapt&&(Object.keys(H.adapt.struct||{}).forEach(be=>{ne.call(q,be,H.adapt.struct[be])}),Object.keys(H.adapt.set||{}).forEach(be=>{Ie.call(q,be,H.adapt.set[be])}),Object.keys(H.adapt.get||{}).forEach(be=>{X.call(q,be,H.adapt.get[be])})),!H.members&&!H.sizeof&&(H.sizeof=ve(H.signature));const Ve=ye(r.__makeDebugFlags(Qe.debugFlags));Object.defineProperties(ce,{debugFlags:Ve,isA:ye(be=>be instanceof ce),memberKey:M,memberKeys:y,structInfo:ye(H),structName:ye(U),ptrAdd:ye(L)}),ce.prototype=new Ee(U,H,ye),Object.defineProperties(ce.prototype,{debugFlags:Ve,constructor:ye(ce),ptrAdd:ye(N)});let Ge=!1,Pe=0;const Be=!!H.autoCalcSizeOffset;return Be||H.sizeof||i(U,"description is missing its sizeof property."),H.offset??(H.offset=0),Object.keys(H.members||{}).forEach(be=>{let Me=ze(H.members[be]);!Me.members&&!Me.sizeof&&(Me.sizeof=ve(Me.signature),Me.sizeof||i(c(U,be),"is missing a sizeof property.",Me)),Me.offset===void 0&&(Be?Me.offset=Pe:i(c(U,be),"is missing its offset.",JSON.stringify(Me))),H.members[be]=Me,(!Ge||Ge.offset<Me.offset)&&(Ge=Me);const Pt=!!Me.autoCalc;Be&&(Me.autoCalcSizeOffset=!0),wt.call(Fe,ce,be,Me),Pt?Me.autoCalcSizeOffset=!0:delete Me.autoCalcSizeOffset,Pe+=Me.sizeof}),Ge||i("No member property descriptions found."),H.sizeof||(H.sizeof=Pe),H.sizeof===1?H.signature==="c"||H.signature==="C"||i("Unexpected sizeof==1 member",c(U,k),"with signature",H.signature):(H.sizeof%4!==0&&(console.warn("Invalid struct member description",H),i(U,"sizeof is not aligned. sizeof="+H.sizeof)),H.offset%4!==0&&(console.warn("Invalid struct member description",H),i(U,"offset is not aligned. offset="+H.offset))),H.sizeof<Pe&&(console.warn("Suspect struct description:",H,"offset =",Pe),i("Mismatch in the calculated vs. the provided sizeof/offset info.","Expected sizeof",Pe,"but got",H.sizeof,"for",H)),delete H.autoCalcSizeOffset,ce},Qe=function q(U,H){return arguments.length==1?pt.call(q,U):pt.call(q,U,H)};return Qe.StructType=Ee,Qe.config=n,Qe.allocCString=Oe,Qe.adaptGet=X,Qe.adaptSet=Ie,Qe.adaptStruct=ne,Qe.ptrAdd=L,Qe.debugFlags||(Qe.debugFlags=r.__makeDebugFlags(r.debugFlags)),Qe},globalThis.sqlite3ApiBootstrap.initializers.push(function(s){const n=(...b)=>{throw new Error(b.join(" "))},i=s.capi,r=s.wasm,u=s.util;globalThis.WhWasmUtilInstaller(r),delete globalThis.WhWasmUtilInstaller;const x={core:[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(b,A)=>b[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:b=>b[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new r.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:b=>{let A;return(O,z,w,L)=>{try{const N=r.cArgvToJs(z,w);return A||(A=r.cArgvToJs(z,L)),b(N,A)|0}catch(N){return N.resultCode||i.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_next_stmt","sqlite3_stmt*",["sqlite3*","sqlite3_stmt*"]],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:b=>b[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_set_errmsg","int","sqlite3*","int","string"],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(b,A)=>b[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],int64:[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_db_status64","int","sqlite3*","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook::callback",signature:"v(pippj)",contextKey:b=>b[0],callProxy:b=>(A,O,z,w,L)=>{b(A,O,r.cstrToJs(z),r.cstrToJs(w),L)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],wasmInternal:[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]]};if(r.exports.sqlite3_progress_handler&&x.core.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(b,A)=>b[0]}),"*"]]),r.exports.sqlite3_stmt_explain&&x.core.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),r.exports.sqlite3_set_authorizer&&x.core.push(["sqlite3_set_authorizer","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(b,A)=>b[0],callProxy:b=>(A,O,z,w,L,N)=>{try{return z=z&&r.cstrToJs(z),w=w&&r.cstrToJs(w),L=L&&r.cstrToJs(L),N=N&&r.cstrToJs(N),b(A,O,z,w,L,N)|0}catch(p){return p.resultCode||i.SQLITE_ERROR}}}),"*"]]),r.exports.sqlite3_column_origin_name&&x.core.push(["sqlite3_column_database_name","string","sqlite3_stmt*","int"],["sqlite3_column_origin_name","string","sqlite3_stmt*","int"],["sqlite3_column_table_name","string","sqlite3_stmt*","int"]),r.bigIntEnabled&&r.exports.sqlite3_declare_vtab&&x.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),r.bigIntEnabled&&r.exports.sqlite3_preupdate_hook&&x.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:b=>b[0],callProxy:b=>(A,O,z,w,L,N,p)=>{b(A,O,z,r.cstrToJs(w),r.cstrToJs(L),N,p)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),r.bigIntEnabled&&r.exports.sqlite3changegroup_add&&r.exports.sqlite3session_create&&r.exports.sqlite3_preupdate_hook){const b={signature:"i(ps)",callProxy:A=>(O,z)=>{try{return A(O,r.cstrToJs(z))|0}catch(w){return w.resultCode||i.SQLITE_ERROR}}};x.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v3","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",signature:"i(pp)",bindScope:"transient"}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v3_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",signature:"i(pp)",bindScope:"transient"}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xFilter",...b,contextKey:(A,O)=>A[0]}),"*"]])}s.StructBinder=globalThis.Jaccwabyt({heap:r.heap8u,alloc:r.alloc,dealloc:r.dealloc,bigIntEnabled:r.bigIntEnabled,pointerIR:r.ptr.ir,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const b=r.xWrap.argAdapter("string");r.xWrap.argAdapter("string:flexible",w=>b(u.flexibleString(w))),r.xWrap.argAdapter("string:static",(function(w){return r.isPtr(w)?w:(w=""+w,this[w]||(this[w]=r.allocCString(w)))}).bind(Object.create(null)));const A=r.xWrap.argAdapter("*"),O=function(){};r.xWrap.argAdapter("sqlite3_filename",A)("sqlite3_context*",A)("sqlite3_value*",A)("void*",A)("sqlite3_changegroup*",A)("sqlite3_changeset_iter*",A)("sqlite3_session*",A)("sqlite3_stmt*",w=>{var L;return A(w instanceof(((L=s==null?void 0:s.oo1)==null?void 0:L.Stmt)||O)?w.pointer:w)})("sqlite3*",w=>{var L;return A(w instanceof(((L=s==null?void 0:s.oo1)==null?void 0:L.DB)||O)?w.pointer:w)})("sqlite3_vfs*",w=>typeof w=="string"?i.sqlite3_vfs_find(w)||s.SQLite3Error.toss(i.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",w):A(w instanceof(i.sqlite3_vfs||O)?w.pointer:w)),r.exports.sqlite3_declare_vtab&&r.xWrap.argAdapter("sqlite3_index_info*",w=>A(w instanceof(i.sqlite3_index_info||O)?w.pointer:w))("sqlite3_module*",w=>A(w instanceof(i.sqlite3_module||O)?w.pointer:w));const z=r.xWrap.resultAdapter("*");r.xWrap.resultAdapter("sqlite3*",z)("sqlite3_context*",z)("sqlite3_stmt*",z)("sqlite3_value*",z)("sqlite3_vfs*",z)("void*",z);for(const w of x.core)i[w[0]]=r.xWrap.apply(null,w);for(const w of x.wasmInternal)u[w[0]]=r.xWrap.apply(null,w);for(const w of x.int64)i[w[0]]=r.bigIntEnabled?r.xWrap.apply(null,w):()=>n(w[0]+"() is unavailable due to lack","of BigInt support in this build.");delete x.core,delete x.int64,delete x.wasmInternal,u.sqlite3__wasm_db_error=function(w,L,N){return w?(L instanceof s.WasmAllocError?(L=i.SQLITE_NOMEM,N=0):L instanceof Error&&(N=N||""+L,L=L.resultCode||i.SQLITE_ERROR),i.sqlite3_set_errmsg(w,L,N)||L):i.SQLITE_MISUSE}}{const b=r.xCall("sqlite3__wasm_enum_json");b||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),r.ctype=JSON.parse(r.cstrToJs(b));const A=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];r.bigIntEnabled&&A.push("serialize","session","vtab");for(const w of A)for(const L of Object.entries(r.ctype[w]))i[L[0]]=L[1];r.functionEntry(i.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+i.SQLITE_WASM_DEALLOC+").");const O=Object.create(null);for(const w of Object.entries(r.ctype.resultCodes))O[w[1]]=w[0];i.sqlite3_js_rc_str=w=>O[w];const z=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_index_info:!r.bigIntEnabled,sqlite3_index_constraint:!r.bigIntEnabled,sqlite3_index_orderby:!r.bigIntEnabled,sqlite3_index_constraint_usage:!r.bigIntEnabled});for(const w of r.ctype.structs)z[w.name]||(i[w.name]=s.StructBinder(w));if(i.sqlite3_index_info){for(const w of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])i.sqlite3_index_info[w]=i[w],delete i[w];i.sqlite3_vtab_config=r.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const S=(b,A,O)=>u.sqlite3__wasm_db_error(b,i.SQLITE_MISUSE,A+"() requires "+O+" argument"+(O===1?"":"s")+"."),J=b=>u.sqlite3__wasm_db_error(b,i.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),R=b=>r.xWrap.argAdapter("sqlite3*")(b),V=b=>r.isPtr(b)?r.cstrToJs(b):b,h=(function(b,A){b=R(b);let O=this.dbMap.get(b);if(A)!O&&A>0&&this.dbMap.set(b,O=Object.create(null));else return this.dbMap.delete(b),O;return O}).bind(Object.assign(Object.create(null),{dbMap:new Map}));h.addCollation=function(b,A){const O=h(b,1);O.collation||(O.collation=new Set),O.collation.add(V(A).toLowerCase())},h._addUDF=function(b,A,O,z){A=V(A).toLowerCase();let w=z.get(A);w||z.set(A,w=new Set),w.add(O<0?-1:O)},h.addFunction=function(b,A,O){const z=h(b,1);z.udf||(z.udf=new Map),this._addUDF(b,A,O,z.udf)},r.exports.sqlite3_create_window_function&&(h.addWindowFunc=function(b,A,O){const z=h(b,1);z.wudf||(z.wudf=new Map),this._addUDF(b,A,O,z.wudf)}),h.cleanup=function(b){b=R(b);for(const z of[["sqlite3_busy_handler",3],["sqlite3_commit_hook",3],["sqlite3_preupdate_hook",3],["sqlite3_progress_handler",4],["sqlite3_rollback_hook",3],["sqlite3_set_authorizer",3],["sqlite3_trace_v2",4],["sqlite3_update_hook",3]]){const[w,L]=z;if(!r.exports[w])continue;const N=[b];N.length=L;try{i[w](...N)}catch(p){s.config.warn("close-time call of",w+"(",N,") threw:",p)}}const A=h(b,0);if(!A)return;if(A.collation){for(const z of A.collation)try{i.sqlite3_create_collation_v2(b,z,i.SQLITE_UTF8,0,0,0)}catch{}delete A.collation}let O;for(O=0;O<2;++O){const z=O?A.wudf:A.udf;if(!z)continue;const w=O?i.sqlite3_create_window_function:i.sqlite3_create_function_v2;for(const L of z){const N=L[0],p=L[1],g=[b,N,0,i.SQLITE_UTF8,0,0,0,0,0];O&&g.push(0);for(const T of p)try{g[2]=T,w.apply(null,g)}catch{}p.clear()}z.clear()}delete A.udf,delete A.wudf};{const b=r.xWrap("sqlite3_close_v2","int","sqlite3*");i.sqlite3_close_v2=function(A){if(arguments.length!==1)return S(A,"sqlite3_close_v2",1);if(A)try{h.cleanup(A)}catch{}return b(A)}}if(i.sqlite3session_create){const b=r.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);i.sqlite3session_delete=function(A){if(arguments.length!==1)return S(pDb,"sqlite3session_delete",1);A&&i.sqlite3session_table_filter(A,0,0),b(A)}}{const b=(O,z)=>"argv["+z+"]:"+O[0]+":"+r.cstrToJs(O[1]).toLowerCase(),A=r.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new r.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:b}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:b})]);i.sqlite3_create_collation_v2=function(O,z,w,L,N,p){if(arguments.length!==6)return S(O,"sqlite3_create_collation_v2",6);if(!(w&15))w|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(w&15))return J(O);try{const g=A(O,z,w,L,N,p);return g===0&&N instanceof Function&&h.addCollation(O,z),g}catch(g){return u.sqlite3__wasm_db_error(O,g)}},i.sqlite3_create_collation=(O,z,w,L,N)=>arguments.length===5?i.sqlite3_create_collation_v2(O,z,w,L,N,0):S(O,"sqlite3_create_collation",5)}{const b=function(w,L){return w[0]+":"+(w[2]<0?-1:w[2])+":"+L+":"+r.cstrToJs(w[1]).toLowerCase()},A=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:b,callProxy:w=>(L,N,p)=>{try{w(L,...i.sqlite3_values_to_js(N,p))}catch(g){i.sqlite3_result_error_js(L,g)}}},xFinalAndValue:{signature:"v(p)",contextKey:b,callProxy:w=>L=>{try{i.sqlite3_result_js(L,w(L))}catch(N){i.sqlite3_result_error_js(L,N)}}},xFunc:{signature:"v(pip)",contextKey:b,callProxy:w=>(L,N,p)=>{try{i.sqlite3_result_js(L,w(L,...i.sqlite3_values_to_js(N,p)))}catch(g){i.sqlite3_result_error_js(L,g)}}},xDestroy:{signature:"v(p)",contextKey:b,callProxy:w=>L=>{try{w(L)}catch(N){console.error("UDF xDestroy method threw:",N)}}}}),O=r.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xFunc",...A.xFunc}),new r.xWrap.FuncPtrAdapter({name:"xStep",...A.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...A.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...A.xDestroy})]),z=r.exports.sqlite3_create_window_function?r.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xStep",...A.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...A.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xValue",...A.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xInverse",...A.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...A.xDestroy})]):void 0;i.sqlite3_create_function_v2=function w(L,N,p,g,T,Q,te,de,ve){if(w.length!==arguments.length)return S(L,"sqlite3_create_function_v2",w.length);if(!(g&15))g|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(g&15))return J(L);try{const ge=O(L,N,p,g,T,Q,te,de,ve);return ge===0&&(Q instanceof Function||te instanceof Function||de instanceof Function||ve instanceof Function)&&h.addFunction(L,N,p),ge}catch(ge){return console.error("sqlite3_create_function_v2() setup threw:",ge),u.sqlite3__wasm_db_error(L,ge,"Creation of UDF threw: "+ge)}},i.sqlite3_create_function=function w(L,N,p,g,T,Q,te,de){return w.length===arguments.length?i.sqlite3_create_function_v2(L,N,p,g,T,Q,te,de,0):S(L,"sqlite3_create_function",w.length)},z?i.sqlite3_create_window_function=function w(L,N,p,g,T,Q,te,de,ve,ge){if(w.length!==arguments.length)return S(L,"sqlite3_create_window_function",w.length);if(!(g&15))g|=i.SQLITE_UTF8;else if(i.SQLITE_UTF8!==(g&15))return J(L);try{const me=z(L,N,p,g,T,Q,te,de,ve,ge);return me===0&&(Q instanceof Function||te instanceof Function||de instanceof Function||ve instanceof Function||ge instanceof Function)&&h.addWindowFunc(L,N,p),me}catch(me){return console.error("sqlite3_create_window_function() setup threw:",me),u.sqlite3__wasm_db_error(L,me,"Creation of UDF threw: "+me)}}:delete i.sqlite3_create_window_function,i.sqlite3_create_function_v2.udfSetResult=i.sqlite3_create_function.udfSetResult=i.sqlite3_result_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfSetResult=i.sqlite3_result_js),i.sqlite3_create_function_v2.udfConvertArgs=i.sqlite3_create_function.udfConvertArgs=i.sqlite3_values_to_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfConvertArgs=i.sqlite3_values_to_js),i.sqlite3_create_function_v2.udfSetError=i.sqlite3_create_function.udfSetError=i.sqlite3_result_error_js,i.sqlite3_create_window_function&&(i.sqlite3_create_window_function.udfSetError=i.sqlite3_result_error_js)}{const b=(O,z)=>(typeof O=="string"?z=-1:u.isSQLableTypedArray(O)?(z=O.byteLength,O=r.typedArrayToString(O instanceof ArrayBuffer?new Uint8Array(O):O)):Array.isArray(O)&&(O=O.join(""),z=-1),[O,z]),A={basic:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};i.sqlite3_prepare_v3=function O(z,w,L,N,p,g){if(O.length!==arguments.length)return S(z,"sqlite3_prepare_v3",O.length);const[T,Q]=b(w,Number(L));switch(typeof T){case"string":return A.basic(z,T,Q,N,p,null);case typeof r.ptr.null:return A.full(z,r.ptr.coerce(T),Q,N,p,g);default:return u.sqlite3__wasm_db_error(z,i.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3(). typeof="+typeof T)}},i.sqlite3_prepare_v2=function O(z,w,L,N,p){return O.length===arguments.length?i.sqlite3_prepare_v3(z,w,L,0,N,p):S(z,"sqlite3_prepare_v2",O.length)}}{const b=r.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),A=r.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);i.sqlite3_bind_text=function O(z,w,L,N,p){if(O.length!==arguments.length)return S(i.sqlite3_db_handle(z),"sqlite3_bind_text",O.length);if(r.isPtr(L)||L===null)return b(z,w,L,N,p);L instanceof ArrayBuffer?L=new Uint8Array(L):Array.isArray(pMem)&&(L=pMem.join(""));let g,T;try{if(u.isSQLableTypedArray(L))g=r.allocFromTypedArray(L),T=L.byteLength;else if(typeof L=="string")[g,T]=r.allocCString(L);else return u.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return b(z,w,g,T,i.SQLITE_WASM_DEALLOC)}catch(Q){return r.dealloc(g),u.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),Q)}},i.sqlite3_bind_blob=function O(z,w,L,N,p){if(O.length!==arguments.length)return S(i.sqlite3_db_handle(z),"sqlite3_bind_blob",O.length);if(r.isPtr(L)||L===null)return A(z,w,L,N,p);L instanceof ArrayBuffer?L=new Uint8Array(L):Array.isArray(L)&&(L=L.join(""));let g,T;try{if(u.isBindableTypedArray(L))g=r.allocFromTypedArray(L),T=N>=0?N:L.byteLength;else if(typeof L=="string")[g,T]=r.allocCString(L);else return u.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return A(z,w,g,T,i.SQLITE_WASM_DEALLOC)}catch(Q){return r.dealloc(g),u.sqlite3__wasm_db_error(i.sqlite3_db_handle(z),Q)}}}if(!i.sqlite3_column_text){const b=r.xWrap.argAdapter("sqlite3_stmt*"),A=r.xWrap.argAdapter("int"),O=r.xWrap.argAdapter("sqlite3_value*"),z=(w,L)=>r.typedArrayToString(r.heap8u(),Number(w),Number(w)+L);i.sqlite3_column_text=function(w,L){const N=b(w),p=A(L),g=r.exports.sqlite3_column_text(N,p);return g?z(g,r.exports.sqlite3_column_bytes(N,p)):null},i.sqlite3_value_text=function(w){const L=O(w),N=r.exports.sqlite3_value_text(L);return N?z(N,r.exports.sqlite3_value_bytes(L)):null}}i.sqlite3_config=function(b,...A){if(arguments.length<2)return i.SQLITE_MISUSE;switch(b){case i.SQLITE_CONFIG_COVERING_INDEX_SCAN:case i.SQLITE_CONFIG_MEMSTATUS:case i.SQLITE_CONFIG_SMALL_MALLOC:case i.SQLITE_CONFIG_SORTERREF_SIZE:case i.SQLITE_CONFIG_STMTJRNL_SPILL:case i.SQLITE_CONFIG_URI:return r.exports.sqlite3__wasm_config_i(b,A[0]);case i.SQLITE_CONFIG_LOOKASIDE:return r.exports.sqlite3__wasm_config_ii(b,A[0],A[1]);case i.SQLITE_CONFIG_MEMDB_MAXSIZE:return r.exports.sqlite3__wasm_config_j(b,A[0]);case i.SQLITE_CONFIG_GETMALLOC:case i.SQLITE_CONFIG_GETMUTEX:case i.SQLITE_CONFIG_GETPCACHE2:case i.SQLITE_CONFIG_GETPCACHE:case i.SQLITE_CONFIG_HEAP:case i.SQLITE_CONFIG_LOG:case i.SQLITE_CONFIG_MALLOC:case i.SQLITE_CONFIG_MMAP_SIZE:case i.SQLITE_CONFIG_MULTITHREAD:case i.SQLITE_CONFIG_MUTEX:case i.SQLITE_CONFIG_PAGECACHE:case i.SQLITE_CONFIG_PCACHE2:case i.SQLITE_CONFIG_PCACHE:case i.SQLITE_CONFIG_PCACHE_HDRSZ:case i.SQLITE_CONFIG_PMASZ:case i.SQLITE_CONFIG_SERIALIZED:case i.SQLITE_CONFIG_SINGLETHREAD:case i.SQLITE_CONFIG_SQLLOG:case i.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return i.SQLITE_NOTFOUND}};{const b=new Set;i.sqlite3_auto_extension=function(A){if(A instanceof Function)A=r.installFunction("i(ppp)",A);else if(arguments.length!==1||!r.isPtr(A))return i.SQLITE_MISUSE;const O=r.exports.sqlite3_auto_extension(A);return A!==arguments[0]&&(O===0?b.add(A):r.uninstallFunction(A)),O},i.sqlite3_cancel_auto_extension=function(A){return!A||arguments.length!==1||!r.isPtr(A)?0:r.exports.sqlite3_cancel_auto_extension(A)},i.sqlite3_reset_auto_extension=function(){r.exports.sqlite3_reset_auto_extension();for(const A of b)r.uninstallFunction(A);b.clear()}}r.xWrap.FuncPtrAdapter.warnOnUse=!0;const j=s.StructBinder,C=function b(A,O,z,w=b.installMethodArgcCheck){if(A instanceof j.StructType?!(z instanceof Function)&&!r.isPtr(z)&&n("Usage error: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(g,T)=>b(A,g,T,w);b.argcProxy||(b.argcProxy=function(g,T,Q,te){return function(...de){return Q.length!==arguments.length&&n("Argument mismatch for",g.structInfo.name+"::"+T+": Native signature is:",te),Q.apply(this,de)}},b.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((g,T)=>{if(r.isPtr(g))try{r.uninstallFunction(g)}catch{}}),delete this.ondispose.__removeFuncList)});const L=A.memberSignature(O);L.length<2&&n("Member",O,"does not have a function pointer signature:",L);const N=A.memberKey(O),p=w&&!r.isPtr(z)?b.argcProxy(A,N,z,L):z;if(r.isPtr(p))p&&!r.functionEntry(p)&&n("Pointer",p,"is not a WASM function table entry."),A[N]=p;else{const g=r.installFunction(p,L);A[N]=g,(!A.ondispose||!A.ondispose.__removeFuncList)&&(A.addOnDispose("ondispose.__removeFuncList handler",b.removeFuncList),A.ondispose.__removeFuncList=[]),A.ondispose.__removeFuncList.push(N,g)}return(g,T)=>b(A,g,T,w)};C.installMethodArgcCheck=!1;const Y=function(b,A,O=C.installMethodArgcCheck){const z=new Map;for(const w of Object.keys(A)){const L=A[w],N=z.get(L);if(N){const p=b.memberKey(w);b[p]=b[b.memberKey(N)]}else C(b,w,L,O),z.set(L,w)}return b};j.StructType.prototype.installMethod=function(A,O,z=C.installMethodArgcCheck){return arguments.length<3&&A&&typeof A=="object"?Y(this,...arguments):C(this,...arguments)},j.StructType.prototype.installMethods=function(b,A=C.installMethodArgcCheck){return Y(this,b,A)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(s){const n=(...d)=>{throw new s.SQLite3Error(...d)},i=s.capi,r=s.wasm,u=s.util,x=function(d){return(...l)=>d("sqlite3.oo1:",...l)};s.__isUnderTest?x(console.debug.bind(console)):x(s.config.debug),s.__isUnderTest?x(console.warn.bind(console)):x(s.config.warn),s.__isUnderTest?x(console.error.bind(console)):x(s.config.error);const S=new WeakMap,J=new Set,R=new WeakMap,V=(d,l,c)=>{const m=Object.getOwnPropertyDescriptor(d,l);return m?m.value:c},h=function(d,l){return l&&(d instanceof b&&(d=d.pointer),n(l,"sqlite3 result code",l+":",d?i.sqlite3_errmsg(d):i.sqlite3_errstr(l))),arguments[0]},j=r.installFunction("i(ippp)",(function(d,l,c,m){i.SQLITE_TRACE_STMT===d&&console.log("SQL TRACE #"+ ++this.counter,"via sqlite3@"+l+"["+i.sqlite3_db_filename(l,null)+"]",r.cstrToJs(m))}).bind({counter:0})),C=Object.create(null),Y=function d(...l){const c=d.normalizeArgs(...l);let m;if(m=c["sqlite3*"])c["sqlite3*:takeOwnership"]||J.add(this),this.filename=i.sqlite3_db_filename(m,"main");else{let E=c.filename,B=c.vfs,G=c.flags;(typeof E!="string"&&!r.isPtr(E)||typeof G!="string"||B&&typeof B!="string"&&!r.isPtr(B))&&(s.config.error("Invalid DB ctor args",c,arguments),n("Invalid arguments for DB constructor:",arguments,"opts:",c));let se=0;G.indexOf("c")>=0&&(se|=i.SQLITE_OPEN_CREATE|i.SQLITE_OPEN_READWRITE),G.indexOf("w")>=0&&(se|=i.SQLITE_OPEN_READWRITE),se===0&&(se|=i.SQLITE_OPEN_READONLY),se|=i.SQLITE_OPEN_EXRESCODE;const le=r.pstack.pointer;try{const Se=r.pstack.allocPtr();let ue=i.sqlite3_open_v2(E,Se,se,B||r.ptr.null);m=r.peekPtr(Se),h(m,ue),i.sqlite3_extended_result_codes(m,1),G.indexOf("t")>=0&&i.sqlite3_trace_v2(m,i.SQLITE_TRACE_STMT,j,m)}catch(Se){throw m&&i.sqlite3_close_v2(m),Se}finally{r.pstack.restore(le)}this.filename=r.isPtr(E)?r.cstrToJs(E):E}if(S.set(this,m),R.set(this,Object.create(null)),!c["sqlite3*"])try{const E=C[i.sqlite3_js_db_vfs(m)||n("Internal error: cannot get VFS for new db handle.")];E&&(E instanceof Function?E(this,s):h(m,i.sqlite3_exec(m,E,0,0,0)))}catch(E){throw this.close(),E}};Y.setVfsPostOpenCallback=function(d,l){l instanceof Function||n("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),C[d]=l},Y.normalizeArgs=function(d=":memory:",l="c",c=null){const m={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(m,arguments[0]),m.flags===void 0&&(m.flags="c"),m.vfs===void 0&&(m.vfs=null),m.filename===void 0&&(m.filename=":memory:")):(m.filename=d,m.flags=l,m.vfs=c),m};const b=function(...d){Y.apply(this,d)};b.dbCtorHelper=Y;const A={null:1,number:2,string:3,boolean:4,blob:5};r.bigIntEnabled&&(A.bigint=A.number);const O=function(){A!==arguments[2]&&n(i.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],S.set(this,arguments[1]),arguments.length>3&&!arguments[3]&&J.add(this)},z=function(d){return d.pointer||n("DB has been closed."),d},w=function(d,l){return(l!==(l|0)||l<0||l>=d.columnCount)&&n("Column index",l,"is out of range."),d},L=function(d,l){const c=Object.create(null);switch(c.opt=Object.create(null),l.length){case 1:typeof l[0]=="string"||u.isSQLableTypedArray(l[0])||Array.isArray(l[0])?c.sql=l[0]:l[0]&&typeof l[0]=="object"&&(c.opt=l[0],c.sql=c.opt.sql);break;case 2:c.sql=l[0],c.opt=l[1];break;default:n("Invalid argument count for exec().")}c.sql=u.flexibleString(c.sql),typeof c.sql!="string"&&n("Missing SQL argument or unsupported SQL value type.");const m=c.opt;switch(m.returnValue){case"resultRows":m.resultRows||(m.resultRows=[]),c.returnVal=()=>m.resultRows;break;case"saveSql":m.saveSql||(m.saveSql=[]),c.returnVal=()=>m.saveSql;break;case void 0:case"this":c.returnVal=()=>d;break;default:n("Invalid returnValue value:",m.returnValue)}if(!m.callback&&!m.returnValue&&m.rowMode!==void 0&&(m.resultRows||(m.resultRows=[]),c.returnVal=()=>m.resultRows),m.callback||m.resultRows)switch(m.rowMode===void 0?"array":m.rowMode){case"object":c.cbArg=(E,B)=>{B.columnNames||(B.columnNames=E.getColumnNames([]));const G=E.get([]),se=Object.create(null);for(const le in B.columnNames)se[B.columnNames[le]]=G[le];return se};break;case"array":c.cbArg=E=>E.get([]);break;case"stmt":Array.isArray(m.resultRows)&&n("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),c.cbArg=E=>E;break;default:if(u.isInt32(m.rowMode)){c.cbArg=E=>E.get(m.rowMode);break}else if(typeof m.rowMode=="string"&&m.rowMode.length>1&&m.rowMode[0]==="$"){const E=m.rowMode.substr(1);c.cbArg=B=>{const G=B.get(Object.create(null))[E];return G===void 0?n(i.SQLITE_NOTFOUND,"exec(): unknown result column:",E):G};break}n("Invalid rowMode:",m.rowMode)}return c},N=(d,l,c,...m)=>{const E=d.prepare(l);try{const B=E.bind(c).step()?E.get(...m):void 0;return E.reset(),B}finally{E.finalize()}},p=(d,l,c,m)=>d.exec({sql:l,bind:c,rowMode:m,returnValue:"resultRows"});b.checkRc=(d,l)=>h(d,l),b.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return z(this)},close:function(){const d=this.pointer;if(d){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}if(Object.keys(R.get(this)).forEach((l,c)=>{if(c&&c.pointer)try{c.finalize()}catch{}}),S.delete(this),R.delete(this),J.delete(this)||i.sqlite3_close_v2(d),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(d=!1,l=!1){const c=z(this).pointer;return d?l?i.sqlite3_total_changes64(c):i.sqlite3_total_changes(c):l?i.sqlite3_changes64(c):i.sqlite3_changes(c)},dbFilename:function(d="main"){return i.sqlite3_db_filename(z(this).pointer,d)},dbName:function(d=0){return i.sqlite3_db_name(z(this).pointer,d)},dbVfsName:function(d=0){let l;const c=i.sqlite3_js_db_vfs(z(this).pointer,d);if(c){const m=new i.sqlite3_vfs(c);try{l=r.cstrToJs(m.$zName)}finally{m.dispose()}}return l},prepare:function(d){z(this);const l=r.pstack.pointer;let c,m;try{c=r.pstack.alloc(8),b.checkRc(this,i.sqlite3_prepare_v2(this.pointer,d,-1,c,null)),m=r.peekPtr(c)}finally{r.pstack.restore(l)}m||n("Cannot prepare empty SQL.");const E=new O(this,m,A);return R.get(this)[m]=E,E},exec:function(){z(this);const d=L(this,arguments);if(!d.sql)return n("exec() requires an SQL string.");const l=d.opt,c=l.callback,m=Array.isArray(l.resultRows)?l.resultRows:void 0;let E,B=l.bind,G=!!(d.cbArg||l.columnNames||m);const se=r.scopedAllocPush(),le=Array.isArray(l.saveSql)?l.saveSql:void 0;try{const Se=u.isSQLableTypedArray(d.sql);let ue=Se?d.sql.byteLength:r.jstrlen(d.sql);const ke=r.scopedAlloc(2*r.ptr.size+(ue+1)),ye=r.ptr.add(ke,r.ptr.size);let F=r.ptr.add(ye,r.ptr.size);const W=r.ptr.add(F,ue);for(Se?r.heap8().set(d.sql,F):r.jstrcpy(d.sql,r.heap8(),F,ue,!1),r.poke8(r.ptr.add(F,ue),0);F&&r.peek8(F);){r.pokePtr([ke,ye],0),b.checkRc(this,i.sqlite3_prepare_v3(this.pointer,F,ue,0,ke,ye));const $=r.peekPtr(ke);if(F=r.peekPtr(ye),ue=Number(r.ptr.add(W,-F)),!!$){if(le&&le.push(i.sqlite3_sql($).trim()),E=new O(this,$,A),B&&E.parameterCount&&(E.bind(B),B=null),G&&E.columnCount){let ee=Array.isArray(l.columnNames)?0:1;if(G=!1,d.cbArg||m){const X=Object.create(null);for(;E.step();de.delete(E)){ee++===0&&E.getColumnNames(X.columnNames=l.columnNames||[]),de.add(E);const fe=d.cbArg(E,X);if(m&&m.push(fe),c&&c.call(l,fe,E)===!1)break}de.delete(E)}ee===0&&E.getColumnNames(l.columnNames)}else E.step();E.reset().finalize(),E=null}}}finally{E&&(de.delete(E),E.finalize()),r.scopedAllocPop(se)}return d.returnVal()},createFunction:function(l,c,m){const E=X=>X instanceof Function;switch(arguments.length){case 1:m=l,l=m.name,c=m.xFunc||0;break;case 2:E(c)||(m=c,c=m.xFunc||0);break}m||(m={}),typeof l!="string"&&n("Invalid arguments: missing function name.");let B=m.xStep||0,G=m.xFinal||0;const se=m.xValue||0,le=m.xInverse||0;let Se;E(c)?(Se=!1,(E(B)||E(G))&&n("Ambiguous arguments: scalar or aggregate?"),B=G=null):E(B)?(E(G)||n("Missing xFinal() callback for aggregate or window UDF."),c=null):E(G)?n("Missing xStep() callback for aggregate or window UDF."):n("Missing function-type properties."),Se===!1?(E(se)||E(le))&&n("xValue and xInverse are not permitted for non-window UDFs."):E(se)?(E(le)||n("xInverse must be provided if xValue is."),Se=!0):E(le)&&n("xValue must be provided if xInverse is.");const ue=m.pApp;ue!=null&&!r.isPtr(ue)&&n("Invalid value for pApp property. Must be a legal WASM pointer value.");const ke=m.xDestroy||0;ke&&!E(ke)&&n("xDestroy property must be a function.");let ye=0;V(m,"deterministic")&&(ye|=i.SQLITE_DETERMINISTIC),V(m,"directOnly")&&(ye|=i.SQLITE_DIRECTONLY),V(m,"innocuous")&&(ye|=i.SQLITE_INNOCUOUS),l=l.toLowerCase();const F=c||B,W=V(m,"arity"),$=typeof W=="number"?W:F.length?F.length-1:0;let ee;return Se?ee=i.sqlite3_create_window_function(this.pointer,l,$,i.SQLITE_UTF8|ye,ue||0,B,G,se,le,ke):ee=i.sqlite3_create_function_v2(this.pointer,l,$,i.SQLITE_UTF8|ye,ue||0,c,B,G,ke),b.checkRc(this,ee),this},selectValue:function(d,l,c){return N(this,d,l,0,c)},selectValues:function(d,l,c){const m=this.prepare(d),E=[];try{for(m.bind(l);m.step();)E.push(m.get(0,c));m.reset()}finally{m.finalize()}return E},selectArray:function(d,l){return N(this,d,l,[])},selectObject:function(d,l){return N(this,d,l,{})},selectArrays:function(d,l){return p(this,d,l,"array")},selectObjects:function(d,l){return p(this,d,l,"object")},openStatementCount:function(){return this.pointer?Object.keys(R.get(this)).length:0},transaction:function(d){let l="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&n(i.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),l+=" "+arguments[0],d=arguments[1]),z(this).exec(l);try{const c=d(this);return this.exec("COMMIT"),c}catch(c){throw this.exec("ROLLBACK"),c}},savepoint:function(d){z(this).exec("SAVEPOINT oo1");try{const l=d(this);return this.exec("RELEASE oo1"),l}catch(l){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),l}},checkRc:function(d){return h(this,d)}},b.wrapHandle=function(d,l=!1){if(!d||!r.isPtr(d))throw new s.SQLite3Error(i.SQLITE_MISUSE,"Argument must be a WASM sqlite3 pointer");return new b({"sqlite3*":d,"sqlite3*:takeOwnership":!!l})};const g=function(d){return d.pointer||n("Stmt has been closed."),d},T=function(d){let l=A[d==null?"null":typeof d];switch(l){case A.boolean:case A.null:case A.number:case A.string:return l;case A.bigint:return r.bigIntEnabled?l:void 0;default:return u.isBindableTypedArray(d)?A.blob:void 0}},Q=function(d){return T(d)||n("Unsupported bind() argument type:",typeof d)},te=function(d,l){const c=typeof l=="number"?l:i.sqlite3_bind_parameter_index(d.pointer,l);return c===0||!u.isInt32(c)?n("Invalid bind() parameter name: "+l):(c<1||c>d.parameterCount)&&n("Bind index",l,"is out of range."),c},de=new Set,ve=new Set,ge=function(d,l){return de.has(d)&&n("Operation is illegal when statement is locked:",l),d},me=function d(l,c,m,E){ge(g(l),"bind()"),d._||(d._tooBigInt=G=>n("BigInt value is too big to store without precision loss:",G),d._={string:function(G,se,le,Se){const[ue,ke]=r.allocCString(le,!0);return(Se?i.sqlite3_bind_blob:i.sqlite3_bind_text)(G.pointer,se,ue,ke,i.SQLITE_WASM_DEALLOC)}}),Q(E),c=te(l,c);let B=0;switch(E==null?A.null:m){case A.null:B=i.sqlite3_bind_null(l.pointer,c);break;case A.string:B=d._.string(l,c,E,!1);break;case A.number:{let G;u.isInt32(E)?G=i.sqlite3_bind_int:typeof E=="bigint"?u.bigIntFits64(E)?r.bigIntEnabled?G=i.sqlite3_bind_int64:u.bigIntFitsDouble(E)?(E=Number(E),G=i.sqlite3_bind_double):d._tooBigInt(E):d._tooBigInt(E):(E=Number(E),r.bigIntEnabled&&Number.isInteger(E)?G=i.sqlite3_bind_int64:G=i.sqlite3_bind_double),B=G(l.pointer,c,E);break}case A.boolean:B=i.sqlite3_bind_int(l.pointer,c,E?1:0);break;case A.blob:{if(typeof E=="string"){B=d._.string(l,c,E,!0);break}else E instanceof ArrayBuffer?E=new Uint8Array(E):u.isBindableTypedArray(E)||n("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const G=r.alloc(E.byteLength||1);r.heap8().set(E.byteLength?E:[0],Number(G)),B=i.sqlite3_bind_blob(l.pointer,c,G,E.byteLength,i.SQLITE_WASM_DEALLOC);break}default:s.config.warn("Unsupported bind() argument type:",E),n("Unsupported bind() argument type: "+typeof E)}return B&&b.checkRc(l.db.pointer,B),l};O.prototype={finalize:function(){const d=this.pointer;if(d){ge(this,"finalize()");const l=J.delete(this)?0:i.sqlite3_finalize(d);return delete R.get(this.db)[d],S.delete(this),de.delete(this),ve.delete(this),delete this.parameterCount,delete this.db,l}},clearBindings:function(){return ge(g(this),"clearBindings()"),i.sqlite3_clear_bindings(this.pointer),ve.delete(this),this},reset:function(d){ge(this,"reset()"),d&&this.clearBindings();const l=i.sqlite3_reset(g(this).pointer);return ve.delete(this),h(this.db,l),this},bind:function(){g(this);let d,l;switch(arguments.length){case 1:d=1,l=arguments[0];break;case 2:d=arguments[0],l=arguments[1];break;default:n("Invalid bind() arguments.")}return l===void 0?this:(this.parameterCount||n("This statement has no bindable parameters."),ve.delete(this),l===null?me(this,d,A.null,l):Array.isArray(l)?(arguments.length!==1&&n("When binding an array, an index argument is not permitted."),l.forEach((c,m)=>me(this,m+1,Q(c),c)),this):(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),typeof l=="object"&&!u.isBindableTypedArray(l)?(arguments.length!==1&&n("When binding an object, an index argument is not permitted."),Object.keys(l).forEach(c=>me(this,c,Q(l[c]),l[c])),this):me(this,d,Q(l),l)))},bindAsBlob:function(d,l){g(this),arguments.length===1&&(l=d,d=1);const c=Q(l);return A.string!==c&&A.blob!==c&&A.null!==c&&n("Invalid value type for bindAsBlob()"),me(this,d,A.blob,l)},step:function(){ge(this,"step()");const d=i.sqlite3_step(g(this).pointer);switch(d){case i.SQLITE_DONE:return ve.delete(this),!1;case i.SQLITE_ROW:return ve.add(this),!0;default:ve.delete(this),s.config.warn("sqlite3_step() rc=",d,i.sqlite3_js_rc_str(d),"SQL =",i.sqlite3_sql(this.pointer)),b.checkRc(this.db.pointer,d)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const d=this.step();return this.reset(),d}finally{try{this.finalize()}catch{}}},get:function(d,l){if(ve.has(g(this))||n("Stmt.step() has not (recently) returned true."),Array.isArray(d)){let c=0;const m=this.columnCount;for(;c<m;)d[c]=this.get(c++);return d}else if(d&&typeof d=="object"){let c=0;const m=this.columnCount;for(;c<m;)d[i.sqlite3_column_name(this.pointer,c)]=this.get(c++);return d}switch(w(this,d),l===void 0?i.sqlite3_column_type(this.pointer,d):l){case i.SQLITE_NULL:return null;case i.SQLITE_INTEGER:if(r.bigIntEnabled){const c=i.sqlite3_column_int64(this.pointer,d);return c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c).valueOf():c}else{const c=i.sqlite3_column_double(this.pointer,d);return(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&n("Integer is out of range for JS integer range: "+c),u.isInt32(c)?c|0:c}case i.SQLITE_FLOAT:return i.sqlite3_column_double(this.pointer,d);case i.SQLITE_TEXT:return i.sqlite3_column_text(this.pointer,d);case i.SQLITE_BLOB:{const c=i.sqlite3_column_bytes(this.pointer,d),m=i.sqlite3_column_blob(this.pointer,d),E=new Uint8Array(c);return c&&(E.set(r.heap8u().slice(Number(m),Number(m)+c),0),this.db._blobXfer instanceof Array&&this.db._blobXfer.push(E.buffer)),E}default:n("Don't know how to translate","type of result column #"+d+".")}n("Not reached.")},getInt:function(d){return this.get(d,i.SQLITE_INTEGER)},getFloat:function(d){return this.get(d,i.SQLITE_FLOAT)},getString:function(d){return this.get(d,i.SQLITE_TEXT)},getBlob:function(d){return this.get(d,i.SQLITE_BLOB)},getJSON:function(d){const l=this.get(d,i.SQLITE_STRING);return l===null?l:JSON.parse(l)},getColumnName:function(d){return i.sqlite3_column_name(w(g(this),d).pointer,d)},getColumnNames:function(d=[]){w(g(this),0);const l=this.columnCount;for(let c=0;c<l;++c)d.push(i.sqlite3_column_name(this.pointer,c));return d},getParamIndex:function(d){return g(this).parameterCount?i.sqlite3_bind_parameter_index(this.pointer,d):void 0},getParamName:function(d){return g(this).parameterCount?i.sqlite3_bind_parameter_name(this.pointer,d):void 0},isBusy:function(){return i.sqlite3_stmt_busy(g(this))!==0},isReadOnly:function(){return i.sqlite3_stmt_readonly(g(this))!==0}};{const d={enumerable:!0,get:function(){return S.get(this)},set:()=>n("The pointer property is read-only.")};Object.defineProperty(O.prototype,"pointer",d),Object.defineProperty(b.prototype,"pointer",d)}Object.defineProperty(O.prototype,"columnCount",{enumerable:!1,get:function(){return i.sqlite3_column_count(this.pointer)},set:()=>n("The columnCount property is read-only.")}),Object.defineProperty(O.prototype,"parameterCount",{enumerable:!1,get:function(){return i.sqlite3_bind_parameter_count(this.pointer)},set:()=>n("The parameterCount property is read-only.")}),O.wrapHandle=function(d,l,c=!1){if(!(d instanceof b)||!d.pointer)throw new s.SQLite3Error(s.SQLITE_MISUSE,"First argument must be an opened sqlite3.oo1.DB instance");if(!l||!r.isPtr(l))throw new s.SQLite3Error(s.SQLITE_MISUSE,"Second argument must be a WASM sqlite3_stmt pointer");return new O(d,l,A,!!c)},s.oo1={DB:b,Stmt:O}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(s){const n=s.util;s.initWorker1API=(function(){const i=(...j)=>{throw new Error(j.join(" "))};globalThis.WorkerGlobalScope instanceof Function||i("initWorker1API() must be run from a Worker thread.");const r=this.sqlite3||i("Missing this.sqlite3 object."),u=r.oo1.DB,x=function(j){let C=S.idMap.get(j);return C||(C="db#"+ ++S.idSeq+":"+Math.floor(Math.random()*1e8)+":"+Math.floor(Math.random()*1e8),S.idMap.set(j,C),C)},S={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(j){const C=new u(j);return this.dbs[x(C)]=C,this.dbList.indexOf(C)<0&&this.dbList.push(C),C},close:function(j,C){if(j){delete this.dbs[x(j)];const Y=j.filename,b=n.sqlite3__wasm_db_vfs(j.pointer,0);j.close();const A=this.dbList.indexOf(j);A>=0&&this.dbList.splice(A,1),C&&Y&&b&&n.sqlite3__wasm_vfs_unlink(b,Y)}},post:function(j,C){C&&C.length?(globalThis.postMessage(j,Array.from(C)),C.length=0):globalThis.postMessage(j)},dbs:Object.create(null),getDb:function(j,C=!0){return this.dbs[j]||(C?i("Unknown (or closed) DB ID:",j):void 0)}},J=function(j=S.dbList[0]){return j&&j.pointer?j:i("DB is not opened.")},R=function(j,C=!0){const Y=S.getDb(j.dbId,!1)||S.dbList[0];return C?J(Y):Y},V=function(){return S.dbList[0]&&x(S.dbList[0])},h={open:function(j){const C=Object.create(null),Y=j.args||Object.create(null);Y.simulateError&&i("Throwing because of simulateError flag.");const b=Object.create(null);C.vfs=Y.vfs,C.filename=Y.filename||"";const A=S.open(C);return b.filename=A.filename,b.persistent=!!r.capi.sqlite3_js_db_uses_vfs(A.pointer,"opfs"),b.dbId=x(A),b.vfs=A.dbVfsName(),b},close:function(j){const C=R(j,!1),Y={filename:C&&C.filename};if(C){const b=j.args&&typeof j.args=="object"?!!j.args.unlink:!1;S.close(C,b)}return Y},exec:function(j){const C=typeof j.args=="string"?{sql:j.args}:j.args||Object.create(null);C.rowMode==="stmt"?i("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):C.sql||i("'exec' requires input SQL.");const Y=R(j);(C.callback||Array.isArray(C.resultRows))&&(Y._blobXfer=S.xfer);const b=C.callback;let A=0;const O=!!C.columnNames;typeof b=="string"&&(O||(C.columnNames=[]),C.callback=function(z,w){S.post({type:b,columnNames:C.columnNames,rowNumber:++A,row:z},S.xfer)});try{const z=C.countChanges?Y.changes(!0,C.countChanges===64):void 0;Y.exec(C),z!==void 0&&(C.changeCount=Y.changes(!0,C.countChanges===64)-z);const w=C.lastInsertRowId?r.capi.sqlite3_last_insert_rowid(Y):void 0;w!==void 0&&(C.lastInsertRowId=w),C.callback instanceof Function&&(C.callback=b,S.post({type:b,columnNames:C.columnNames,rowNumber:null,row:void 0}))}finally{delete Y._blobXfer,C.callback&&(C.callback=b)}return C},"config-get":function(){const j=Object.create(null),C=r.config;return["bigIntEnabled"].forEach(function(Y){Object.getOwnPropertyDescriptor(C,Y)&&(j[Y]=C[Y])}),j.version=r.version,j.vfsList=r.capi.sqlite3_js_vfs_list(),j},export:function(j){const C=R(j),Y={byteArray:r.capi.sqlite3_js_db_export(C.pointer),filename:C.filename,mimetype:"application/x-sqlite3"};return S.xfer.push(Y.byteArray.buffer),Y},toss:function(j){i("Testing worker exception")}};globalThis.onmessage=async function(j){j=j.data;let C,Y=j.dbId,b=j.type;const A=performance.now();try{h.hasOwnProperty(b)&&h[b]instanceof Function?C=await h[b](j):i("Unknown db worker message type:",j.type)}catch(O){b="error",C={operation:j.type,message:O.message,errorClass:O.name,input:j},O.stack&&(C.stack=typeof O.stack=="string"?O.stack.split(/\n\s*/):O.stack)}Y||(Y=C.dbId||V()),S.post({type:b,dbId:Y,messageId:j.messageId,workerReceivedTime:A,workerRespondTime:performance.now(),departureTime:j.departureTime,result:C},S.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:s})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(s){const n=s.wasm,i=s.capi,r=s.util.toss3,u=Object.create(null);s.vfs=u,i.sqlite3_vfs.prototype.registerVfs=function(x=!1){this instanceof s.capi.sqlite3_vfs||r("Expecting a sqlite3_vfs-type argument.");const S=i.sqlite3_vfs_register(this,x?1:0);return S&&r("sqlite3_vfs_register(",this,") failed with rc",S),this.pointer!==i.sqlite3_vfs_find(this.$zName)&&r("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},u.installVfs=function(x){let S=0;const J=["io","vfs"];for(const R of J){const V=x[R];V&&(++S,V.struct.installMethods(V.methods,!!V.applyArgcCheck),R==="vfs"&&(!V.struct.$zName&&typeof V.name=="string"&&V.struct.addOnDispose(V.struct.$zName=n.allocCString(V.name)),V.struct.registerVfs(!!V.asDefault)))}return S||r("Misuse: installVfs() options object requires at least","one of:",J),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(s){if(!s.wasm.exports.sqlite3_declare_vtab)return;const n=s.wasm,i=s.capi,r=s.util.toss3,u=Object.create(null);s.vtab=u;const x=i.sqlite3_index_info;x.prototype.nthConstraint=function(R,V=!1){if(R<0||R>=this.$nConstraint)return!1;const h=n.ptr.add(this.$aConstraint,x.sqlite3_index_constraint.structInfo.sizeof*R);return V?h:new x.sqlite3_index_constraint(h)},x.prototype.nthConstraintUsage=function(R,V=!1){if(R<0||R>=this.$nConstraint)return!1;const h=n.ptr.add(this.$aConstraintUsage,x.sqlite3_index_constraint_usage.structInfo.sizeof*R);return V?h:new x.sqlite3_index_constraint_usage(h)},x.prototype.nthOrderBy=function(R,V=!1){if(R<0||R>=this.$nOrderBy)return!1;const h=n.ptr.add(this.$aOrderBy,x.sqlite3_index_orderby.structInfo.sizeof*R);return V?h:new x.sqlite3_index_orderby(h)};const S=function(R,V){return(function(h,j=!1){if(arguments.length===0&&(h=new V),h instanceof V)return this.set(h.pointer,h),h;n.isPtr(h)||s.SQLite3Error.toss("Invalid argument to",R+"()");let C=this.get(h);return j&&this.delete(h),C}).bind(new Map)},J=function(R,V){const h=S(R,V);return Object.assign(Object.create(null),{StructType:V,create:j=>{const C=h();return n.pokePtr(j,C.pointer),C},get:j=>h(j),unget:j=>h(j,!0),dispose:j=>{var C,Y;return(Y=(C=h(j,!0))==null?void 0:C.dispose)==null?void 0:Y.call(C)}})};u.xVtab=J("xVtab",i.sqlite3_vtab),u.xCursor=J("xCursor",i.sqlite3_vtab_cursor),u.xIndexInfo=R=>new i.sqlite3_index_info(R),u.xError=function R(V,h,j){if(R.errorReporter instanceof Function)try{R.errorReporter("sqlite3_module::"+V+"(): "+h.message)}catch{}let C;return h instanceof s.WasmAllocError?C=i.SQLITE_NOMEM:arguments.length>2?C=j:h instanceof s.SQLite3Error&&(C=h.resultCode),C||i.SQLITE_ERROR},u.xError.errorReporter=s.config.error.bind(s.config),u.xRowid=(R,V)=>n.poke(R,V,"i64"),u.setupModule=function(R){let V=!1;const h=this instanceof i.sqlite3_module?this:R.struct||(V=new i.sqlite3_module);try{const j=R.methods||r("Missing 'methods' object.");for(const C of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const Y=C[0],b=C[1];j[Y]===!0?j[Y]=j[b]:j[b]===!0&&(j[b]=j[Y])}if(R.catchExceptions){const C=function(A,O){return["xConnect","xCreate"].indexOf(A)>=0?function(z,w,L,N,p,g){try{return O(...arguments)||0}catch(T){return T instanceof s.WasmAllocError||(n.dealloc(n.peekPtr(g)),n.pokePtr(g,n.allocCString(T.message))),u.xError(A,T)}}:function(...z){try{return O(...z)||0}catch(w){return u.xError(A,w)}}},Y=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],b=Object.create(null);for(const A of Y){const O=j[A];if(O instanceof Function)A==="xConnect"&&j.xCreate===O?b[A]=j.xCreate:A==="xCreate"&&j.xConnect===O?b[A]=j.xConnect:b[A]=C(A,O);else continue}h.installMethods(b,!1)}else h.installMethods(j,!!R.applyArgcCheck);if(h.$iVersion===0){let C;typeof R.iVersion=="number"?C=R.iVersion:h.$xIntegrity?C=4:h.$xShadowName?C=3:h.$xSavePoint||h.$xRelease||h.$xRollbackTo?C=2:C=1,h.$iVersion=C}}catch(j){throw V&&V.dispose(),j}return h},i.sqlite3_module.prototype.setupModule=function(R){return u.setupModule.call(this,R)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(s){var ne,re,I,zt,K;const n=s.capi,i=n.sqlite3_kvvfs_methods,r=n.KVVfsFile,u=s.capi.sqlite3_vfs_find("kvvfs");if(delete n.sqlite3_kvvfs_methods,delete n.KVVfsFile,!u)return;const x=s.util,S=s.wasm,J=x.toss3,R=(f,y)=>Object.prototype.hasOwnProperty.call(f,y),V=new i(S.exports.sqlite3__wasm_kvvfs_methods());x.assert(32<=V.$nKeySize,"unexpected kvvfsMethods.$nKeySize: "+V.$nKeySize);const h=Object.assign(Object.create(null),{rxJournalSuffix:/-journal$/,zKeyJrnl:S.allocCString("jrnl"),zKeySz:S.allocCString("sz"),keySize:V.$nKeySize,buffer:Object.assign(Object.create(null),{n:V.$nBufferSize,pool:Object.create(null)})});h.memBuffer=(f=0)=>{var y;return(y=h.buffer.pool)[f]??(y[f]=S.alloc(h.buffer.n))},h.memBufferFree=f=>{const y=h.buffer.pool[f];y&&(S.dealloc(y),delete h.buffer.pool[f])};const j=()=>{},C=s.__isUnderTest?(...f)=>s.config.debug("kvvfs:",...f):j,Y=(...f)=>s.config.warn("kvvfs:",...f),b=(...f)=>s.config.error("kvvfs:",...f);class A{constructor(){Ue(this,I);Ue(this,ne);Ue(this,re);this.clear()}key(y){const P=ht(this,I,zt).call(this);return y<P.length?P[y]:null}getItem(y){return ae(this,ne)[y]??null}setItem(y,P){R(ae(this,ne),y)||We(this,re,null),ae(this,ne)[y]=""+P}removeItem(y){delete ae(this,ne)[y]&&We(this,re,null)}clear(){We(this,ne,Object.create(null)),We(this,re,null)}get length(){return ht(this,I,zt).call(this).length}}ne=new WeakMap,re=new WeakMap,I=new WeakSet,zt=function(){return ae(this,re)??We(this,re,Object.keys(ae(this,ne)))};const O=f=>f==="local"||f==="session",z=f=>O(f)?"kvvfs-"+f+"-":"",w=function(f,y=!1){if(O(f))return;const P=new Blob([f]).size;P||J(n.SQLITE_MISUSE,"Empty name is not permitted.");let D=h.keySize-1;h.rxJournalSuffix.test(f)?y||J(n.SQLITE_MISUSE,"Storage names may not have a '-journal' suffix."):["-wal","-shm"].filter(oe=>f.endsWith(oe)).length?J(n.SQLITE_MISUSE,"Storage names may not have a -wal or -shm suffix."):D-=8,P>D&&J(n.SQLITE_RANGE,"Storage name is too long. Limit =",D);let Z;for(Z=0;Z<P;++Z){const oe=f.codePointAt(Z);oe<32&&J(n.SQLITE_RANGE,"Illegal character ("+oe+"d) in storage name:",f)}},L=(f,y=void 0)=>Object.assign(Object.create(null),{jzClass:f,refc:1,deleteAtRefc0:!1,storage:y||new A,keyPrefix:z(f),files:[],listeners:void 0}),N=s.kvvfs=Object.create(null);s.__isUnderTest&&(N.log=Object.assign(Object.create(null),{xOpen:!1,xClose:!1,xWrite:!1,xRead:!1,xSync:!1,xAccess:!1,xFileControl:!1,xRcrdRead:!1,xRcrdWrite:!1,xRcrdDelete:!1}));const p=function(f){var P;const y=h.rxJournalSuffix.test(f.jzClass)?f.jzClass.replace(h.rxJournalSuffix,""):f.jzClass+"-journal";(P=N==null?void 0:N.log)!=null&&P.xClose&&C("cleaning up storage handles [",f.jzClass,y,"]",f),delete h.storagePool[f.jzClass],delete h.storagePool[y],s.__isUnderTest||(delete f.storage,delete f.refc)},g=f=>h.storagePool[f.jzClass]=h.storagePool[f.jzClass+"-journal"]=f,T=".";h.storagePool=Object.assign(Object.create(null),{[T]:L(T)}),globalThis.Storage&&(globalThis.localStorage instanceof globalThis.Storage&&(h.storagePool.local=L("local",globalThis.localStorage)),globalThis.sessionStorage instanceof globalThis.Storage&&(h.storagePool.session=L("session",globalThis.sessionStorage))),h.builtinStorageNames=Object.keys(h.storagePool);const Q=f=>h.builtinStorageNames.indexOf(f)>-1;for(const f of Object.keys(h.storagePool)){const y=h.storagePool[f];h.storagePool[f+"-journal"]=y}h.setError=(f=void 0,y=n.SQLITE_ERROR)=>f?(h.lastError=f,f.resultCode|0||y):(delete h.lastError,0),h.popError=()=>{const f=h.lastError;return delete h.lastError,f};const te=f=>{Y("kvvfs.listener handler threw:",f)},de=S.exports.sqlite3__wasm_kvvfs_decode,ve=S.exports.sqlite3__wasm_kvvfs_encode,ge=async function(f,y,...P){var D,Z;try{y.keyPrefix&&P[0]&&(P[0]=P[0].replace(y.keyPrefix,""));let oe,he,_e,pe;for(const qe of y.listeners){const Oe=Object.create(null);Oe.storageName=y.jzClass,Oe.type=f,qe.decodePages;const Ne=qe.events[f];if(Ne){if(!qe.includeJournal&&P[0]==="jrnl")continue;if(f==="write"&&qe.decodePages&&+P[0]>0){if(Oe.data=[P[0]],pe!=null&&pe[P[0]]){Oe.data[1]=pe[P[0]];continue}oe??(oe=new TextEncoder("utf-8")),he??(he=h.memBuffer(10)),_e??(_e=h.memBuffer(11));const Ee=oe.encode(P[1]),je=S.heap8u();je.set(Ee,Number(he)),je[S.ptr.addn(he,Ee.length)]=0;const Ke=de(he,_e,h.buffer.n);if(Ke>0)pe??(pe=Object.create(null)),pe[P[0]]=Oe.data[1]=je.slice(Number(_e),S.ptr.addn(_e,Ke));else continue}else Oe.data=P.length?P.length===1?P[0]:P:void 0;try{(Z=(D=Ne(Oe))==null?void 0:D.catch)==null||Z.call(D,te)}catch(Ee){Y("notifyListeners [",y.jzClass,"]",f,Ee)}}}}catch(oe){te(oe)}},me=f=>typeof f=="string"?h.storagePool[f]:h.storagePool[S.cstrToJs(f)],d=S.exports.sqlite3__wasm_kvvfsMakeKey,l=(f,y,P)=>y&&f.keyPrefix?d(y,P):P,c=(f,y,P)=>S.cstrToJs(l(f,y,P)),m=f=>+f.storage.getItem(f.keyPrefix+"sz"),E=new Map,B={vfs:Object.create(null),ioDb:Object.create(null),ioJrnl:Object.create(null)},G=new n.sqlite3_vfs(V.$pVfs),se=new n.sqlite3_io_methods(V.$pIoDb),le=new n.sqlite3_io_methods(V.$pIoJrnl),Se=Object.create(null),ue=Object.assign(Object.create(null),{pFileHandles:E,cache:h,storageForZClass:me,KVVfsStorage:A,disablePageSizeChange:!0});N.log&&(N.internal=ue);const ke={recordHandler:{xRcrdRead:(f,y,P,D)=>{var Z;try{const oe=S.cstrToJs(f),he=me(oe);if(!he)return-1;const _e=c(he,f,y);(Z=N==null?void 0:N.log)!=null&&Z.xRcrdRead&&Y("xRcrdRead",oe,_e,D,he);const pe=he.storage.getItem(_e);if(pe===null)return-1;const qe=pe.length;if(D<=0)return qe;if(D===1)return S.poke(P,0),qe;D+1<qe&&J(n.SQLITE_RANGE,"xRcrdRead()",oe,_e,"input buffer is too small: need",qe,"but have",D);const Oe=h.memBuffer(0),Ne=S.heap8();let Ee;for(Ee=0;Ee<qe;++Ee)Ne[S.ptr.add(Oe,Ee)]=pe.codePointAt(Ee)&255;return Ne.copyWithin(Number(P),Number(Oe),S.ptr.addn(Oe,Ee)),Ne[S.ptr.add(P,qe)]=0,D}catch(oe){return b("kvrecordRead()",oe),h.setError(oe),-2}},xRcrdWrite:(f,y,P)=>{var D;try{const Z=me(f),oe=c(Z,f,y),he=S.cstrToJs(P);return(D=N==null?void 0:N.log)!=null&&D.xRcrdWrite&&Y("xRcrdWrite",oe,Z),Z.storage.setItem(oe,he),Z.listeners&&ge("write",Z,oe,he),0}catch(Z){return b("kvrecordWrite()",Z),h.setError(Z,n.SQLITE_IOERR)}},xRcrdDelete:(f,y)=>{var P;try{const D=me(f),Z=c(D,f,y);return(P=N==null?void 0:N.log)!=null&&P.xRcrdDelete&&Y("xRcrdDelete",Z,D),D.storage.removeItem(Z),D.listeners&&ge("delete",D,Z),0}catch(D){return b("kvrecordDelete()",D),h.setError(D,n.SQLITE_IOERR)}}},vfs:{xOpen:function(f,y,P,D,Z){var he,_e;h.popError();let oe;try{y||(oe=S.allocCString(""+P+"."+(Math.random()*1e5|0)),y=oe);const pe=S.cstrToJs(y);(he=N==null?void 0:N.log)!=null&&he.xOpen&&C("xOpen",pe,"flags =",D),w(pe,!0),D&(n.SQLITE_OPEN_MAIN_DB|n.SQLITE_OPEN_TEMP_DB|n.SQLITE_OPEN_TRANSIENT_DB)&&h.rxJournalSuffix.test(pe)&&J(n.SQLITE_ERROR,"DB files may not have a '-journal' suffix.");let qe=me(pe);!qe&&!(D&n.SQLITE_OPEN_CREATE)&&J(n.SQLITE_ERROR,"Storage not found:",pe);const Oe=B.vfs.xOpen(f,y,P,D,Z);if(Oe)return Oe;let Ne=!!(n.SQLITE_OPEN_DELETEONCLOSE&D);S.isPtr(arguments[1])&&n.sqlite3_uri_boolean(y,"delete-on-close",0)&&(Ne=!0);const Ee=new r(P);if(x.assert(Ee.$zClass,"Missing f.$zClass"),Ee.addOnDispose(oe),oe=void 0,qe)++qe.refc,qe.files.push(Ee),S.poke32(Z,D);else{S.poke32(Z,D|n.SQLITE_OPEN_CREATE),x.assert(!Ee.$isJournal,"Opening a journal before its db? "+pe);const je=pe.replace(h.rxJournalSuffix,"");qe=L(je),g(qe),qe.files.push(Ee),qe.deleteAtRefc0=Ne,(_e=N==null?void 0:N.log)!=null&&_e.xOpen&&C("xOpen installed storage handle [",je,je+"-journal","]",qe)}return E.set(P,{store:qe,file:Ee,jzClass:pe}),qe.listeners&&ge("open",qe,qe.files.length),0}catch(pe){return Y("xOpen:",pe),h.setError(pe)}finally{oe&&S.dealloc(oe)}},xDelete:function(f,y,P){h.popError();try{const D=S.cstrToJs(y);return h.rxJournalSuffix.test(D)&&Se.xRcrdDelete(y,h.zKeyJrnl),0}catch(D){return Y("xDelete",D),h.setError(D)}},xAccess:function(f,y,P,D){var Z;h.popError();try{const oe=me(y),he=(oe==null?void 0:oe.jzClass)||S.cstrToJs(y);if((Z=N==null?void 0:N.log)!=null&&Z.xAccess&&C("xAccess",he,"flags =",P,"*pResOut =",S.peek32(D),"store =",oe),!oe)try{w(he)}catch{return S.poke32(D,0),0}if(oe){const _e=oe.keyPrefix+(h.rxJournalSuffix.test(he)?"jrnl":"1"),pe=oe.storage.getItem(_e)?0:1;S.poke32(D,pe)}else S.poke32(D,0);return 0}catch(oe){return b("xAccess",oe),h.setError(oe)}},xRandomness:function(f,y,P){const D=S.heap8u();let Z=0;const oe=Number(P);for(;Z<y;++Z)D[oe+Z]=Math.random()*255e3&255;return y},xGetLastError:function(f,y,P){const D=h.popError();if(C("xGetLastError",D),D){const Z=S.scopedAllocPush();try{const[oe,he]=S.scopedAllocCString(D.message,!0);return S.cstrncpy(P,oe,y),he>y&&S.poke8(S.ptr.add(P,y,-1),0),C("set xGetLastError",D.message),D.resultCode|0||n.SQLITE_IOERR}catch{return n.SQLITE_NOMEM}finally{S.scopedAllocPop(Z)}}return 0}},ioDb:{xClose:function(f){var y;h.popError();try{const P=E.get(f);if((y=N==null?void 0:N.log)!=null&&y.xClose&&C("xClose",f,P),P){E.delete(f);const D=P.store;D.files=D.files.filter(Z=>Z!==P.file),--D.refc<=0&&D.deleteAtRefc0&&p(D),B.ioDb.xClose(f),P.file.dispose(),D.listeners&&ge("close",D,D.files.length)}return 0}catch(P){return b("xClose",P),h.setError(P)}},xFileControl:function(f,y,P){var D,Z,oe,he;h.popError();try{const _e=E.get(f);if(x.assert(_e,"Missing KVVfsFile handle"),(D=N==null?void 0:N.log)!=null&&D.xFileControl&&C("xFileControl",_e,"op =",y),y===n.SQLITE_FCNTL_PRAGMA&&ue.disablePageSizeChange){const qe=S.peekPtr(S.ptr.add(P,S.ptr.size));if(S.cstrToJs(qe)==="page_size"){(Z=N==null?void 0:N.log)!=null&&Z.xFileControl&&C("xFileControl pragma",S.cstrToJs(qe));const Oe=S.peekPtr(S.ptr.add(P,2*S.ptr.size));if(Oe)return(oe=N==null?void 0:N.log)!=null&&oe.xFileControl&&Y("xFileControl pragma",_e,"NOT setting page size to",S.cstrToJs(Oe)),_e.file.$szPage=-1,0;if(_e.file.$szPage>0)return(he=N==null?void 0:N.log)!=null&&he.xFileControl&&Y("xFileControl",_e,"getting page size",_e.file.$szPage),S.pokePtr(P,S.allocCString(""+_e.file.$szPage)),0}}const pe=B.ioDb.xFileControl(f,y,P);return pe==0&&n.SQLITE_FCNTL_SYNC===y&&_e.store.listeners&&ge("sync",_e.store,!1),pe}catch(_e){return b("xFileControl",_e),h.setError(_e)}},xSync:function(f,y){var P;h.popError();try{const D=E.get(f);(P=N==null?void 0:N.log)!=null&&P.xSync&&C("xSync",D),x.assert(D,"Missing KVVfsFile handle");const Z=B.ioDb.xSync(f,y);return Z==0&&D.store.listeners&&ge("sync",D.store,!0),Z}catch(D){return b("xSync",D),h.setError(D)}},xRead:function(f,y,P,D){var Z;h.popError();try{if((Z=N==null?void 0:N.log)!=null&&Z.xRead){const oe=E.get(f);x.assert(oe,"Missing KVVfsFile handle"),C("xRead",P,D,oe)}return B.ioDb.xRead(f,y,P,D)}catch(oe){return b("xRead",oe),h.setError(oe)}},xWrite:function(f,y,P,D){var Z;h.popError();try{if((Z=N==null?void 0:N.log)!=null&&Z.xWrite){const oe=E.get(f);x.assert(oe,"Missing KVVfsFile handle"),C("xWrite",P,D,oe)}return B.ioDb.xWrite(f,y,P,D)}catch(oe){return b("xWrite",oe),h.setError(oe)}}},ioJrnl:{xClose:!0}};C("pVfs and friends",G,se,le,V,n.sqlite3_file.structInfo,r.structInfo);try{x.assert(h.buffer.n>1024*129,"Heap buffer is not large enough");for(const f of Object.entries(ke.recordHandler)){const y=f[0],P=f[1];Se[y]=P,V[V.memberKey(y)]=S.installFunction(V.memberSignature(y),P)}for(const f of Object.entries(ke.vfs)){const y=f[0],P=f[1],D=G.memberKey(y),Z=G.structInfo.members[y]||x.toss("Missing pVfs.structInfo[",y,"]");B.vfs[y]=S.functionEntry(G[D]),G[D]=S.installFunction(Z.signature,P)}for(const f of Object.entries(ke.ioDb)){const y=f[0],P=f[1],D=se.memberKey(y);B.ioDb[y]=S.functionEntry(se[D])||x.toss("Missing native pIoDb[",D,"]"),se[D]=S.installFunction(se.memberSignature(y),P)}for(const f of Object.entries(ke.ioJrnl)){const y=f[0],P=f[1],D=le.memberKey(y);B.ioJrnl[y]=S.functionEntry(le[D])||x.toss("Missing native pIoJrnl[",D,"]"),P===!0?le[D]=se[D]||x.toss("Missing copied pIoDb[",D,"]"):le[D]=S.installFunction(le.memberSignature(y),P)}}finally{V.dispose(),G.dispose(),se.dispose(),le.dispose()}const ye=function f(y){if(y==="")return f("local")+f("session");const P=me(y);if(!P)return 0;P.files.length&&(globalThis.localStorage===P.storage||globalThis.sessionStorage===P.storage||J(n.SQLITE_ACCESS,"Cannot clear in-use database storage."));const D=P.storage,Z=[];let oe,he=D.length;for(oe=0;oe<he;++oe){const _e=D.key(oe);(!P.keyPrefix||_e.startsWith(P.keyPrefix))&&Z.push(_e)}return Z.forEach(_e=>D.removeItem(_e)),Z.length},F=function f(y){if(y==="")return f("local")+f("session");const P=me(y);if(!P)return 0;const D=P.storage;let Z,oe=0;for(Z=0;Z<D.length;++Z){const he=D.key(Z);(!P.keyPrefix||he.startsWith(P.keyPrefix))&&(oe+=he.length,oe+=D.getItem(he).length)}return oe*2},W=function(...y){var Ne;let P;y.length===1&&typeof y[0]=="object"?P=y[0]:y.length&&(P=Object.assign(Object.create(null),{name:y[0]}));const D=P?me(P.name):null;D||J(n.SQLITE_NOTFOUND,"There is no kvvfs storage named",P==null?void 0:P.name);const Z=D.storage,oe=Object.assign(Object.create(null),{name:D.jzClass,timestamp:Date.now(),pages:[]}),he=Object.create(null),_e=D.keyPrefix,pe=_e?/^kvvfs-[^-]+-(\w+)/:void 0;let qe=0,Oe=Z.length;for(;qe<Oe;++qe){const Ee=Z.key(qe);if(!_e||Ee.startsWith(_e)){let je=((Ne=_e?pe.exec(Ee):void 0)==null?void 0:Ne[1])??Ee;switch(je){case"jrnl":P.includeJournal&&(oe.journal=Z.getItem(Ee));break;case"sz":oe.size=+Z.getItem(Ee);break;default:if(je=+je,(!x.isInt32(je)||je<=0)&&J(n.SQLITE_RANGE,"Malformed kvvfs key: "+Ee),P.decodePages){const Ke=Z.getItem(Ee),it=Ke.length,wt=h.memBuffer(0),pt=h.memBuffer(1),Qe=S.heap8u();let q=0;for(;q<it;++q)Qe[S.ptr.add(wt,q)]=Ke.codePointAt(q)&255;Qe[S.ptr.add(wt,q)]=0;const U=de(wt,pt,h.buffer.n);he[je]=Qe.slice(Number(pt),S.ptr.addn(pt,U))}else he[je]=Z.getItem(Ee);break}}}return P.decodePages&&h.memBufferFree(1),Object.keys(he).map(Ee=>+Ee).sort().forEach(Ee=>oe.pages.push(he[Ee])),oe},$=function(f,y=!1){!(f!=null&&f.timestamp)||!f.name||f.size===void 0||!Array.isArray(f.pages)?J(n.SQLITE_MISUSE,"Malformed export object."):(!f.size||f.size!==(f.size|0)||f.size>=2147483647)&&J(n.SQLITE_RANGE,"Invalid db size: "+f.size),w(f.name);let P=me(f.name);const D=!P;P?(y?!P.files||!P.jzClass?J(n.SQLITE_ERROR,"Internal storage object",f.name,"seems to be malformed."):P.files.length&&J(n.SQLITE_IOERR_ACCESS,"Cannot import db storage while it is in use."):J(n.SQLITE_ACCESS,"Storage '"+f.name+"' already exists and","overwrite was not specified."),ye(f.name)):P=L(f.name);const Z=z(f.name);let oe;try{const he=P.storage;he.setItem(Z+"sz",f.size),f.journal&&he.setItem(Z+"jrnl",f.journal),f.pages[0]instanceof Uint8Array?f.pages.forEach((_e,pe)=>{const qe=_e.length;oe??(oe=h.memBuffer(1));const Oe=h.memBuffer(0),Ne=S.heap8u();Ne.set(_e,Number(Oe)),Ne[S.ptr.addn(Oe,qe)]=0;const Ee=ve(Oe,qe,oe);x.assert(Ee<h.buffer.n,"Impossibly long output - possibly smashed the heap"),x.assert(S.peek8(S.ptr.add(oe,Ee))===0,"Expecting NUL-terminated encoded output");const je=S.cstrToJs(oe);he.setItem(Z+(pe+1),je)}):f.pages[0]&&f.pages.forEach((_e,pe)=>he.setItem(Z+(pe+1),_e)),D&&g(P)}catch{if(!D)try{ye(f.name)}catch{}}finally{oe&&h.memBufferFree(1)}return this},ee=function(f){let y=me(f);if(y){++y.refc;return}w(f),g(L(f))},X=function(f){const y=me(f);return!y||O(y.jzClass)||Q(y.jzClass)||h.rxJournalSuffix.test(f)?!1:y.refc>y.files.length||y.files.length===0?(--y.refc<=0&&p(y),!0):!1},fe=function(f){(!f||typeof f!="object")&&J(n.SQLITE_MISUSE,"Expecting a listener object.");let y=me(f.storage);y||(f.storage&&f.reserve?(ee(f.storage),y=me(f.storage),x.assert(y,"Unexpectedly cannot fetch reserved storage "+f.storage)):J(n.SQLITE_NOTFOUND,"No such storage:",f.storage)),f.events&&(y.listeners??(y.listeners=[])).push(f)},Ie=function(f){const y=me(f==null?void 0:f.storage);if(y!=null&&y.listeners&&f.events){const P=y.listeners.length;y.listeners=y.listeners.filter(Z=>Z!==f);const D=P>y.listeners.length;return y.listeners.length||(y.listeners=void 0),D}return!1};if(s.kvvfs.reserve=ee,s.kvvfs.import=$,s.kvvfs.export=W,s.kvvfs.unlink=X,s.kvvfs.listen=fe,s.kvvfs.unlisten=Ie,s.kvvfs.exists=f=>!!me(f),s.kvvfs.estimateSize=F,s.kvvfs.clear=ye,globalThis.Storage&&(n.sqlite3_js_kvvfs_size=(f="")=>F(f),n.sqlite3_js_kvvfs_clear=(f="")=>ye(f)),(K=s.oo1)!=null&&K.DB){const f=s.oo1.DB;s.oo1.JsStorageDb=function(P=s.oo1.JsStorageDb.defaultStorageName){const D=f.dbCtorHelper.normalizeArgs(...arguments);switch(D.vfs="kvvfs",D.filename){case":sessionStorage:":D.filename="session";break;case":localStorage:":D.filename="local";break}const Z=/(file:(\/\/)?)([^?]+)/.exec(D.filename);w(Z?Z[3]:D.filename),f.dbCtorHelper.call(this,D)},s.oo1.JsStorageDb.defaultStorageName=h.storagePool.session?"session":T;const y=s.oo1.JsStorageDb;y.prototype=Object.create(f.prototype),y.clearStorage=ye,y.prototype.clearStorage=function(){return y.clearStorage(this.affirmOpen().dbFilename(),!0)},y.storageSize=F,y.prototype.storageSize=function(){return y.storageSize(this.affirmOpen().dbFilename(),!0)}}if(s.__isUnderTest&&s.vtab){const f=Object.assign(Object.create(null),{rowid:{type:"INTEGER"},name:{type:"TEXT"},nRef:{type:"INTEGER"},nOpen:{type:"INTEGER"},isTransient:{type:"INTEGER"},dbSize:{type:"INTEGER"}});Object.keys(f).forEach((he,_e)=>f[he].colId=_e);const y=s.vtab,P=Object.assign(Object.create(null),{row:function(){return h.storagePool[this.names[this.rowid]]}});Object.assign(Object.create(P),{rowid:0,names:Object.keys(h.storagePool).filter(he=>!h.rxJournalSuffix.test(he))});const D=function(he,_e){const pe=he instanceof n.sqlite3_vtab_cursor?he:y.xCursor.get(he);return(_e||!pe.vTabState)&&(pe.vTabState=Object.assign(Object.create(P),{rowid:0,names:Object.keys(h.storagePool).filter(qe=>!h.rxJournalSuffix.test(qe))})),pe.vTabState},Z=()=>{},oe=function he(){return he.mod??(he.mod=new s.capi.sqlite3_module().setupModule({catchExceptions:!0,methods:{xConnect:function(_e,pe,qe,Oe,Ne,Ee){try{const je=[];Object.keys(f).forEach(it=>{je.push(it+" "+f[it].type)});const Ke=n.sqlite3_declare_vtab(_e,"CREATE TABLE ignored("+je.join(",")+")");if(Ke===0){const it=y.xVtab.create(Ne);x.assert(it===y.xVtab.get(S.peekPtr(Ne)),"output pointer check failed")}return Ke}catch(je){return y.xErrror("xConnect",je,n.SQLITE_ERROR)}},xCreate:S.ptr.null,xDisconnect:function(_e){return y.xVtab.dispose(_e),0},xOpen:function(_e,pe){return y.xCursor.create(pe),0},xClose:function(_e){const pe=y.xCursor.unget(_e);return delete pe.vTabState,pe.dispose(),0},xNext:function(_e){const pe=y.xCursor.get(_e);return++D(pe).rowid,0},xColumn:function(_e,pe,qe){const Oe=D(_e),Ne=Oe.row();switch(x.assert(Ne,"Unexpected xColumn call"),qe){case f.rowid.colId:n.sqlite3_result_int(pe,Oe.rowid);break;case f.name.colId:n.sqlite3_result_text(pe,Ne.jzClass,-1,n.SQLITE_TRANSIENT);break;case f.nRef.colId:n.sqlite3_result_int(pe,Ne.refc);break;case f.nOpen.colId:n.sqlite3_result_int(pe,Ne.files.length);break;case f.isTransient.colId:n.sqlite3_result_int(pe,!!Ne.deleteAtRefc0);break;case f.dbSize.colId:n.sqlite3_result_int(pe,m(Ne));break;default:return n.sqlite3_result_error(pe,"Invalid column id: "+qe),n.SQLITE_RANGE}return 0},xRowid:function(_e,pe){const qe=D(_e);return y.xRowid(pe,qe.rowid),0},xEof:function(_e){const pe=D(_e);return Z("xEof?="+!pe.row(),...arguments),!pe.row()},xFilter:function(_e,pe,qe,Oe,Ne){return D(_e,!0),0},xBestIndex:function(_e,pe){const qe=new n.sqlite3_index_info(pe);return qe.$estimatedRows=h.storagePool.size,qe.$estimatedCost=1,qe.dispose(),0}}}))};s.kvvfs.create_module=function(he,_e="sqlite_kvvfs"){return n.sqlite3_create_module(he,_e,oe(),S.ptr.null)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(s){const n=function i(r){var x;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((x=navigator==null?void 0:navigator.storage)!=null&&x.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!r||typeof r!="object")&&(r=Object.create(null));const u=new URL(globalThis.location.href).searchParams;return u.has("opfs-disable")?Promise.resolve(s):(r.verbose===void 0&&(r.verbose=u.has("opfs-verbose")?+u.get("opfs-verbose")||2:1),r.sanityChecks===void 0&&(r.sanityChecks=u.has("opfs-sanity-check")),r.proxyUri===void 0&&(r.proxyUri=i.defaultProxyUri),typeof r.proxyUri=="function"&&(r.proxyUri=r.proxyUri()),new Promise(function(S,J){const R=[s.config.error,s.config.warn,s.config.log],V=(F,...W)=>{r.verbose>F&&R[F]("OPFS syncer:",...W)},h=(...F)=>V(2,...F),j=(...F)=>V(1,...F),C=(...F)=>V(0,...F),Y=s.util.toss,b=s.capi,A=s.util,O=s.wasm,z=b.sqlite3_vfs,w=b.sqlite3_file,L=b.sqlite3_io_methods,N=Object.create(null),p=()=>{var F;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((F=navigator==null?void 0:navigator.storage)==null?void 0:F.getDirectory)};N.metrics={dump:function(){let F,W=0,$=0,ee=0;for(F in d.opIds){const X=l[F];W+=X.count,$+=X.time,ee+=X.wait,X.avgTime=X.count&&X.time?X.time/X.count:0,X.avgWait=X.count&&X.wait?X.wait/X.count:0}s.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",l,`
Total of`,W,"op(s) for",$,"ms (incl. "+ee+" ms of waiting on the async side)"),s.config.log("Serialization metrics:",l.s11n),ve.postMessage({type:"opfs-async-metrics"})},reset:function(){let F;const W=ee=>ee.count=ee.time=ee.wait=0;for(F in d.opIds)W(l[F]=Object.create(null));let $=l.s11n=Object.create(null);$=$.serialize=Object.create(null),$.count=$.time=0,$=l.s11n.deserialize=Object.create(null),$.count=$.time=0}};const g=new L,T=new z().addOnDispose(()=>g.dispose());let Q;const te=F=>(Q=!0,T.dispose(),J(F)),de=()=>(Q=!1,S(s)),ve=new Worker(new URL(r.proxyUri,self.location.href));setTimeout(()=>{Q===void 0&&te(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),ve._originalOnError=ve.onerror,ve.onerror=function(F){C("Error initializing OPFS asyncer:",F),te(new Error("Loading OPFS async Worker failed for unknown reasons."))};const ge=b.sqlite3_vfs_find(null),me=ge?new z(ge):null;g.$iVersion=1,T.$iVersion=2,T.$szOsFile=b.sqlite3_file.structInfo.sizeof,T.$mxPathname=1024,T.$zName=O.allocCString("opfs"),T.$xDlOpen=T.$xDlError=T.$xDlSym=T.$xDlClose=null,T.addOnDispose("$zName",T.$zName,"cleanup default VFS wrapper",()=>me?me.dispose():null);const d=Object.create(null);d.verbose=r.verbose,d.littleEndian=(()=>{const F=new ArrayBuffer(2);return new DataView(F).setInt16(0,256,!0),new Int16Array(F)[0]===256})(),d.asyncIdleWaitTime=150,d.asyncS11nExceptions=1,d.fileBufferSize=65536,d.sabS11nOffset=d.fileBufferSize,d.sabS11nSize=T.$mxPathname*2,d.sabIO=new SharedArrayBuffer(d.fileBufferSize+d.sabS11nSize),d.opIds=Object.create(null);const l=Object.create(null);{let F=0;d.opIds.whichOp=F++,d.opIds.rc=F++,d.opIds.xAccess=F++,d.opIds.xClose=F++,d.opIds.xDelete=F++,d.opIds.xDeleteNoWait=F++,d.opIds.xFileSize=F++,d.opIds.xLock=F++,d.opIds.xOpen=F++,d.opIds.xRead=F++,d.opIds.xSleep=F++,d.opIds.xSync=F++,d.opIds.xTruncate=F++,d.opIds.xUnlock=F++,d.opIds.xWrite=F++,d.opIds.mkdir=F++,d.opIds["opfs-async-metrics"]=F++,d.opIds["opfs-async-shutdown"]=F++,d.opIds.retry=F++,d.sabOP=new SharedArrayBuffer(F*4),N.metrics.reset()}d.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(F=>{(d.sq3Codes[F]=b[F])===void 0&&Y("Maintenance required: not found:",F)}),d.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const c=(F,...W)=>{const $=d.opIds[F]||Y("Invalid op ID:",F);d.s11n.serialize(...W),Atomics.store(d.sabOPView,d.opIds.rc,-1),Atomics.store(d.sabOPView,d.opIds.whichOp,$),Atomics.notify(d.sabOPView,d.opIds.whichOp);const ee=performance.now();for(;Atomics.wait(d.sabOPView,d.opIds.rc,-1)!=="not-equal";);const X=Atomics.load(d.sabOPView,d.opIds.rc);if(l[F].wait+=performance.now()-ee,X&&d.asyncS11nExceptions){const fe=d.s11n.deserialize();fe&&C(F+"() async error:",...fe)}return X};N.debug={asyncShutdown:()=>{j("Shutting down OPFS async listener. The OPFS VFS will no longer work."),c("opfs-async-shutdown")},asyncRestart:()=>{j("Attempting to restart OPFS VFS async listener. Might work, might not."),ve.postMessage({type:"opfs-async-restart"})}};const m=()=>{if(d.s11n)return d.s11n;const F=new TextDecoder,W=new TextEncoder("utf-8"),$=new Uint8Array(d.sabIO,d.sabS11nOffset,d.sabS11nSize),ee=new DataView(d.sabIO,d.sabS11nOffset,d.sabS11nSize);d.s11n=Object.create(null);const X=Object.create(null);X.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},X.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},X.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},X.string={id:4};const fe=ne=>X[typeof ne]||Y("Maintenance required: this value type cannot be serialized.",ne),Ie=ne=>{switch(ne){case X.number.id:return X.number;case X.bigint.id:return X.bigint;case X.boolean.id:return X.boolean;case X.string.id:return X.string;default:Y("Invalid type ID:",ne)}};return d.s11n.deserialize=function(ne=!1){++l.s11n.deserialize.count;const re=performance.now(),I=$[0],M=I?[]:null;if(I){const K=[];let f=1,y,P,D;for(y=0;y<I;++y,++f)K.push(Ie($[f]));for(y=0;y<I;++y){const Z=K[y];Z.getter?(D=ee[Z.getter](f,d.littleEndian),f+=Z.size):(P=ee.getInt32(f,d.littleEndian),f+=4,D=F.decode($.slice(f,f+P)),f+=P),M.push(D)}}return ne&&($[0]=0),l.s11n.deserialize.time+=performance.now()-re,M},d.s11n.serialize=function(...ne){const re=performance.now();if(++l.s11n.serialize.count,ne.length){const I=[];let M=0,K=1;for($[0]=ne.length&255;M<ne.length;++M,++K)I.push(fe(ne[M])),$[K]=I[M].id;for(M=0;M<ne.length;++M){const f=I[M];if(f.setter)ee[f.setter](K,ne[M],d.littleEndian),K+=f.size;else{const y=W.encode(ne[M]);ee.setInt32(K,y.byteLength,d.littleEndian),K+=4,$.set(y,K),K+=y.byteLength}}}else $[0]=0;l.s11n.serialize.time+=performance.now()-re},d.s11n},E=function F(W=16){F._chars||(F._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",F._n=F._chars.length);const $=[];let ee=0;for(;ee<W;++ee){const X=Math.random()*(F._n*64)%F._n|0;$[ee]=F._chars[X]}return $.join("")},B=Object.create(null),G=Object.create(null);G.op=void 0,G.start=void 0;const se=F=>{G.start=performance.now(),G.op=F,++l[F].count},le=()=>l[G.op].time+=performance.now()-G.start,Se={xCheckReservedLock:function(F,W){return O.poke(W,0,"i32"),0},xClose:function(F){se("xClose");let W=0;const $=B[F];return $&&(delete B[F],W=c("xClose",F),$.sq3File&&$.sq3File.dispose()),le(),W},xDeviceCharacteristics:function(F){return b.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(F,W,$){return b.SQLITE_NOTFOUND},xFileSize:function(F,W){se("xFileSize");let $=c("xFileSize",F);if($==0)try{const ee=d.s11n.deserialize()[0];O.poke(W,ee,"i64")}catch(ee){C("Unexpected error reading xFileSize() result:",ee),$=d.sq3Codes.SQLITE_IOERR}return le(),$},xLock:function(F,W){se("xLock");const $=B[F];let ee=0;return $.lockType?$.lockType=W:(ee=c("xLock",F,W),ee===0&&($.lockType=W)),le(),ee},xRead:function(F,W,$,ee){se("xRead");const X=B[F];let fe;try{fe=c("xRead",F,$,Number(ee)),(fe===0||b.SQLITE_IOERR_SHORT_READ===fe)&&O.heap8u().set(X.sabView.subarray(0,$),Number(W))}catch(Ie){C("xRead(",arguments,") failed:",Ie,X),fe=b.SQLITE_IOERR_READ}return le(),fe},xSync:function(F,W){se("xSync"),++l.xSync.count;const $=c("xSync",F,W);return le(),$},xTruncate:function(F,W){se("xTruncate");const $=c("xTruncate",F,Number(W));return le(),$},xUnlock:function(F,W){se("xUnlock");const $=B[F];let ee=0;return b.SQLITE_LOCK_NONE===W&&$.lockType&&(ee=c("xUnlock",F,W)),ee===0&&($.lockType=W),le(),ee},xWrite:function(F,W,$,ee){se("xWrite");const X=B[F];let fe;try{X.sabView.set(O.heap8u().subarray(Number(W),Number(W)+$)),fe=c("xWrite",F,$,Number(ee))}catch(Ie){C("xWrite(",arguments,") failed:",Ie,X),fe=b.SQLITE_IOERR_WRITE}return le(),fe}},ue={xAccess:function(F,W,$,ee){se("xAccess");const X=c("xAccess",O.cstrToJs(W));return O.poke(ee,X?0:1,"i32"),le(),0},xCurrentTime:function(F,W){return O.poke(W,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(F,W){return O.poke(W,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(F,W,$){se("xDelete");const ee=c("xDelete",O.cstrToJs(W),$,!1);return le(),ee},xFullPathname:function(F,W,$,ee){return O.cstrncpy(ee,W,$)<$?0:b.SQLITE_CANTOPEN},xGetLastError:function(F,W,$){return j("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(W,$,ee,X,fe){se("xOpen");let Ie=0;$===0?$=E():O.isPtr($)&&(b.sqlite3_uri_boolean($,"opfs-unlock-asap",0)&&(Ie|=d.opfsFlags.OPFS_UNLOCK_ASAP),b.sqlite3_uri_boolean($,"delete-before-open",0)&&(Ie|=d.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),$=O.cstrToJs($));const ne=Object.create(null);ne.fid=ee,ne.filename=$,ne.sab=new SharedArrayBuffer(d.fileBufferSize),ne.flags=X,ne.readOnly=!(b.SQLITE_OPEN_CREATE&X)&&!!(X&b.SQLITE_OPEN_READONLY);const re=c("xOpen",ee,$,X,Ie);return re||(ne.readOnly&&O.poke(fe,b.SQLITE_OPEN_READONLY,"i32"),B[ee]=ne,ne.sabView=d.sabFileBufView,ne.sq3File=new w(ee),ne.sq3File.$pMethods=g.pointer,ne.lockType=b.SQLITE_LOCK_NONE),le(),re}};me&&(T.$xRandomness=me.$xRandomness,T.$xSleep=me.$xSleep),T.$xRandomness||(ue.xRandomness=function(F,W,$){const ee=O.heap8u();let X=0;const fe=Number($);for(;X<W;++X)ee[fe+X]=Math.random()*255e3&255;return X}),T.$xSleep||(ue.xSleep=function(F,W){return Atomics.wait(d.sabOPView,d.opIds.xSleep,0,W),0}),N.getResolvedPath=function(F,W){const $=new URL(F,"file://irrelevant").pathname;return W?$.split("/").filter(ee=>!!ee):$},N.getDirForFilename=async function(W,$=!1){const ee=N.getResolvedPath(W,!0),X=ee.pop();let fe=N.rootDirectory;for(const Ie of ee)Ie&&(fe=await fe.getDirectoryHandle(Ie,{create:!!$}));return[fe,X]},N.mkdir=async function(F){try{return await N.getDirForFilename(F+"/filepart",!0),!0}catch{return!1}},N.entryExists=async function(F){try{const[W,$]=await N.getDirForFilename(F);return await W.getFileHandle($),!0}catch{return!1}},N.randomFilename=E,N.treeList=async function(){const F=async function $(ee,X){X.name=ee.name,X.dirs=[],X.files=[];for await(const fe of ee.values())if(fe.kind==="directory"){const Ie=Object.create(null);X.dirs.push(Ie),await $(fe,Ie)}else X.files.push(fe.name)},W=Object.create(null);return await F(N.rootDirectory,W),W},N.rmfr=async function(){const F=N.rootDirectory,W={recurse:!0};for await(const $ of F.values())F.removeEntry($.name,W)},N.unlink=async function(F,W=!1,$=!1){try{const[ee,X]=await N.getDirForFilename(F,!1);return await ee.removeEntry(X,{recursive:W}),!0}catch(ee){if($)throw new Error("unlink(",arguments[0],") failed: "+ee.message,{cause:ee});return!1}},N.traverse=async function(F){const W={recursive:!0,directory:N.rootDirectory};typeof F=="function"&&(F={callback:F}),F=Object.assign(W,F||{}),async function $(ee,X){for await(const fe of ee.values()){if(F.callback(fe,ee,X)===!1)return!1;if(F.recursive&&fe.kind==="directory"&&await $(fe,X+1)===!1)break}}(F.directory,0)};const ke=async function(F,W){const[$,ee]=await N.getDirForFilename(F,!0);let X=await(await $.getFileHandle(ee,{create:!0})).createSyncAccessHandle(),fe=0,Ie,ne=!1;try{for(X.truncate(0);(Ie=await W())!==void 0;)Ie instanceof ArrayBuffer&&(Ie=new Uint8Array(Ie)),!ne&&fe===0&&Ie.byteLength>=15&&(A.affirmDbHeader(Ie),ne=!0),X.write(Ie,{at:fe}),fe+=Ie.byteLength;if((fe<512||fe%512!==0)&&Y("Input size",fe,"is not correct for an SQLite database."),!ne){const re=new Uint8Array(20);X.read(re,{at:0}),A.affirmDbHeader(re)}return X.write(new Uint8Array([1,1]),{at:18}),fe}catch(re){throw await X.close(),X=void 0,await $.removeEntry(ee).catch(()=>{}),re}finally{X&&await X.close()}};if(N.importDb=async function(F,W){if(W instanceof Function)return ke(F,W);W instanceof ArrayBuffer&&(W=new Uint8Array(W)),A.affirmIsDb(W);const $=W.byteLength,[ee,X]=await N.getDirForFilename(F,!0);let fe,Ie=0;try{return fe=await(await ee.getFileHandle(X,{create:!0})).createSyncAccessHandle(),fe.truncate(0),Ie=fe.write(W,{at:0}),Ie!=$&&Y("Expected to write "+$+" bytes but wrote "+Ie+"."),fe.write(new Uint8Array([1,1]),{at:18}),Ie}catch(ne){throw fe&&(await fe.close(),fe=void 0),await ee.removeEntry(X).catch(()=>{}),ne}finally{fe&&await fe.close()}},s.oo1){const F=function(...W){const $=s.oo1.DB.dbCtorHelper.normalizeArgs(...W);$.vfs=T.$zName,s.oo1.DB.dbCtorHelper.call(this,$)};F.prototype=Object.create(s.oo1.DB.prototype),s.oo1.OpfsDb=F,F.importDb=N.importDb,s.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(T.pointer,function(W,$){$.capi.sqlite3_busy_timeout(W,1e4)})}const ye=function(){const F=O.scopedAllocPush(),W=new w;try{const $=W.pointer,ee=b.SQLITE_OPEN_CREATE|b.SQLITE_OPEN_READWRITE|b.SQLITE_OPEN_MAIN_DB,X=O.scopedAlloc(8),fe="/sanity/check/file"+E(8),Ie=O.scopedAllocCString(fe);let ne;if(d.s11n.serialize("This is  string."),ne=d.s11n.deserialize(),h("deserialize() says:",ne),ne[0]!=="This is  string."&&Y("String d13n error."),ue.xAccess(T.pointer,Ie,0,X),ne=O.peek(X,"i32"),h("xAccess(",fe,") exists ?=",ne),ne=ue.xOpen(T.pointer,Ie,$,ee,X),h("open rc =",ne,"state.sabOPView[xOpen] =",d.sabOPView[d.opIds.xOpen]),ne!==0){C("open failed with code",ne);return}ue.xAccess(T.pointer,Ie,0,X),ne=O.peek(X,"i32"),ne||Y("xAccess() failed to detect file."),ne=Se.xSync(W.pointer,0),ne&&Y("sync failed w/ rc",ne),ne=Se.xTruncate(W.pointer,1024),ne&&Y("truncate failed w/ rc",ne),O.poke(X,0,"i64"),ne=Se.xFileSize(W.pointer,X),ne&&Y("xFileSize failed w/ rc",ne),h("xFileSize says:",O.peek(X,"i64")),ne=Se.xWrite(W.pointer,Ie,10,1),ne&&Y("xWrite() failed!");const re=O.scopedAlloc(16);ne=Se.xRead(W.pointer,re,6,2),O.poke(re+6,0);let I=O.cstrToJs(re);h("xRead() got:",I),I!=="sanity"&&Y("Unexpected xRead() value."),ue.xSleep&&(h("xSleep()ing before close()ing..."),ue.xSleep(T.pointer,2e3),h("waking up from xSleep()")),ne=Se.xClose($),h("xClose rc =",ne,"sabOPView =",d.sabOPView),h("Deleting file:",fe),ue.xDelete(T.pointer,Ie,4660),ue.xAccess(T.pointer,Ie,0,X),ne=O.peek(X,"i32"),ne&&Y("Expecting 0 from xAccess(",fe,") after xDelete()."),j("End of OPFS sanity checks.")}finally{W.dispose(),O.scopedAllocPop(F)}};ve.onmessage=function({data:F}){switch(F.type){case"opfs-unavailable":te(new Error(F.payload.join(" ")));break;case"opfs-async-loaded":ve.postMessage({type:"opfs-async-init",args:d});break;case"opfs-async-inited":if(Q===!0)break;try{s.vfs.installVfs({io:{struct:g,methods:Se},vfs:{struct:T,methods:ue}}),d.sabOPView=new Int32Array(d.sabOP),d.sabFileBufView=new Uint8Array(d.sabIO,0,d.fileBufferSize),d.sabS11nView=new Uint8Array(d.sabIO,d.sabS11nOffset,d.sabS11nSize),m(),r.sanityChecks&&(j("Running sanity checks because of opfs-sanity-check URL arg..."),ye()),p()?navigator.storage.getDirectory().then(W=>{ve.onerror=ve._originalOnError,delete ve._originalOnError,s.opfs=N,N.rootDirectory=W,h("End of OPFS sqlite3_vfs setup.",T),de()}).catch(te):de()}catch(W){C(W),te(W)}break;default:{const W="Unexpected message from the OPFS async worker: "+JSON.stringify(F);C(W),te(new Error(W));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async i=>{var r;try{let u=n.defaultProxyUri;return(r=i==null?void 0:i.scriptInfo)!=null&&r.sqlite3Dir&&(n.defaultProxyUri=i.scriptInfo.sqlite3Dir+u),n().catch(x=>{i.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",x.message)})}catch(u){return i.config.error("installOpfsVfs() exception:",u),Promise.reject(u)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(s){var se,le,Se,ue,ke,ye,F,W,$,ee,X,fe,Ft,ne;const n=s.util.toss,i=s.util.toss3,r=Object.create(null),u=s.capi,x=s.util,S=s.wasm,J=4096,R=512,V=4,h=8,j=R+V,C=R,Y=j,b=J,A=u.SQLITE_OPEN_MAIN_DB|u.SQLITE_OPEN_MAIN_JOURNAL|u.SQLITE_OPEN_SUPER_JOURNAL|u.SQLITE_OPEN_WAL,O=u.SQLITE_OPEN_MEMORY,z=".opaque",w=()=>Math.random().toString(36).slice(2),L=new TextDecoder,N=new TextEncoder,p=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),g=[s.config.error,s.config.warn,s.config.log];s.config.log;const T=s.config.warn;s.config.error;const Q=new Map,te=re=>Q.get(re),de=(re,I)=>{I?Q.set(re,I):Q.delete(re)},ve=new Map,ge=re=>ve.get(re),me=(re,I)=>{I?ve.set(re,I):ve.delete(re)},d={xCheckReservedLock:function(re,I){const M=ge(re);return M.log("xCheckReservedLock"),M.storeErr(),S.poke32(I,1),0},xClose:function(re){const I=ge(re);I.storeErr();const M=I.getOFileForS3File(re);if(M)try{I.log(`xClose ${M.path}`),I.mapS3FileToOFile(re,!1),M.sah.flush(),M.flags&u.SQLITE_OPEN_DELETEONCLOSE&&I.deletePath(M.path)}catch(K){return I.storeErr(K,u.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(re){return u.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(re,I,M){return u.SQLITE_NOTFOUND},xFileSize:function(re,I){const M=ge(re);M.log("xFileSize");const K=M.getOFileForS3File(re).sah.getSize()-b;return S.poke64(I,BigInt(K)),0},xLock:function(re,I){const M=ge(re);M.log(`xLock ${I}`),M.storeErr();const K=M.getOFileForS3File(re);return K.lockType=I,0},xRead:function(re,I,M,K){const f=ge(re);f.storeErr();const y=f.getOFileForS3File(re);f.log(`xRead ${y.path} ${M} @ ${K}`);try{const P=y.sah.read(S.heap8u().subarray(Number(I),Number(I)+M),{at:b+Number(K)});return P<M?(S.heap8u().fill(0,Number(I)+P,Number(I)+M),u.SQLITE_IOERR_SHORT_READ):0}catch(P){return f.storeErr(P,u.SQLITE_IOERR)}},xSectorSize:function(re){return J},xSync:function(re,I){const M=ge(re);M.log(`xSync ${I}`),M.storeErr();const K=M.getOFileForS3File(re);try{return K.sah.flush(),0}catch(f){return M.storeErr(f,u.SQLITE_IOERR)}},xTruncate:function(re,I){const M=ge(re);M.log(`xTruncate ${I}`),M.storeErr();const K=M.getOFileForS3File(re);try{return K.sah.truncate(b+Number(I)),0}catch(f){return M.storeErr(f,u.SQLITE_IOERR)}},xUnlock:function(re,I){const M=ge(re);M.log("xUnlock");const K=M.getOFileForS3File(re);return K.lockType=I,0},xWrite:function(re,I,M,K){const f=ge(re);f.storeErr();const y=f.getOFileForS3File(re);f.log(`xWrite ${y.path} ${M} ${K}`);try{return M===y.sah.write(S.heap8u().subarray(Number(I),Number(I)+M),{at:b+Number(K)})?0:n("Unknown write() failure.")}catch(P){return f.storeErr(P,u.SQLITE_IOERR)}}},l=new u.sqlite3_io_methods;l.$iVersion=1,s.vfs.installVfs({io:{struct:l,methods:d}});const c={xAccess:function(re,I,M,K){const f=te(re);f.storeErr();try{const y=f.getPath(I);S.poke32(K,f.hasFilename(y)?1:0)}catch{S.poke32(K,0)}return 0},xCurrentTime:function(re,I){return S.poke(I,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(re,I){return S.poke(I,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(re,I,M){const K=te(re);K.log(`xDelete ${S.cstrToJs(I)}`),K.storeErr();try{return K.deletePath(K.getPath(I)),0}catch(f){return K.storeErr(f),u.SQLITE_IOERR_DELETE}},xFullPathname:function(re,I,M,K){return S.cstrncpy(K,I,M)<M?0:u.SQLITE_CANTOPEN},xGetLastError:function(re,I,M){const K=te(re),f=K.popErr();if(K.log(`xGetLastError ${I} e =`,f),f){const y=S.scopedAllocPush();try{const[P,D]=S.scopedAllocCString(f.message,!0);S.cstrncpy(M,P,I),D>I&&S.poke8(S.ptr.add(M,I,-1),0)}catch{return u.SQLITE_NOMEM}finally{S.scopedAllocPop(y)}}return f?f.sqlite3Rc||u.SQLITE_IOERR:0},xOpen:function(I,M,K,f,y){const P=te(I);try{f&=~O,P.log(`xOpen ${S.cstrToJs(M)} ${f}`);const D=M&&S.peek8(M)?P.getPath(M):w();let Z=P.getSAHForPath(D);!Z&&f&u.SQLITE_OPEN_CREATE&&(P.getFileCount()<P.getCapacity()?(Z=P.nextAvailableSAH(),P.setAssociatedPath(Z,D,f)):n("SAH pool is full. Cannot create file",D)),Z||n("file not found:",D);const oe={path:D,flags:f,sah:Z};P.mapS3FileToOFile(K,oe),oe.lockType=u.SQLITE_LOCK_NONE;const he=new u.sqlite3_file(K);return he.$pMethods=l.pointer,he.dispose(),S.poke32(y,f),0}catch(D){return P.storeErr(D),u.SQLITE_CANTOPEN}}},m=function(re){s.capi.sqlite3_vfs_find(re)&&i("VFS name is already registered:",re);const I=new u.sqlite3_vfs,M=u.sqlite3_vfs_find(null),K=M?new u.sqlite3_vfs(M):null;return I.$iVersion=2,I.$szOsFile=u.sqlite3_file.structInfo.sizeof,I.$mxPathname=R,I.addOnDispose(I.$zName=S.allocCString(re),()=>de(I.pointer,0)),K&&(I.$xRandomness=K.$xRandomness,I.$xSleep=K.$xSleep,K.dispose()),!I.$xRandomness&&!c.xRandomness&&(c.xRandomness=function(f,y,P){const D=S.heap8u();let Z=0;const oe=Number(P);for(;Z<y;++Z)D[oe+Z]=Math.random()*255e3&255;return Z}),!I.$xSleep&&!c.xSleep&&(c.xSleep=(f,y)=>0),s.vfs.installVfs({vfs:{struct:I,methods:c}}),I};class E{constructor(I=Object.create(null)){Ue(this,fe);Xe(this,"vfsDir");Ue(this,se);Ue(this,le);Ue(this,Se);Ue(this,ue,new Map);Ue(this,ke,new Map);Ue(this,ye,new Set);Ue(this,F,new Map);Ue(this,W,new Uint8Array(j));Ue(this,$);Ue(this,ee);Ue(this,X);We(this,X,I.verbosity??p.verbosity),this.vfsName=I.name||p.name,We(this,ee,m(this.vfsName)),de(ae(this,ee).pointer,this),this.vfsDir=I.directory||"."+this.vfsName,We(this,$,new DataView(ae(this,W).buffer,ae(this,W).byteOffset)),this.isReady=this.reset(!!(I.clearOnInit??p.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(I.initialCapacity||p.initialCapacity)})}log(...I){ht(this,fe,Ft).call(this,2,...I)}warn(...I){ht(this,fe,Ft).call(this,1,...I)}error(...I){ht(this,fe,Ft).call(this,0,...I)}getVfs(){return ae(this,ee)}getCapacity(){return ae(this,ue).size}getFileCount(){return ae(this,ke).size}getFileNames(){const I=[];for(const M of ae(this,ke).keys())I.push(M);return I}async addCapacity(I){for(let M=0;M<I;++M){const K=w(),f=await(await ae(this,le).getFileHandle(K,{create:!0})).createSyncAccessHandle();ae(this,ue).set(f,K),this.setAssociatedPath(f,"",0)}return this.getCapacity()}async reduceCapacity(I){let M=0;for(const K of Array.from(ae(this,ye))){if(M===I||this.getFileCount()===this.getCapacity())break;const f=ae(this,ue).get(K);K.close(),await ae(this,le).removeEntry(f),ae(this,ue).delete(K),ae(this,ye).delete(K),++M}return M}releaseAccessHandles(){for(const I of ae(this,ue).keys())I.close();ae(this,ue).clear(),ae(this,ke).clear(),ae(this,ye).clear()}async acquireAccessHandles(I=!1){const M=[];for await(const[K,f]of ae(this,le))f.kind==="file"&&M.push([K,f]);return Promise.all(M.map(async([K,f])=>{try{const y=await f.createSyncAccessHandle();if(ae(this,ue).set(y,K),I)y.truncate(b),this.setAssociatedPath(y,"",0);else{const P=this.getAssociatedPath(y);P?ae(this,ke).set(P,y):ae(this,ye).add(y)}}catch(y){throw this.storeErr(y),this.releaseAccessHandles(),y}}))}getAssociatedPath(I){I.read(ae(this,W),{at:0});const M=ae(this,$).getUint32(C);if(ae(this,W)[0]&&(M&u.SQLITE_OPEN_DELETEONCLOSE||!(M&A)))return T(`Removing file with unexpected flags ${M.toString(16)}`,ae(this,W)),this.setAssociatedPath(I,"",0),"";const K=new Uint32Array(h/4);I.read(K,{at:Y});const f=this.computeDigest(ae(this,W),M);if(K.every((y,P)=>y===f[P])){const y=ae(this,W).findIndex(P=>P===0);return y===0&&I.truncate(b),y?L.decode(ae(this,W).subarray(0,y)):""}else return T("Disassociating file with bad digest."),this.setAssociatedPath(I,"",0),""}setAssociatedPath(I,M,K){const f=N.encodeInto(M,ae(this,W));R<=f.written+1&&n("Path too long:",M),M&&K&&(K|=O),ae(this,W).fill(0,f.written,R),ae(this,$).setUint32(C,K);const y=this.computeDigest(ae(this,W),K);I.write(ae(this,W),{at:0}),I.write(y,{at:Y}),I.flush(),M?(ae(this,ke).set(M,I),ae(this,ye).delete(I)):(I.truncate(b),ae(this,ye).add(I))}computeDigest(I,M){if(M&O){let K=3735928559,f=1103547991;for(const y of I)K=Math.imul(K^y,2654435761),f=Math.imul(f^y,104729);return new Uint32Array([K>>>0,f>>>0])}else return new Uint32Array([0,0])}async reset(I){await this.isReady;let M=await navigator.storage.getDirectory(),K;for(const f of this.vfsDir.split("/"))f&&(K=M,M=await M.getDirectoryHandle(f,{create:!0}));return We(this,se,M),We(this,Se,K),We(this,le,await ae(this,se).getDirectoryHandle(z,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(I)}getPath(I){return S.isPtr(I)&&(I=S.cstrToJs(I)),(I instanceof URL?I:new URL(I,"file://localhost/")).pathname}deletePath(I){const M=ae(this,ke).get(I);return M&&(ae(this,ke).delete(I),this.setAssociatedPath(M,"",0)),!!M}storeErr(I,M){return I&&(I.sqlite3Rc=M||u.SQLITE_IOERR,this.error(I)),this.$error=I,M}popErr(){const I=this.$error;return this.$error=void 0,I}nextAvailableSAH(){const[I]=ae(this,ye).keys();return I}getOFileForS3File(I){return ae(this,F).get(I)}mapS3FileToOFile(I,M){M?(ae(this,F).set(I,M),me(I,this)):(ae(this,F).delete(I),me(I,!1))}hasFilename(I){return ae(this,ke).has(I)}getSAHForPath(I){return ae(this,ke).get(I)}async removeVfs(){if(!ae(this,ee).pointer||!ae(this,le))return!1;u.sqlite3_vfs_unregister(ae(this,ee).pointer),ae(this,ee).dispose(),delete r[this.vfsName];try{this.releaseAccessHandles(),await ae(this,se).removeEntry(z,{recursive:!0}),We(this,le,void 0),await ae(this,Se).removeEntry(ae(this,se).name,{recursive:!0}),We(this,se,We(this,Se,void 0))}catch(I){s.config.error(this.vfsName,"removeVfs() failed with no recovery strategy:",I)}return!0}pauseVfs(){return ae(this,F).size>0&&s.SQLite3Error.toss(u.SQLITE_MISUSE,"Cannot pause VFS",this.vfsName,"because it has opened files."),ae(this,ue).size>0&&(u.sqlite3_vfs_unregister(this.vfsName),this.releaseAccessHandles()),this}isPaused(){return ae(this,ue).size===0}async unpauseVfs(){return ae(this,ue).size===0?this.acquireAccessHandles(!1).then(()=>u.sqlite3_vfs_register(ae(this,ee),0),this):this}exportFile(I){const M=ae(this,ke).get(I)||n("File not found:",I),K=M.getSize()-b,f=new Uint8Array(K>0?K:0);if(K>0){const y=M.read(f,{at:b});y!=K&&n("Expected to read "+K+" bytes but read "+y+".")}return f}async importDbChunked(I,M){const K=ae(this,ke).get(I)||this.nextAvailableSAH()||n("No available handles to import to.");K.truncate(0);let f=0,y,P=!1;try{for(;(y=await M())!==void 0;)y instanceof ArrayBuffer&&(y=new Uint8Array(y)),!P&&f===0&&y.byteLength>=15&&(x.affirmDbHeader(y),P=!0),K.write(y,{at:b+f}),f+=y.byteLength;if((f<512||f%512!==0)&&n("Input size",f,"is not correct for an SQLite database."),!P){const D=new Uint8Array(20);K.read(D,{at:0}),x.affirmDbHeader(D)}K.write(new Uint8Array([1,1]),{at:b+18})}catch(D){throw this.setAssociatedPath(K,"",0),D}return this.setAssociatedPath(K,I,u.SQLITE_OPEN_MAIN_DB),f}importDb(I,M){if(M instanceof ArrayBuffer)M=new Uint8Array(M);else if(M instanceof Function)return this.importDbChunked(I,M);const K=ae(this,ke).get(I)||this.nextAvailableSAH()||n("No available handles to import to."),f=M.byteLength;(f<512||f%512!=0)&&n("Byte array size is invalid for an SQLite db.");const y="SQLite format 3";for(let D=0;D<15;++D)y.charCodeAt(D)!==M[D]&&n("Input does not contain an SQLite database header.");const P=K.write(M,{at:b});return P!=f?(this.setAssociatedPath(K,"",0),n("Expected to write "+f+" bytes but wrote "+P+".")):(K.write(new Uint8Array([1,1]),{at:b+18}),this.setAssociatedPath(K,I,u.SQLITE_OPEN_MAIN_DB)),P}}se=new WeakMap,le=new WeakMap,Se=new WeakMap,ue=new WeakMap,ke=new WeakMap,ye=new WeakMap,F=new WeakMap,W=new WeakMap,$=new WeakMap,ee=new WeakMap,X=new WeakMap,fe=new WeakSet,Ft=function(I,...M){ae(this,X)>I&&g[I](this.vfsName+":",...M)};class B{constructor(I){Ue(this,ne);We(this,ne,I),this.vfsName=I.vfsName}async addCapacity(I){return ae(this,ne).addCapacity(I)}async reduceCapacity(I){return ae(this,ne).reduceCapacity(I)}getCapacity(){return ae(this,ne).getCapacity(ae(this,ne))}getFileCount(){return ae(this,ne).getFileCount()}getFileNames(){return ae(this,ne).getFileNames()}async reserveMinimumCapacity(I){const M=ae(this,ne).getCapacity();return M<I?ae(this,ne).addCapacity(I-M):M}exportFile(I){return ae(this,ne).exportFile(I)}importDb(I,M){return ae(this,ne).importDb(I,M)}async wipeFiles(){return ae(this,ne).reset(!0)}unlink(I){return ae(this,ne).deletePath(I)}async removeVfs(){return ae(this,ne).removeVfs()}pauseVfs(){return ae(this,ne).pauseVfs(),this}async unpauseVfs(){return ae(this,ne).unpauseVfs().then(()=>this)}isPaused(){return ae(this,ne).isPaused()}}ne=new WeakMap;const G=async()=>{const re=await navigator.storage.getDirectory(),I=".opfs-sahpool-sync-check-"+w(),M=(await(await re.getFileHandle(I,{create:!0})).createSyncAccessHandle()).close();return await M,await re.removeEntry(I),M!=null&&M.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};s.installOpfsSAHPoolVfs=async function(re=Object.create(null)){var M;re=Object.assign(Object.create(null),p,re||{});const I=re.name;if(re.$testThrowPhase1)throw re.$testThrowPhase1;if(r[I])try{return await r[I]}catch(K){if(re.forceReinitIfPreviouslyFailed)delete r[I];else throw K}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((M=navigator==null?void 0:navigator.storage)!=null&&M.getDirectory)?r[I]=Promise.reject(new Error("Missing required OPFS APIs.")):r[I]=G().then(async function(){if(re.$testThrowPhase2)throw re.$testThrowPhase2;const K=new E(re);return K.isReady.then(async()=>{const f=new B(K);if(s.oo1){const y=s.oo1,P=K.getVfs(),D=function(...Z){const oe=y.DB.dbCtorHelper.normalizeArgs(...Z);oe.vfs=P.$zName,y.DB.dbCtorHelper.call(this,oe)};D.prototype=Object.create(y.DB.prototype),f.OpfsSAHPoolDb=D}return K.log("VFS initialized."),f}).catch(async f=>{throw await K.removeVfs().catch(()=>{}),f})}).catch(K=>r[I]=Promise.reject(K))}});try{const s=Object.assign(Object.create(null),{memory:typeof et<"u"?et:t.wasmMemory,exports:typeof dt<"u"?dt:Object.prototype.hasOwnProperty.call(t,"wasmExports")?t.wasmExports:t.asm},globalThis.sqlite3ApiBootstrap.defaultConfig,globalThis.sqlite3ApiConfig||{});e.debugModule("Bootstrapping lib config",s);const n=globalThis.sqlite3ApiBootstrap(s);return delete globalThis.sqlite3ApiBootstrap,n}catch(s){throw console.error("sqlite3ApiBootstrap() error:",s),s}},Qt?Ae=_:Ae=new Promise((e,t)=>{Tt=e,kt=t}),Ae}Re=function(){var Et,ut;const xe=Re;if(!xe)throw new Error("Expecting sqlite3InitModule to be defined by the Emscripten build.");const Ae=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(Et=globalThis==null?void 0:globalThis.document)==null?void 0:Et.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(ut=globalThis==null?void 0:globalThis.location)!=null&&ut.href?new URL(globalThis.location.href).searchParams:new URLSearchParams,wasmFilename:"sqlite3.wasm"});if(Ae.debugModule=Ae.urlParams.has("sqlite3.debugModule")?(...$e)=>console.warn("sqlite3.debugModule:",...$e):()=>{},Ae.urlParams.has("sqlite3.dir"))Ae.sqlite3Dir=Ae.urlParams.get("sqlite3.dir")+"/";else if(Ae.moduleScript){const $e=Ae.moduleScript.src.split("/");$e.pop(),Ae.sqlite3Dir=$e.join("/")+"/"}const _=globalThis.sqlite3InitModule=function $e(...mt){var nt,At;return Ae.emscriptenLocateFile=(nt=mt[0])==null?void 0:nt.locateFile,Ae.emscriptenInstantiateWasm=(At=mt[0])==null?void 0:At.instantiateWasm,xe(...mt).then(Ye=>{Ae.debugModule("sqlite3InitModule() sIMS =",Ae),Ae.debugModule("sqlite3InitModule() EmscriptenModule =",Ye);const st=Ye.runSQLite3PostLoadInit(Ae,Ye,!!$e.__isUnderTest);return Ae.debugModule("sqlite3InitModule() sqlite3 =",st),st}).catch(Ye=>{throw console.error("Exception loading sqlite3 module:",Ye),Ye})};if(_.ready=xe.ready,Ae.moduleScript){let $e=Ae.moduleScript.src.split("/");$e.pop(),Ae.scriptDir=$e.join("/")+"/"}return Ae.debugModule("extern-post-js.c-pp.js sqlite3InitModuleState =",Ae),_}(),Re().then(xe=>xe.initWorker1API())})();
